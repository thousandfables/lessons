<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I don't want sleep.",
                    "corrected": "I didn't want to sleep.",
                    "explanation": "The correct form is 'didn't want to sleep' to indicate a past desire.",
                    "context": "I was busy last night and couldn't get to bed early. I didn't want to sleep, and instead, I was moving around my flat."
                },
                {
                    "original": "I have been started.",
                    "corrected": "I started.",
                    "explanation": "'Have been started' is incorrect; it should be 'I started' for past actions.",
                    "context": "Several weeks ago, I started going to a club at my university. I still go there every day, four times a week."
                },
                {
                    "original": "From Monday till Tuesday.",
                    "corrected": "From Monday to Tuesday.",
                    "explanation": "'Till' is informal; 'to' is more appropriate in this context.",
                    "context": "I attend the club from Monday to Thursday. It takes a lot of time and effort."
                },
                {
                    "original": "When we will spend more time for example at the weekends.",
                    "corrected": "When we spend more time, for example, on the weekends.",
                    "explanation": "The future tense 'will' is unnecessary here; it should be present tense.",
                    "context": "I think that we spend a lot of time together. When we spend more time, for example, on the weekends, it will be different."
                },
                {
                    "original": "I finished, просто finished at 10 o'clock.",
                    "corrected": "I finished at 10 o'clock.",
                    "explanation": "The word 'просто' (just) is unnecessary and disrupts the flow.",
                    "context": "I finished at 10 o'clock. I need an hour to get home, which cuts into my free time."
                },
                {
                    "original": "To working around my flat.",
                    "corrected": "To work around my flat.",
                    "explanation": "'To working' is incorrect; it should be 'to work' to indicate purpose.",
                    "context": "I don't have free time at home to work around my flat. I like to keep things tidy."
                },
                {
                    "original": "I feel very mixed emotional emotions.",
                    "corrected": "I feel very mixed emotions.",
                    "explanation": "The phrase 'mixed emotional emotions' is redundant; 'mixed emotions' is sufficient.",
                    "context": "I believe that the theater club makes me feel very mixed emotions. Overall, it's a good experience."
                },
                {
                    "original": "Every discipline is educated.",
                    "corrected": "Every discipline is taught.",
                    "explanation": "'Educated' is not used correctly here; 'taught' is the appropriate verb.",
                    "context": "We have several disciplines, and every discipline is taught by a new coach. This can be confusing."
                },
                {
                    "original": "And one of them is the main director of our director.",
                    "corrected": "And one of them is the main director of our theater.",
                    "explanation": "The phrase 'of our director' is incorrect; it should specify 'of our theater.'",
                    "context": "One of them is the main director of our theater. He's a very specific person."
                },
                {
                    "original": "You need very big patient.",
                    "corrected": "You need a lot of patience.",
                    "explanation": "'Very big patient' is incorrect; it should be 'a lot of patience.'",
                    "context": "You need a lot of patience to deal with them. It's challenging to work with them."
                },
                {
                    "original": "He late.",
                    "corrected": "He was late.",
                    "explanation": "The verb 'late' is incorrect; it should be 'was late' to indicate the past.",
                    "context": "Last week, he was late to our rehearsal. This caused a lot of frustration."
                },
                {
                    "original": "We put the setting.",
                    "corrected": "We prepare the setting.",
                    "explanation": "'Put the setting' is not idiomatic; 'prepare the setting' is the correct phrase.",
                    "context": "We prepare the setting for our concert. We're working hard to get everything ready."
                },
                {
                    "original": "They always hurry us. But they very slowly slowly.",
                    "corrected": "They always hurry us, but they work very slowly.",
                    "explanation": "The phrase 'very slowly slowly' is redundant; it should be 'very slowly.'",
                    "context": "They always hurry us, but they work very slowly. This creates a lot of frustration in our group."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "Because I don't know how we can Finish our work to the end.",
                    "corrected": "Because I don't know how we can finish our work by the end.",
                    "explanation": "The phrase 'to the end' is incorrect; 'by the end' is the appropriate expression for a deadline.",
                    "context": "We have a lot of work to complete. Because I don't know how we can finish our work by the end of the deadline. We need to manage our time better."
                },
                {
                    "original": "And need this work need lot of need lots of needs.",
                    "corrected": "And this work needs a lot of repetition.",
                    "explanation": "The structure is confusing; 'need' should be 'needs' and 'a lot of' should be used correctly.",
                    "context": "We have a challenging project ahead. And this work needs a lot of repetition. It's essential for us to practice more."
                },
                {
                    "original": "So basically you are very busy today.",
                    "corrected": "So basically, you are very busy today.",
                    "explanation": "A comma is needed after 'basically' for proper punctuation.",
                    "context": "I see how much you have on your plate. So basically, you are very busy today. I understand the pressure you're under."
                },
                {
                    "original": "Because you want to offend him.",
                    "corrected": "Because you don't want to offend him.",
                    "explanation": "The sentence is missing 'don't' to convey the intended meaning.",
                    "context": "It's important to maintain good relationships. Because you don't want to offend him. You value that connection."
                },
                {
                    "original": "Like when the person is offended they feel bad.",
                    "corrected": "Like when a person is offended, they feel bad.",
                    "explanation": "The article 'a' is needed before 'person,' and a comma is required before 'they.'",
                    "context": "Understanding feelings is crucial. Like when a person is offended, they feel bad. We should be mindful of our words."
                },
                {
                    "original": "And when you say something just you know I'm sorry to bother you.",
                    "corrected": "And when you say something like, 'I'm sorry to bother you.'",
                    "explanation": "The phrase needs clarification with 'like' and proper punctuation.",
                    "context": "Communication is key in difficult situations. And when you say something like, 'I'm sorry to bother you.' It softens the message."
                },
                {
                    "original": "I decided what I could do in writing.",
                    "corrected": "I decided what I could do for writing.",
                    "explanation": "'In writing' should be 'for writing' to indicate purpose.",
                    "context": "I've been thinking about my writing skills. I decided what I could do for writing. I want to improve my abilities."
                },
                {
                    "original": "But in general I think I will decide and it will be easier for me.",
                    "corrected": "But in general, I think I will decide, and it will be easier for me.",
                    "explanation": "Commas are needed for clarity and proper sentence structure.",
                    "context": "I'm considering my options carefully. But in general, I think I will decide, and it will be easier for me. I want to make the right choice."
                },
                {
                    "original": "What score do I need? Good.",
                    "corrected": "What score do I need? That's good.",
                    "explanation": "The response 'Good' is incomplete; 'That's good' provides clarity.",
                    "context": "I'm assessing my goals. What score do I need? That's good. I want to aim high."
                },
                {
                    "original": "If concert, study.",
                    "corrected": "If there's a concert, study.",
                    "explanation": "The sentence is missing a subject and verb for clarity.",
                    "context": "Balancing priorities is tough. If there's a concert, study. I need to manage my time wisely."
                },
                {
                    "original": "You need to find 4 hours between lessons.",
                    "corrected": "You need to find 4 hours in between lessons.",
                    "explanation": "'Between' should be 'in between' for correct usage.",
                    "context": "Time management is crucial for success. You need to find 4 hours in between lessons. It will help with your preparation."
                },
                {
                    "original": "But this is intensive work.",
                    "corrected": "But this is intensive work.",
                    "explanation": "The sentence is correct but lacks context for clarity.",
                    "context": "Preparing for exams requires effort. But this is intensive work. We need to stay focused."
                },
                {
                    "original": "You understand, you can't work like that all year.",
                    "corrected": "You understand that you can't work like that all year.",
                    "explanation": "The sentence needs 'that' to connect the clauses properly.",
                    "context": "Sustainability is important in our efforts. You understand that you can't work like that all year. It's not feasible."
                },
                {
                    "original": "I want to make it in time.",
                    "corrected": "I want to make it on time.",
                    "explanation": "'In time' implies early; 'on time' is the correct expression for punctuality.",
                    "context": "Deadlines are approaching. I want to make it on time. I need to stay organized."
                },
                {
                    "original": "So yes, we raise the level in order to start the intensive work.",
                    "corrected": "So yes, we raise our level in order to start the intensive work.",
                    "explanation": "The possessive 'our' is needed to clarify whose level is being raised.",
                    "context": "Improvement is essential for progress. So yes, we raise our level in order to start the intensive work. It's a necessary step."
                },
                {
                    "original": "Oh, at a good grade.",
                    "corrected": "Oh, at a good level.",
                    "explanation": "'Grade' is not the correct term in this context; 'level' is more appropriate.",
                    "context": "Setting goals is important. Oh, at a good level. I want to achieve that."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "I have every day a good mood.",
                    "corrected": "I have a good mood every day.",
                    "explanation": "The phrase 'every day' should come after the article 'a' to correctly modify 'good mood.'",
                    "context": "I've been feeling great lately. I have a good mood every day. It's a little bit of a secret why I'm so happy."
                },
                {
                    "original": "I broke up my relationships.",
                    "corrected": "I broke up my relationship.",
                    "explanation": "'Relationships' is plural; it should be singular 'relationship' to refer to one specific romantic involvement.",
                    "context": "A few weeks ago, I went through a tough time. I broke up my relationship. That's why I'm feeling so free now."
                },
                {
                    "original": "I step all this...",
                    "corrected": "I went through all this...",
                    "explanation": "'Step' is incorrect here; 'went through' better conveys the process of experiencing emotions.",
                    "context": "When I feel down, I try to process my emotions. I went through all this... the nervousness, apathy, and eventually acceptance."
                },
                {
                    "original": "I start new life.",
                    "corrected": "I start a new life.",
                    "explanation": "The article 'a' is needed before 'new life' to indicate that it is a singular noun.",
                    "context": "After my breakup, I felt a shift in my perspective. I start a new life. I want to be more patient and calm."
                },
                {
                    "original": "I want another and another another how to say equal, equal right.",
                    "corrected": "I want another person who is equal, with equal rights.",
                    "explanation": "The phrase is unclear; restructuring it clarifies the desire for equality in a relationship.",
                    "context": "In my next relationship, I hope to find someone who shares my values. I want another person who is equal, with equal rights."
                },
                {
                    "original": "My feelings are not like important like I want.",
                    "corrected": "My feelings are not as important as I want them to be.",
                    "explanation": "The phrase 'like important' is incorrect; 'as important as' is the correct comparative structure.",
                    "context": "I've been reflecting on my past relationships. My feelings are not as important as I want them to be. I want my partner to value them more."
                },
                {
                    "original": "What is treatment in relationship?",
                    "corrected": "What is treatment in a relationship?",
                    "explanation": "The article 'a' is needed before 'relationship' to specify that it refers to any relationship.",
                    "context": "I'm trying to define what I expect from a partner. What is treatment in a relationship? It's about mutual respect and care."
                },
                {
                    "original": "I mean what is your like ideal picture of a relationship like a relationship that ends in a marriage or just you know a relationship where you just like that person, he likes you and it kind of you're just comfortable with each other.",
                    "corrected": "I mean, what is your ideal picture of a relationship? Is it one that ends in marriage, or just a comfortable relationship where you both like each other?",
                    "explanation": "The original sentence is overly long and convoluted; breaking it into two questions improves clarity.",
                    "context": "I'm curious about your views on relationships. I mean, what is your ideal picture of a relationship? Is it one that ends in marriage?"
                },
                {
                    "original": "What is a happy end?",
                    "corrected": "What is a happy ending?",
                    "explanation": "'Happy end' is not idiomatic in English; 'happy ending' is the correct term.",
                    "context": "When discussing relationships, I often think about their outcomes. What is a happy ending? It's when both partners feel fulfilled."
                },
                {
                    "original": "They was from one town and they my father looked my mother Oif Uvidil looked so my my mother on the in the club I think in the club and then no no no night club night club disco disco disco disco disco disco disco.",
                    "corrected": "They were from the same town, and my father saw my mother at a club, I think it was a disco.",
                    "explanation": "The verb 'was' should be 'were' for plural subjects; the sentence is also overly repetitive and needs restructuring.",
                    "context": "When I think about my parents' story, it's quite simple. They were from the same town, and my father saw my mother at a club."
                },
                {
                    "original": "But you know you look at them and it seems so easy like wow you just found each other and everything just worked.",
                    "corrected": "But you know, when you look at them, it seems so easy, like they just found each other and everything worked out.",
                    "explanation": "The sentence needs commas for clarity and to separate ideas; 'worked out' is more idiomatic than 'worked.'",
                    "context": "Reflecting on my parents' relationship, I often feel amazed. But you know, when you look at them, it seems so easy, like they just found each other."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "I thought that I go to this company.",
                    "corrected": "I thought that I would go to this company.",
                    "explanation": "The verb 'go' should be in the conditional form 'would go' to indicate a future intention in the past.",
                    "context": "I don't know what I want to do after graduation. I thought that I would go to this company where my ex-boyfriend works. But now I'm uncertain about my future."
                },
                {
                    "original": "I wrote material about this occasion.",
                    "corrected": "I wrote materials about this occasion.",
                    "explanation": "'Material' is uncountable; 'materials' should be used to refer to various pieces of writing.",
                    "context": "During my practice, I have been attending different events. I wrote materials about these occasions. It's been a great learning experience."
                },
                {
                    "original": "What kind of exposition? Something digital.",
                    "corrected": "What kind of exposition? It's something digital.",
                    "explanation": "The sentence lacks a verb; 'It's' should be included to form a complete sentence.",
                    "context": "I was asked about the exhibition I attended. What kind of exposition? It's something digital. I'm excited to learn more about it."
                },
                {
                    "original": "My feelings. Impression. My impression.",
                    "corrected": "My feelings and impressions.",
                    "explanation": "The phrases are fragmented; they should be combined into a complete thought.",
                    "context": "When discussing the event, I wanted to convey my thoughts. My feelings and impressions were strong. I hope to express them well in my writing."
                },
                {
                    "original": "You can use ChatGPT to describe a structure. Main part.",
                    "corrected": "You can use ChatGPT to describe a structure and the main part.",
                    "explanation": "The second sentence fragment needs to be connected to the first for clarity.",
                    "context": "While discussing AI's role in writing, I mentioned its capabilities. You can use ChatGPT to describe a structure and the main part. However, human input is still essential."
                },
                {
                    "original": "To fill this text... Emotions.",
                    "corrected": "To fill this text with emotions.",
                    "explanation": "The phrase is incomplete; 'with' should be added to clarify the action.",
                    "context": "In our discussion about writing, I emphasized the importance of emotion. To fill this text with emotions is crucial for engaging the audience."
                },
                {
                    "original": "There are no... Well, it's not possible.",
                    "corrected": "There is no emotion in it; well, it's not possible.",
                    "explanation": "Subject-verb agreement is incorrect; 'are' should be 'is' to match the singular subject 'emotion.'",
                    "context": "When discussing AI-generated text, I noted a significant limitation. There is no emotion in it; well, it's not possible to replicate human feelings."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Insomnia",
                    "definition": "A condition characterized by the inability to fall asleep or stay asleep.",
                    "context": {
                        "Context 1": "She suffers from insomnia and often finds it hard to get a good night's sleep.",
                        "Context 2": "The movie 'Insomnia' explores the psychological effects of sleep deprivation.",
                        "Context 3": "Many students experience insomnia during exam periods due to stress."
                    }
                },
                {
                    "word": "Overwhelmed",
                    "definition": "To be affected by too much of something, often leading to stress or confusion.",
                    "context": {
                        "Context 1": "He felt overwhelmed with emotion after receiving the good news.",
                        "Context 2": "The amount of homework given this week has left me feeling overwhelmed.",
                        "Context 3": "She was overwhelmed by the number of choices at the buffet."
                    }
                },
                {
                    "word": "Hanging out",
                    "definition": "Spending time with friends in a relaxed manner without any specific purpose.",
                    "context": {
                        "Context 1": "We were just hanging out at the park, enjoying the weather.",
                        "Context 2": "Hanging out with family during the holidays is always fun.",
                        "Context 3": "He prefers hanging out at home rather than going to parties."
                    }
                },
                {
                    "word": "Going out",
                    "definition": "To leave one's home to engage in social activities, often implying a romantic context.",
                    "context": {
                        "Context 1": "They have been going out for a few months now and seem very happy.",
                        "Context 2": "Going out to dinner is a great way to celebrate special occasions.",
                        "Context 3": "She loves going out to explore new restaurants in the city."
                    }
                },
                {
                    "word": "Chores",
                    "definition": "Routine tasks or duties, often related to household maintenance.",
                    "context": {
                        "Context 1": "I need to finish my house chores before I can relax.",
                        "Context 2": "He always complains about doing his chores on the weekend.",
                        "Context 3": "The kids are responsible for their own chores around the house."
                    }
                },
                {
                    "word": "Punctual",
                    "definition": "Being on time; prompt.",
                    "context": {
                        "Context 1": "It's important to be punctual for your job interviews.",
                        "Context 2": "She is always punctual, arriving at least 10 minutes early.",
                        "Context 3": "Being punctual shows respect for other people's time."
                    }
                },
                {
                    "word": "Extravagant",
                    "definition": "Lacking restraint in spending money or using resources; excessive.",
                    "context": {
                        "Context 1": "The extravagant party was filled with lavish decorations and gourmet food.",
                        "Context 2": "He has an extravagant taste in cars, always choosing the most expensive models.",
                        "Context 3": "Her extravagant lifestyle often leaves her broke by the end of the month."
                    }
                },
                {
                    "word": "Emotional",
                    "definition": "Relating to a person's feelings or emotions.",
                    "context": {
                        "Context 1": "The movie was so emotional that many people cried.",
                        "Context 2": "He gave an emotional speech that moved everyone in the audience.",
                        "Context 3": "She tends to be very emotional during family gatherings."
                    }
                },
                {
                    "word": "Director",
                    "definition": "A person who is in charge of an activity, organization, or artistic production.",
                    "context": {
                        "Context 1": "The director of the play has a unique vision for the production.",
                        "Context 2": "She aspires to become a film director and create her own movies.",
                        "Context 3": "The director called for a meeting to discuss the next steps in the project."
                    }
                },
                {
                    "word": "Routine",
                    "definition": "A sequence of actions regularly followed; a fixed program.",
                    "context": {
                        "Context 1": "I have a morning routine that helps me start my day off right.",
                        "Context 2": "His workout routine includes both cardio and strength training.",
                        "Context 3": "She likes to change her routine every few months to keep things interesting."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Insomnia",
                    "fact": "Did you know that insomnia is so common that it has been studied more than any other sleep disorder?"
                },
                {
                    "word": "Overwhelmed",
                    "fact": "The word 'overwhelmed' comes from the Old English 'whelm,' which means to turn over or capsize, just like your emotions sometimes!"
                },
                {
                    "word": "Extravagant",
                    "fact": "The most extravagant wedding ever recorded cost over $100 million, featuring a helicopter arrival and a performance by a famous pop star!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                },
                {
                    "question": "Why did the teacher wear sunglasses to class?",
                    "answer": "Because her students were so bright!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Rush",
                    "definition": "To move or act with great speed.",
                    "context": {
                        "Context 1": "They always rush us to finish our work on time.",
                        "Context 2": "I like to rush through my morning coffee before heading to work.",
                        "Context 3": "The athlete had to rush to the finish line to secure his victory."
                    }
                },
                {
                    "word": "Difficult",
                    "definition": "Hard to do, deal with, or understand.",
                    "context": {
                        "Context 1": "Our work is very difficult and requires a lot of effort.",
                        "Context 2": "Learning a new language can be difficult but rewarding.",
                        "Context 3": "The math problem was so difficult that even the teacher struggled to solve it."
                    }
                },
                {
                    "word": "Repetition",
                    "definition": "The action of repeating something that has already been said or done.",
                    "context": {
                        "Context 1": "This work needs a lot of repetition to master the skills.",
                        "Context 2": "Repetition is key in learning to play a musical instrument.",
                        "Context 3": "The artist used repetition in her paintings to create a unique pattern."
                    }
                },
                {
                    "word": "Offend",
                    "definition": "To cause someone to feel upset, annoyed, or resentful.",
                    "context": {
                        "Context 1": "You don't want to offend the main director by speaking out.",
                        "Context 2": "He didn't mean to offend her with his joke; it was just a misunderstanding.",
                        "Context 3": "The movie was so bad that it offended many critics."
                    }
                },
                {
                    "word": "Prepare",
                    "definition": "To make ready for use or consideration.",
                    "context": {
                        "Context 1": "You need to prepare for the concert by practicing regularly.",
                        "Context 2": "She spent the whole week to prepare for her birthday party.",
                        "Context 3": "The chef had to prepare the ingredients before starting to cook."
                    }
                },
                {
                    "word": "Exhausted",
                    "definition": "Extremely tired; drained of energy.",
                    "context": {
                        "Context 1": "After three months of intensive work, any person will be exhausted.",
                        "Context 2": "I felt exhausted after running the marathon last weekend.",
                        "Context 3": "The dog was exhausted after playing fetch all afternoon."
                    }
                },
                {
                    "word": "Schedule",
                    "definition": "A plan for carrying out a process or procedure, giving lists of intended events and times.",
                    "context": {
                        "Context 1": "He has already released his schedule for the concert preparations.",
                        "Context 2": "My schedule is packed with meetings and appointments this week.",
                        "Context 3": "The train schedule was delayed due to bad weather."
                    }
                },
                {
                    "word": "Intensive",
                    "definition": "Involving a lot of effort or activity in a short period of time.",
                    "context": {
                        "Context 1": "We need to start this intensive work to prepare for the exam.",
                        "Context 2": "The intensive training program helped the athletes improve their performance.",
                        "Context 3": "She enrolled in an intensive language course to quickly improve her skills."
                    }
                },
                {
                    "word": "Factor",
                    "definition": "A circumstance, fact, or influence that contributes to a result.",
                    "context": {
                        "Context 1": "Time is a very big factor in our preparation for the exam.",
                        "Context 2": "Weather can be a significant factor in planning outdoor events.",
                        "Context 3": "The cost of materials is a crucial factor in the overall budget."
                    }
                },
                {
                    "word": "Approach",
                    "definition": "A way of dealing with something; a method.",
                    "context": {
                        "Context 1": "You can ask me to tell you what approach I need for studying.",
                        "Context 2": "His approach to solving problems is very analytical.",
                        "Context 3": "The teacher's approach to education focuses on creativity and critical thinking."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Exhausted",
                    "fact": "Did you know that the average person spends about 1/3 of their life sleeping? That’s a lot of time to be exhausted!"
                },
                {
                    "word": "Prepare",
                    "fact": "In Japan, there's a tradition of preparing for exams by eating special foods that are believed to boost brain power!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                },
                {
                    "question": "Why did the teacher wear sunglasses in class?",
                    "answer": "Because her students were so bright!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Demotivated",
                    "definition": "Feeling a loss of motivation or enthusiasm.",
                    "context": {
                        "Context 1": "After failing the exam, she felt demotivated and didn't want to study anymore.",
                        "Context 2": "The rainy weather made everyone feel demotivated to go outside.",
                        "Context 3": "He was demotivated after his favorite team lost the championship."
                    }
                },
                {
                    "word": "Apathy",
                    "definition": "Lack of interest, enthusiasm, or concern.",
                    "context": {
                        "Context 1": "His apathy towards his studies worried his teachers.",
                        "Context 2": "The apathy of the crowd was evident during the boring speech.",
                        "Context 3": "She showed apathy towards the movie, falling asleep halfway through."
                    }
                },
                {
                    "word": "Acceptance",
                    "definition": "The process of being received as adequate or suitable.",
                    "context": {
                        "Context 1": "After much reflection, he found acceptance of his past mistakes.",
                        "Context 2": "The acceptance of new technology can be slow in some industries.",
                        "Context 3": "Her acceptance of the award was met with loud applause."
                    }
                },
                {
                    "word": "Regret",
                    "definition": "A feeling of sadness or disappointment over something that has happened or been done.",
                    "context": {
                        "Context 1": "She felt regret for not taking the job offer when she had the chance.",
                        "Context 2": "His regret about the missed opportunity haunted him for years.",
                        "Context 3": "He expressed regret for eating too much cake at the party."
                    }
                },
                {
                    "word": "Perspective",
                    "definition": "A particular attitude toward or way of regarding something; a point of view.",
                    "context": {
                        "Context 1": "Her perspective on the issue changed after she spoke to her friend.",
                        "Context 2": "From his perspective, the project was a success despite the challenges.",
                        "Context 3": "The artist's unique perspective is what makes her work so captivating."
                    }
                },
                {
                    "word": "Equality",
                    "definition": "The state of being equal, especially in status, rights, and opportunities.",
                    "context": {
                        "Context 1": "The movement fought for equality among all citizens.",
                        "Context 2": "In the game, equality between teams is crucial for fair play.",
                        "Context 3": "The restaurant promotes equality by offering the same menu to everyone."
                    }
                },
                {
                    "word": "Compromise",
                    "definition": "An agreement or settlement of a dispute that is reached by each side making concessions.",
                    "context": {
                        "Context 1": "They reached a compromise after hours of negotiation.",
                        "Context 2": "Compromise is key in a successful relationship.",
                        "Context 3": "The two countries signed a treaty as a compromise to end the conflict."
                    }
                },
                {
                    "word": "Vital",
                    "definition": "Absolutely necessary or important; essential.",
                    "context": {
                        "Context 1": "Good communication is vital for a healthy relationship.",
                        "Context 2": "Water is vital for all living organisms.",
                        "Context 3": "Exercise is vital for maintaining physical health."
                    }
                },
                {
                    "word": "Treatment",
                    "definition": "The manner in which someone behaves toward or deals with someone or something.",
                    "context": {
                        "Context 1": "She expected better treatment from her friends.",
                        "Context 2": "The treatment of animals in the circus has been a topic of debate.",
                        "Context 3": "He received excellent treatment at the hospital after his surgery."
                    }
                },
                {
                    "word": "Experience",
                    "definition": "Practical contact with and observation of facts or events.",
                    "context": {
                        "Context 1": "Traveling abroad was a life-changing experience for her.",
                        "Context 2": "He has years of experience in the field of engineering.",
                        "Context 3": "The experience of skydiving was thrilling and unforgettable."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Regret",
                    "fact": "Did you know that the word 'regret' comes from the Latin 'regretare', which means 'to cry out again'? So, it's like your feelings are just yelling at you!"
                },
                {
                    "word": "Apathy",
                    "fact": "Apathy is so common that there's even a term called 'apathetic syndrome'—but the people who have it probably won't care enough to find out!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the relationship break up?",
                    "answer": "Because it couldn't find common ground!"
                },
                {
                    "question": "Why don't relationships ever get lost?",
                    "answer": "Because they always have a 'compass' to guide them!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Relationship",
                    "definition": "The way in which two or more people or groups regard and behave toward each other.",
                    "context": {
                        "Context 1": "In some contexts, the word отношения can be translated as relationship.",
                        "Context 2": "The relationship between the teacher and students is crucial for a positive learning environment.",
                        "Context 3": "She has a great relationship with her pet cat, often treating it like family."
                    }
                },
                {
                    "word": "Exposition",
                    "definition": "A comprehensive description and explanation of an idea or theory; also refers to a public exhibition.",
                    "context": {
                        "Context 1": "The big exposition opening at the museum featured modern art.",
                        "Context 2": "The exposition of the new scientific theory was met with great interest.",
                        "Context 3": "At the book fair, there was an exposition of rare manuscripts."
                    }
                },
                {
                    "word": "Occasion",
                    "definition": "A particular time or instance of an event.",
                    "context": {
                        "Context 1": "I wrote material about this occasion when I attended the art exhibition.",
                        "Context 2": "The wedding was a joyous occasion for all the family members.",
                        "Context 3": "He wore a suit for the occasion, as it was a formal dinner."
                    }
                },
                {
                    "word": "Impression",
                    "definition": "An effect produced on someone or something; a feeling or belief about something.",
                    "context": {
                        "Context 1": "I shared my impression about the exposition after visiting the museum.",
                        "Context 2": "Her first impression of the city was very positive.",
                        "Context 3": "He left a lasting impression on everyone he met at the conference."
                    }
                },
                {
                    "word": "Artificial Intelligence (AI)",
                    "definition": "The simulation of human intelligence processes by machines, especially computer systems.",
                    "context": {
                        "Context 1": "Will artificial intelligence replace journalists in the future?",
                        "Context 2": "AI is being used in various industries to improve efficiency.",
                        "Context 3": "Some people fear that AI could take over many jobs in the coming years."
                    }
                },
                {
                    "word": "Attract",
                    "definition": "To draw by appeal or attraction.",
                    "context": {
                        "Context 1": "You need to know special markers to attract viewers' attention.",
                        "Context 2": "The bright colors of the flowers attract many bees.",
                        "Context 3": "The new marketing campaign aims to attract younger customers."
                    }
                },
                {
                    "word": "Emotion",
                    "definition": "A natural instinctive state of mind deriving from one's circumstances, mood, or relationships with others.",
                    "context": {
                        "Context 1": "You need to fill the text with emotion to make it engaging.",
                        "Context 2": "Her speech was filled with emotion, moving the audience to tears.",
                        "Context 3": "He struggled to express his emotions after the loss of his pet."
                    }
                },
                {
                    "word": "Practice",
                    "definition": "The actual application or use of an idea, belief, or method, as opposed to theories relating to it.",
                    "context": {
                        "Context 1": "I have practice at different occasions to improve my writing skills.",
                        "Context 2": "Regular practice is essential for mastering a musical instrument.",
                        "Context 3": "She decided to practice yoga daily for better health."
                    }
                },
                {
                    "word": "Frequency",
                    "definition": "The rate at which something occurs over a particular period of time.",
                    "context": {
                        "Context 1": "I go to my mother's town with more frequency now.",
                        "Context 2": "The frequency of the train service has increased during peak hours.",
                        "Context 3": "He measured the frequency of the sound waves using a special device."
                    }
                },
                {
                    "word": "Colleague",
                    "definition": "A person with whom one works in a profession or business.",
                    "context": {
                        "Context 1": "I thought I would work with my ex-boyfriend, who is my colleague.",
                        "Context 2": "She often collaborates with her colleagues on various projects.",
                        "Context 3": "His colleague brought donuts to celebrate their team's success."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Exposition",
                    "fact": "The word 'exposition' comes from the Latin 'exponere,' which means 'to put forth.' So, it literally means to put your ideas out there!"
                },
                {
                    "word": "Artificial Intelligence",
                    "fact": "Did you know that AI can now create art? Some AI-generated paintings have sold for thousands of dollars at auctions!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the journalist bring a ladder to the interview?",
                    "answer": "Because they wanted to reach new heights in their career!"
                },
                {
                    "question": "Why did the art critic break up with the artist?",
                    "answer": "Because they just couldn't see eye to eye on the 'canvas' of their relationship!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Long time no see! How have you been?"
                },
                {
                    "Person 2": "Hey! I've been alright, just a bit busy lately. How about you?"
                },
                {
                    "Person 1": "Same here! I stayed up way too late last night. I was binge-watching a show."
                },
                {
                    "Person 2": "Oh no! What time did you finally go to bed?"
                },
                {
                    "Person 1": "I think it was around 3 a.m. I just couldn’t stop watching!"
                },
                {
                    "Person 2": "Wow, that’s late! You must be feeling tired today."
                },
                {
                    "Person 1": "Yeah, I definitely am. I need to get better at managing my time."
                },
                {
                    "Person 2": "I hear you! I sometimes get overwhelmed with everything I have to do."
                },
                {
                    "Person 1": "Exactly! Between work and social stuff, it can be a lot."
                },
                {
                    "Person 2": "Right? And then when you finally get a moment to relax, you just end up scrolling on your phone."
                },
                {
                    "Person 1": "Totally! I need to find a balance. Maybe I should set a limit on my screen time."
                },
                {
                    "Person 2": "That sounds like a good idea! I’ve been thinking about doing the same."
                },
                {
                    "Person 1": "Let’s hold each other accountable! Starting tomorrow?"
                },
                {
                    "Person 2": "Deal! Unless we get distracted again, of course."
                },
                {
                    "Person 1": "Haha, true! But we can do it!"
                },
                {
                    "Person 2": "Absolutely! Let’s make it happen."
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going? You look a bit stressed."
                },
                {
                    "Person 2": "Oh man, you have no idea! I've been swamped with this concert production. It's a lot of work!"
                },
                {
                    "Person 1": "I can imagine! Putting everything together must be tough. How's the orchestra handling it?"
                },
                {
                    "Person 2": "It's challenging. We need a lot of practice, but time is running out. We're trying to get everything ready by mid-May."
                },
                {
                    "Person 1": "That’s not too far away! Are you guys managing to keep up?"
                },
                {
                    "Person 2": "Sort of. Everyone's busy, and I don’t want to upset the main director by asking for more time."
                },
                {
                    "Person 1": "Yeah, that can be tricky. You don’t want to hurt anyone’s feelings."
                },
                {
                    "Person 2": "Exactly! I mean, if I just say, 'Hey, we need to speed things up,' it might come off the wrong way."
                },
                {
                    "Person 1": "For sure. It’s all about how you say it. Maybe just approach it casually?"
                },
                {
                    "Person 2": "Good idea! I’ll try to keep it light. By the way, have you had time to study for the IELTS?"
                },
                {
                    "Person 1": "A little. I took one test, but I didn’t finish the writing part. It’s tough!"
                },
                {
                    "Person 2": "I hear you! What score do you need to aim for?"
                },
                {
                    "Person 1": "I need at least a 7 out of 9. It’s a bit intimidating."
                },
                {
                    "Person 2": "You’ll get there! Just remember to pace yourself. How are you planning to prepare?"
                },
                {
                    "Person 1": "I think I’ll focus on my speaking and writing skills first. But finding time is hard with everything going on."
                },
                {
                    "Person 2": "Totally get that. Maybe set aside a little time each day? Even if it’s just an hour?"
                },
                {
                    "Person 1": "That sounds doable! I just need to stay consistent."
                },
                {
                    "Person 2": "Exactly! And if you keep it up, you’ll be ready in no time."
                },
                {
                    "Person 1": "Thanks for the encouragement! Let’s both keep pushing through our busy schedules."
                },
                {
                    "Person 2": "For sure! We got this!"
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Pretty good! Just enjoying the nice weather. How about you?"
                },
                {
                    "Person 1": "Same here! I’ve been in a great mood lately. I think it’s because I finally broke free from a relationship that wasn’t working."
                },
                {
                    "Person 2": "Oh wow, that sounds like a big change! Do you feel better now?"
                },
                {
                    "Person 1": "Definitely! It’s like a weight has been lifted off my shoulders. I feel so much happier."
                },
                {
                    "Person 2": "That’s awesome! Sometimes you just need to let go of what’s holding you back."
                },
                {
                    "Person 1": "Exactly! I went through all those emotions—sadness, anger, acceptance—and now I’m ready for a fresh start."
                },
                {
                    "Person 2": "That’s a healthy way to look at it. So, what’s next for you?"
                },
                {
                    "Person 1": "I want to focus on being more patient and calm. Maybe even meet someone new."
                },
                {
                    "Person 2": "That sounds like a good plan! Do you have any idea of what you’re looking for in a new partner?"
                },
                {
                    "Person 1": "I want someone who respects my feelings and opinions. It’s important to have equality in a relationship."
                },
                {
                    "Person 2": "For sure! Communication is key. You want someone who listens and finds a compromise."
                },
                {
                    "Person 1": "Exactly! I’ve learned that the hard way. What about you? What do you look for in a relationship?"
                },
                {
                    "Person 2": "I think I want a relationship that feels easy, like my parents have. They really listen to each other."
                },
                {
                    "Person 1": "That’s a great example! It’s nice to see a couple that works well together."
                },
                {
                    "Person 2": "Yeah, they met at a disco back in the day. It was a quick romance, but they’ve been happy ever since."
                },
                {
                    "Person 1": "That’s sweet! It’s inspiring to see that kind of love."
                },
                {
                    "Person 2": "Definitely! So, what are you going to do with your free time now?"
                },
                {
                    "Person 1": "I might check out some local events or just relax at home. How about you?"
                },
                {
                    "Person 2": "I’ve been meaning to catch a show at the theater. Maybe I’ll do that this weekend."
                },
                {
                    "Person 1": "Sounds fun! Let me know how it goes!"
                },
                {
                    "Person 2": "Will do! Let’s catch up later."
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Pretty good! Just got back from visiting my parents. You know how it is."
                },
                {
                    "Person 1": "Oh, for sure! I love going home. It’s nice to catch up with everyone."
                },
                {
                    "Person 2": "Exactly! I went to my mom's town last weekend. We had a little family gathering."
                },
                {
                    "Person 1": "That sounds fun! What did you guys do?"
                },
                {
                    "Person 2": "We just hung out, played some board games, and ate way too much food."
                },
                {
                    "Person 1": "Classic family time! I miss those big meals. My mom always makes the best lasagna."
                },
                {
                    "Person 2": "Oh, I love lasagna! My mom makes a killer one too. It’s hard to beat home-cooked meals."
                },
                {
                    "Person 1": "Totally! So, are you still thinking about what to do after graduation?"
                },
                {
                    "Person 2": "Yeah, I’m a bit lost right now. I thought about working with my ex-boyfriend, but now I’m not so sure."
                },
                {
                    "Person 1": "That’s understandable. It’s a big decision. What else are you considering?"
                },
                {
                    "Person 2": "I might want to try journalism. I’ve been doing some writing for events lately."
                },
                {
                    "Person 1": "That sounds exciting! What kind of events?"
                },
                {
                    "Person 2": "I went to an art exhibition opening last week. It was really cool!"
                },
                {
                    "Person 1": "Nice! Did you write about it?"
                },
                {
                    "Person 2": "Yeah, I did! I wrote about the artists and my impressions of the artwork."
                },
                {
                    "Person 1": "That’s awesome! Do you think AI will take over journalism someday?"
                },
                {
                    "Person 2": "I hope not! AI can’t capture the emotions and stories like a real person can."
                },
                {
                    "Person 1": "Exactly! There’s something special about human touch in writing."
                },
                {
                    "Person 2": "For sure! Anyway, I should get going. I have some stuff to finish up."
                },
                {
                    "Person 1": "Alright! Let’s catch up again soon."
                },
                {
                    "Person 2": "Definitely! Take care!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 3,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I have ever woke up.",
                    "corrected": "I have ever woken up.",
                    "explanation": "The correct past participle of 'wake' is 'woken,' not 'woke.'",
                    "context": "In our discussion about waking up early, I mentioned that I don't remember if I ever woke up early. I have never woken up later than 10 a.m. usually."
                },
                {
                    "original": "I don't remember when I woken up.",
                    "corrected": "I don't remember when I woke up.",
                    "explanation": "'Woken' is the past participle form and should be used with 'have'; 'woke' is the correct simple past form.",
                    "context": "When talking about my sleep schedule, I expressed that I don’t recall the last time I woke up early. I don't remember when I woke up last time."
                },
                {
                    "original": "Has I ever woke up?",
                    "corrected": "Have I ever woken up?",
                    "explanation": "The subject 'I' requires 'have' instead of 'has,' and 'woken' is the correct past participle.",
                    "context": "We were discussing instances of waking up early. I asked if I have ever woken up at an unusual hour."
                },
                {
                    "original": "I shouldn't use their present perfect with some experience.",
                    "corrected": "I shouldn't use the present perfect with some experiences.",
                    "explanation": "The correct form is 'the present perfect' and 'some experiences' to clearly indicate countable nouns.",
                    "context": "In our grammar discussion, I recognized that I shouldn't use their present perfect tense incorrectly. I shouldn't use the present perfect with some experiences."
                },
                {
                    "original": "When I started doing that, I realized that there is not a lot of it's it's less about logic and more about just a specific.",
                    "corrected": "When I started doing that, I realized that it’s less about logic and more about specifics.",
                    "explanation": "The phrase 'it’s less about logic and more about just a specific' is awkward; it should use 'specifics' and 'it’s.'",
                    "context": "I shared my experience with studying English grammar. When I started doing that, I realized it’s less about logic and more about specifics."
                },
                {
                    "original": "You had problems with using the word being like despite being a good choice, they still did.",
                    "corrected": "You had problems with using the phrase 'despite being,' as in 'despite being a good choice, they still did.'",
                    "explanation": "The phrase should be clearly quoted, and the explanation needs to connect better to the sentence structure.",
                    "context": "During our conversation about language usage, I noted that you had problems with using the phrase 'despite being.' Despite being a good choice, they still did."
                },
                {
                    "original": "I change it and example I also changed a little bit.",
                    "corrected": "I changed it, and I also changed an example a little bit.",
                    "explanation": "Use the past tense 'changed' for consistency; also, include 'I' before 'also' for clarity.",
                    "context": "When discussing the revisions I made, I said that I changed the content and I also changed an example a little bit."
                },
                {
                    "original": "Can you still say it.",
                    "corrected": "Can you still say that?",
                    "explanation": "End the sentence with a question mark for proper punctuation and change 'it' to 'that' for better clarity in context.",
                    "context": "Asking for clarification about something we just discussed, I inquired if you could still say that."
                },
                {
                    "original": "It's a strange things.",
                    "corrected": "It's a strange thing.",
                    "explanation": "The sentence is referring to a singular noun, so 'things' should be changed to 'thing.'",
                    "context": "In response to something unusual happening, I commented that it's a strange thing."
                },
                {
                    "original": "Did you get a hang of it?",
                    "corrected": "Did you get the hang of it?",
                    "explanation": "The correct phrase is 'get the hang of,' using 'the' to indicate a specific understanding.",
                    "context": "I wanted to know if you understood the topic we discussed earlier. Did you get the hang of it?"
                },
                {
                    "original": "I saved our variance under a state.",
                    "corrected": "I saved our version under a file.",
                    "explanation": "The correct term should be 'version' not 'variance,' and 'file' is clearer than 'state' in this context.",
                    "context": "When talking about document organization, I mentioned that I saved our version under a file for easier access."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "there are much much fewer mistakes.",
                    "corrected": "there are many fewer mistakes.",
                    "explanation": "\"Much much\" is not standard; \"many\" should be used here for countable nouns.",
                    "context": "I was reviewing your work, and what I like is that you used a quite simple vocabulary. I noticed that there are many fewer mistakes than I expected."
                },
                {
                    "original": "you go or you're explaining why better mental health and why better physical health.",
                    "corrected": "you explain why there is better mental health and why there is better physical health.",
                    "explanation": "The verb form needs to match the tense; it should be 'explain' instead of 'go or you're explaining.'",
                    "context": "In your explanation, you explain why there is better mental health and why there is better physical health due to physical activity and less pollution."
                },
                {
                    "original": "the last piece of this logical chain is better. Mental and physical health.",
                    "corrected": "the last piece of this logical chain is better mental and physical health.",
                    "explanation": "There should not be a period separating the two parts; they should be combined into a single coherent statement.",
                    "context": "You mentioned that the last piece of this logical chain is better mental and physical health, which connects back to people living in the countryside."
                },
                {
                    "original": "why in the countryside we move more than in the city?",
                    "corrected": "why do we move more in the countryside than in the city?",
                    "explanation": "The question structure is incorrect; it should be 'do we move more' instead of 'we move more.'",
                    "context": "We need to consider why do we move more in the countryside than in the city, given the lifestyle differences."
                },
                {
                    "original": "a lot of simple work outside.",
                    "corrected": "a lot of simple outdoor work.",
                    "explanation": "'Outside' as an adverb does not fit; 'outdoor' is the correct adjective to describe work done outside.",
                    "context": "In the countryside, people have a lot of simple outdoor work that keeps them moving and active."
                },
                {
                    "original": "that does not sound very convincing.",
                    "corrected": "that sounds unconvincing.",
                    "explanation": "Using 'does not sound very convincing' is wordy; 'sounds unconvincing' is more concise and direct.",
                    "context": "When you claim that people dream about moving to the countryside, it sounds unconvincing as it lacks factual support."
                },
                {
                    "original": "random statistic.",
                    "corrected": "we need a random statistic.",
                    "explanation": "The noun phrase lacks a subject; it should be a complete thought, such as 'we need.'",
                    "context": "We might include a random statistic to provide solid evidence for our argument about rural living."
                },
                {
                    "original": "here we need to turn on the imagination.",
                    "corrected": "here we need to use our imagination.",
                    "explanation": "'Turn on' is informal and less appropriate; 'use' is more conventional in this context.",
                    "context": "To find examples, here we need to use our imagination to think creatively about farmers' lifestyles."
                },
                {
                    "original": "here we can find proof.",
                    "corrected": "Here we can find evidence.",
                    "explanation": "'Proof' and 'evidence' can be synonymous, but 'evidence' is more commonly used in academic contexts.",
                    "context": "For every argument we make, here we can find evidence to back up our claims about rural living."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "There are the higher numbers of people.",
                    "corrected": "There are higher numbers of people.",
                    "explanation": "The article 'the' is unnecessary here; 'higher numbers' should be used without it.",
                    "context": "I want to emphasize the population statistics in our discussion. There are higher numbers of people in urban areas. This detail is important for our example."
                },
                {
                    "original": "The largest number of people are older.",
                    "corrected": "The largest number of people is older.",
                    "explanation": "'Number' is a singular noun, so it requires the singular verb 'is.'",
                    "context": "In demographic studies, we often analyze age groups. The largest number of people is older. This reflects the aging population trend."
                },
                {
                    "original": "But number is for countable nouns. Amount for uncountable nouns.",
                    "corrected": "But 'number' is for countable nouns, and 'amount' is for uncountable nouns.",
                    "explanation": "This sentence lacks conjunctions and necessary articles; it should be clearer and grammatically accurate.",
                    "context": "During our grammar review, I explained the different nouns. But 'number' is for countable nouns, and 'amount' is for uncountable nouns. This distinction is crucial for proper usage."
                },
                {
                    "original": "Like it's less about age and more about age and wisdom.",
                    "corrected": "It's less about age and more about wisdom.",
                    "explanation": "The phrase is repetitive; it should focus on the distinction more clearly.",
                    "context": "When discussing cultural values, I wanted to highlight respect. It's less about age and more about wisdom. This aspect is often overlooked in other cultures."
                },
                {
                    "original": "All the moments that should be there.",
                    "corrected": "All the elements that should be there.",
                    "explanation": "'Moments' is incorrect in this context; 'elements' better fits the idea of components in writing.",
                    "context": "After reviewing the structure of the essay, I commented on how it came together. All the elements that should be there are present. This makes it more cohesive."
                },
                {
                    "original": "Do I need to rephrase the reason again?",
                    "corrected": "Do I need to rephrase the reason?",
                    "explanation": "The word 'again' is unnecessary as it's implied in the question.",
                    "context": "I was uncertain about the clarity of my reasoning in the essay. Do I need to rephrase the reason? I want it to be understandable."
                },
                {
                    "original": "How is the infrastructure related to the fact that in the city you can do flower business?",
                    "corrected": "How is the infrastructure related to the fact that you can run a flower business in the city?",
                    "explanation": "The phrasing is awkward; 'run a flower business' is a more idiomatic expression.",
                    "context": "In discussing the flower industry, I questioned the relevance of infrastructure. How is the infrastructure related to the fact that you can run a flower business in the city? It’s an important factor to consider."
                },
                {
                    "original": "This is also such a moment that we are not going from the fact that in the city you can do what you can't do in the village.",
                    "corrected": "This highlights that we aren't just saying what you can do in the city that you can't do in the village.",
                    "explanation": "The phrase is overly complicated and needs clarification.",
                    "context": "During our analysis, I pointed out an important distinction. This highlights that we aren't just saying what you can do in the city that you can't do in the village. It's about opportunities, too."
                },
                {
                    "original": "But mistakes. More mistakes in the second sentence.",
                    "corrected": "However, there are more mistakes in the second sentence.",
                    "explanation": "The original phrase lacks clarity and completeness; it should form a complete thought.",
                    "context": "When reviewing the essay's errors, I noted some issues. However, there are more mistakes in the second sentence. It's essential to address these."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Convenient",
                    "definition": "Fitting in well with a person's needs, activities, and plans.",
                    "context": {
                        "Context 1": "Using your phone to call while working on your tablet is more convenient.",
                        "Context 2": "The new store is located right by my house, making shopping very convenient.",
                        "Context 3": "It is convenient to have a coffee maker in the office to keep everyone awake."
                    }
                },
                {
                    "word": "Renovate",
                    "definition": "To restore to a good state of repair.",
                    "context": {
                        "Context 1": "They plan to renovate the old hotel to attract more guests.",
                        "Context 2": "She wants to renovate her garden into a peaceful retreat.",
                        "Context 3": "Some cities renovate their streets to improve public transport access."
                    }
                },
                {
                    "word": "Sewing",
                    "definition": "The act of using a needle and thread to make or repair clothes.",
                    "context": {
                        "Context 1": "She sews costumes for children's shows.",
                        "Context 2": "My grandmother loves sewing, and she creates beautiful quilts.",
                        "Context 3": "Sewing is not just a hobby; it's an essential skill for many professions."
                    }
                },
                {
                    "word": "Dedicate",
                    "definition": "To allocate time, effort, or resources for a specific purpose.",
                    "context": {
                        "Context 1": "He decided to dedicate his weekends to learning new skills.",
                        "Context 2": "The artist will dedicate her latest painting to her late grandmother.",
                        "Context 3": "Many students dedicate hours to studying for exams and achieving high grades."
                    }
                },
                {
                    "word": "Quirk",
                    "definition": "A peculiar behavioral habit or trait.",
                    "context": {
                        "Context 1": "Her quirk of speaking in accents is entertaining to her friends.",
                        "Context 2": "Each cat has its own quirks, like a specific way of sleeping or playing.",
                        "Context 3": "His quirk of collecting unusual bookmarks makes him unique."
                    }
                },
                {
                    "word": "Perspective",
                    "definition": "A particular attitude or way of regarding something; a point of view.",
                    "context": {
                        "Context 1": "Gaining a new perspective can help solve a tricky problem.",
                        "Context 2": "Her travel experiences changed her perspective on life.",
                        "Context 3": "In debates, it's essential to consider multiple perspectives."
                    }
                },
                {
                    "word": "Intuitive",
                    "definition": "Using or based on what one feels to be true without conscious reasoning.",
                    "context": {
                        "Context 1": "She found the new software very intuitive and easy to navigate.",
                        "Context 2": "Dogs have an intuitive sense of human emotions.",
                        "Context 3": "His intuitive understanding of art helps him create stunning pieces."
                    }
                },
                {
                    "word": "Miscalculate",
                    "definition": "To make a mistake in figuring out or estimating something.",
                    "context": {
                        "Context 1": "He miscalculated the time it would take to finish the project.",
                        "Context 2": "The banker miscalculated the interest on my loan.",
                        "Context 3": "She miscalculated the number of guests for her party and ran out of food."
                    }
                },
                {
                    "word": "Thorough",
                    "definition": "Carried out completely and in great detail.",
                    "context": {
                        "Context 1": "The report was thorough and covered all necessary details.",
                        "Context 2": "She took a thorough approach to her studies, ensuring she understood everything.",
                        "Context 3": "The thorough cleaning left the house sparkling and fresh."
                    }
                },
                {
                    "word": "Adept",
                    "definition": "Proficient or skilled at doing something.",
                    "context": {
                        "Context 1": "He is adept at solving complex mathematical problems.",
                        "Context 2": "She is adept in several languages, making her a great translator.",
                        "Context 3": "Being adept at negotiation helped him land the best deals."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Quirk",
                    "fact": "Did you know that in some cultures, it’s considered a quirk to eat food with your hands, while in others it's perfectly normal?"
                },
                {
                    "word": "Sewing",
                    "fact": "The world record for sewing is held by a woman who sews 160 pieces of clothing in one day!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the sewing machine break up?",
                    "answer": "Because it found someone more ‘sew’ compatible!"
                },
                {
                    "question": "Why did the computer get cold?",
                    "answer": "Because it left its Windows open!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Pollution",
                    "definition": "The presence or introduction of harmful substances into the environment.",
                    "context": {
                        "Context 1": "Living in the countryside generally means there is less pollution from factories.",
                        "Context 2": "The pollution in the city made it difficult to see the stars at night.",
                        "Context 3": "Swimming in polluted waters can lead to serious health issues."
                    }
                },
                {
                    "word": "Countryside",
                    "definition": "Land that is outside of cities and towns, often characterized by farms and open spaces.",
                    "context": {
                        "Context 1": "People often move to the countryside for a quieter life.",
                        "Context 2": "The countryside is full of scenic views and fresh air.",
                        "Context 3": "In the countryside, you can find many small, family-run businesses."
                    }
                },
                {
                    "word": "Stress",
                    "definition": "A state of mental or emotional strain resulting from challenging or adverse situations.",
                    "context": {
                        "Context 1": "People in the countryside often experience less stress due to a slower pace of life.",
                        "Context 2": "Chronic stress can lead to various health problems, including anxiety and depression.",
                        "Context 3": "He finds gardening to be a great way to relieve stress after a long day."
                    }
                },
                {
                    "word": "Logical Chain",
                    "definition": "A sequence of statements or reasons that connect ideas to lead to a conclusion.",
                    "context": {
                        "Context 1": "We need to ensure our arguments follow a clear logical chain.",
                        "Context 2": "The detective followed a logical chain to solve the mystery.",
                        "Context 3": "His explanation lacked a logical chain, making it hard to understand."
                    }
                },
                {
                    "word": "Physical Activity",
                    "definition": "Any bodily movement that enhances or maintains physical fitness and overall health.",
                    "context": {
                        "Context 1": "Regular physical activity is essential for maintaining good health.",
                        "Context 2": "Many people enjoy physical activity such as hiking or biking in nature.",
                        "Context 3": "He realized that his daily workouts provided more than just physical activity; they also lifted his mood."
                    }
                },
                {
                    "word": "Manufacturers",
                    "definition": "Companies or individuals that produce goods or products, typically on a large scale.",
                    "context": {
                        "Context 1": "In the countryside, there are often fewer manufacturers compared to urban areas.",
                        "Context 2": "The manufacturers of electronic devices must adhere to strict safety standards.",
                        "Context 3": "Many manufacturers have started using sustainable practices to reduce their environmental impact."
                    }
                },
                {
                    "word": "Rural",
                    "definition": "Relating to, or characteristic of the countryside rather than the town.",
                    "context": {
                        "Context 1": "Rural communities often prioritize agriculture and natural lifestyles.",
                        "Context 2": "Many people seek a rural lifestyle for its peace and tranquility.",
                        "Context 3": "Rural areas may lack access to high-speed internet and other urban amenities."
                    }
                },
                {
                    "word": "Residents",
                    "definition": "People who live in a particular place.",
                    "context": {
                        "Context 1": "Countryside residents often enjoy a close-knit community.",
                        "Context 2": "The city residents protested for better public transport options.",
                        "Context 3": "Residents of the apartment building organized a block party to get to know each other."
                    }
                },
                {
                    "word": "Tending",
                    "definition": "To take care of or maintain something; often used in the context of gardens or plants.",
                    "context": {
                        "Context 1": "Tending to the garden helps people appreciate nature and reduce stress.",
                        "Context 2": "He enjoys tending to his aquarium every weekend.",
                        "Context 3": "Tending the fire is crucial for camping, especially on cold nights."
                    }
                },
                {
                    "word": "Examples",
                    "definition": "Specific instances that illustrate a broader idea or concept.",
                    "context": {
                        "Context 1": "In the essay, we need more examples to support our arguments.",
                        "Context 2": "Her artwork included several examples of modern abstract styles.",
                        "Context 3": "The teacher asked for examples of the students' favorite books to share."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Countryside",
                    "fact": "In Italy, there are more than 1,000 different varieties of grapes, each thriving in different countryside regions!"
                },
                {
                    "word": "Pollution",
                    "fact": "Did you know that one day of driving a car can create as much pollution as running a coal-powered factory for a week?"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the farmer win an award?",
                    "answer": "Because he was outstanding in his field!"
                },
                {
                    "question": "What do you call a cow with no legs?",
                    "answer": "Ground beef!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Complicated",
                    "definition": "Consisting of many interconnected parts; difficult to understand.",
                    "context": {
                        "Context 1": "The instructions for the project were too complicated to follow easily.",
                        "Context 2": "The math problem became even more complicated after adding additional variables.",
                        "Context 3": "Her recipe for sushi was more complicated than I had anticipated."
                    }
                },
                {
                    "word": "Elderly",
                    "definition": "A term used to describe older people, often referring to those over a certain age, typically 65 and above.",
                    "context": {
                        "Context 1": "In Japan, the elderly are respected for their wisdom and experiences.",
                        "Context 2": "The elderly often receive special discounts at local restaurants.",
                        "Context 3": "The elderly man adopted a puppy to keep him company."
                    }
                },
                {
                    "word": "Infrastructure",
                    "definition": "The basic physical and organizational structures needed for the operation of a society or enterprise.",
                    "context": {
                        "Context 1": "A strong infrastructure is essential for the development of any city.",
                        "Context 2": "Without good infrastructure, public transportation systems can fail.",
                        "Context 3": "The infrastructure of a good fantasy novel includes a detailed map."
                    }
                },
                {
                    "word": "Organic",
                    "definition": "Relating to or derived from living matter, often associated with farming methods that avoid synthetic fertilizers and pesticides.",
                    "context": {
                        "Context 1": "She prefers to buy organic foods to support healthy living.",
                        "Context 2": "The organic chemistry class focused on the structure of carbon compounds.",
                        "Context 3": "His organic gardening methods brought an abundance of vegetables."
                    }
                },
                {
                    "word": "Physical activities",
                    "definition": "Any bodily movement that requires energy expenditure.",
                    "context": {
                        "Context 1": "Regular physical activities like walking and jogging help maintain health.",
                        "Context 2": "The school implemented physical activities to encourage students to stay active.",
                        "Context 3": "He engaged in physical activities like juggling to impress his friends."
                    }
                },
                {
                    "word": "Floral",
                    "definition": "Relating to flowers.",
                    "context": {
                        "Context 1": "The florist specializes in creating beautiful floral arrangements for weddings.",
                        "Context 2": "She painted a floral design on her bedroom wall.",
                        "Context 3": "The floral scent in the garden attracted many bees."
                    }
                },
                {
                    "word": "Countable",
                    "definition": "Able to be counted; having a numerical value.",
                    "context": {
                        "Context 1": "In grammar, 'apples' is a countable noun, while 'water' is not.",
                        "Context 2": "In programming, the countable elements of an array can be output easily.",
                        "Context 3": "Countable objects like coins should be kept in a jar."
                    }
                },
                {
                    "word": "Template",
                    "definition": "A preset format that serves as a guideline for creating documents.",
                    "context": {
                        "Context 1": "She used a template to organize her essay more effectively.",
                        "Context 2": "The artist followed a template to reproduce the famous painting.",
                        "Context 3": "The cake recipe called for a template to ensure even layers."
                    }
                },
                {
                    "word": "Self-realization",
                    "definition": "The fulfillment of one's own potential and the development of one's abilities.",
                    "context": {
                        "Context 1": "Many consider self-realization the ultimate goal of personal growth.",
                        "Context 2": "His journey of self-realization took him around the world.",
                        "Context 3": "Self-realization can sometimes mean finding the perfect sandwich recipe."
                    }
                },
                {
                    "word": "Wisdom",
                    "definition": "The quality of having experience, knowledge, and good judgment.",
                    "context": {
                        "Context 1": "The elderly are often regarded as a source of wisdom in their communities.",
                        "Context 2": "His wisdom about investing helped friends avoid financial traps.",
                        "Context 3": "The wise owl in the story shared his wisdom with the lost travelers."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Elderly",
                    "fact": "In many cultures, it's common for the elderly to be seen as the guardians of traditions and stories, but they also sometimes sneak in a bit of mischief!"
                },
                {
                    "word": "Organic",
                    "fact": "Did you know that organic farming can be so funny? They actually have a special 'Organic Farming Day' where farmers wear straw hats and tell corn jokes!"
                },
                {
                    "word": "Wisdom",
                    "fact": "The word 'wisdom' comes from Old English 'wisdom,' where the wise were often respected for their ability to find their glasses that were on their heads!"
                }
            ],
            "jokes": [
                {
                    "question": "Why do elderly people make great comedians?",
                    "answer": "Because their material has been aging like fine wine!"
                },
                {
                    "question": "Why was the math book always worried?",
                    "answer": "Because it had too many problems!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you get that new app for organizing your schedule?"
                },
                {
                    "Person 2": "Yeah, I just downloaded it. It looks pretty cool so far."
                },
                {
                    "Person 1": "Nice! I love that you can sync it across your devices."
                },
                {
                    "Person 2": "Right? I can't keep track of anything without my phone or tablet these days."
                },
                {
                    "Person 1": "Same here! Do you use it for work or just personal stuff?"
                },
                {
                    "Person 2": "A bit of both! I need it for work meetings, but it’s great for remembering my friend's birthdays too."
                },
                {
                    "Person 1": "That’s smart! I always forget those unless I write them down."
                },
                {
                    "Person 2": "Yeah, I know how it is. So, have you been keeping busy?"
                },
                {
                    "Person 1": "Totally! My weekends are packed lately. How about you?"
                },
                {
                    "Person 2": "I’ve been trying to catch up on some shows. I feel like I’m always behind!"
                },
                {
                    "Person 1": "Same here! What are you watching right now?"
                },
                {
                    "Person 2": "I just started that new crime series. It’s really intense!"
                },
                {
                    "Person 1": "Ooh, I’ve heard good things about that! I need to check it out."
                },
                {
                    "Person 2": "Definitely do! We should have a watch party sometime."
                },
                {
                    "Person 1": "That sounds like a fun idea! Let’s plan for next weekend?"
                },
                {
                    "Person 2": "Perfect! I’ll bring the popcorn."
                },
                {
                    "Person 1": "And I’ll bring some drinks. Can’t wait!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever thought about how living in the city feels so chaotic sometimes?"
                },
                {
                    "Person 2": "Definitely! I mean, there are all these people and cars everywhere. It’s like a never-ending rush hour."
                },
                {
                    "Person 1": "Exactly! I read somewhere that people living in the countryside experience a lot less stress."
                },
                {
                    "Person 2": "Really? That makes sense. Life seems to move at a slower pace out there."
                },
                {
                    "Person 1": "Right? Plus, they have better air quality too. Less pollution, so that must help."
                },
                {
                    "Person 2": "Yeah, and I bet they have more opportunities for exercise. Gardening, walking around, you name it!"
                },
                {
                    "Person 1": "Totally! I feel like in the city, we can get so lazy sitting in traffic or at our desks."
                },
                {
                    "Person 2": "For sure. I love being outdoors, but sometimes it's hard to find the time between work and everything else."
                },
                {
                    "Person 1": "What do you think? Would you ever move to the countryside?"
                },
                {
                    "Person 2": "Honestly, I’ve thought about it! Just to escape the noise and enjoy nature more."
                },
                {
                    "Person 1": "Same here! Plus, I’ve heard that rural residents tend to have a stronger sense of community."
                },
                {
                    "Person 2": "That’s true! It sounds nice to know your neighbors and have that kind of support."
                },
                {
                    "Person 1": "Yeah, I think that social aspect contributes to better mental health too."
                },
                {
                    "Person 2": "Absolutely! A friendly chat with a neighbor can really lift your spirits."
                },
                {
                    "Person 1": "So, what’s stopping us? Let’s plan a weekend getaway to a small town!"
                },
                {
                    "Person 2": "That’s a great idea! We can see if country living is really for us."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you catch that game last night?"
                },
                {
                    "Person 2": "Yeah! It was intense! I can't believe they came back in the fourth quarter."
                },
                {
                    "Person 1": "I know, right? I thought they were done for. I was about to turn it off!"
                },
                {
                    "Person 2": "Same here! Then suddenly, boom! They started scoring like crazy."
                },
                {
                    "Person 1": "I've got to hand it to the coach. His strategy really worked."
                },
                {
                    "Person 2": "For sure. You can tell he really knows how to motivate the team."
                },
                {
                    "Person 1": "What do you think about the MVP? Do you think he deserved it?"
                },
                {
                    "Person 2": "Absolutely! He was everywhere on the field. Made some incredible plays."
                },
                {
                    "Person 1": "Totally agreed. I love watching players who give it their all."
                },
                {
                    "Person 2": "Right? It makes the game so much more exciting. Are you gonna watch the next game?"
                },
                {
                    "Person 1": "Of course! We should get together and watch it!"
                },
                {
                    "Person 2": "Sounds like a plan! Snacks and drinks are on me!"
                },
                {
                    "Person 1": "Awesome! I’ll bring some chips then. Can't wait!"
                },
                {
                    "Person 2": "Me neither! It’ll be a blast!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
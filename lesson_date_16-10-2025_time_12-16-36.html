<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I think it was like plus 35 or something.",
                    "corrected": "I think it was about 35 degrees or something.",
                    "explanation": "Using 'plus' before the temperature is awkward in English; 'about' is more suitable.",
                    "context": "The weather during the trip was quite hot. I think it was about 35 degrees or something. This level of heat can be uncomfortable for many people."
                },
                {
                    "original": "There were local rich local before.",
                    "corrected": "There were rich locals there.",
                    "explanation": "Repetition of 'local' is unnecessary; 'rich locals' is the correct form.",
                    "context": "The hotel experience was interesting. There were rich locals there. Their presence added a unique vibe to the stay."
                },
                {
                    "original": "This is, this was some kind of island chain.",
                    "corrected": "This was some kind of island chain.",
                    "explanation": "The use of 'is' in past context is incorrect; 'was' is needed for past tense.",
                    "context": "The location of the hotel piqued my interest. This was some kind of island chain. It had its own charm and beauty."
                },
                {
                    "original": "Did they give, uh, giveaway free food?",
                    "corrected": "Did they give away free food?",
                    "explanation": "The phrase 'giveaway free food' is incorrect; 'give away' is the appropriate verb form.",
                    "context": "At the wedding, there was an expectation of hospitality. Did they give away free food? I wasn't sure what to expect."
                },
                {
                    "original": "Everyone on this wedding want to, wanted to like talk to you.",
                    "corrected": "Everyone at this wedding wanted to talk to you.",
                    "explanation": "Using 'on' instead of 'at' is incorrect; also, 'want' should be 'wanted' for past tense.",
                    "context": "The attention I received was overwhelming. Everyone at this wedding wanted to talk to me. It felt special to be so welcomed."
                },
                {
                    "original": "No, we met their friends. Venezuela.",
                    "corrected": "No, we met their friends from Venezuela.",
                    "explanation": "The sentence is incomplete without proper context; 'from Venezuela' clarifies where the friends are from.",
                    "context": "The social experience was enjoyable. No, we met their friends from Venezuela. They made the wedding more lively and fun."
                },
                {
                    "original": "Husband and wife to me.",
                    "corrected": "Husband and wife introduced themselves to me.",
                    "explanation": "The sentence is incomplete and vague; adding 'introduced themselves' clarifies the action.",
                    "context": "Social interactions can be memorable. Husband and wife introduced themselves to me. It was nice to finally meet them."
                },
                {
                    "original": "The concept of Russian wedding sounds more crazier to me.",
                    "corrected": "The concept of a Russian wedding sounds crazier to me.",
                    "explanation": "'More crazier' is incorrect; 'crazier' is the comparative form without 'more.'",
                    "context": "Cultural differences in weddings are intriguing. The concept of a Russian wedding sounds crazier to me. They often include wild celebrations."
                },
                {
                    "original": "How did you entertain as a tourist?",
                    "corrected": "How did you entertain yourself as a tourist?",
                    "explanation": "The sentence lacks a subject; 'yourself' clarifies who is being entertained.",
                    "context": "As I reflected on my activities, I realized I had to keep busy. How did you entertain yourself as a tourist? It's important to have fun."
                },
                {
                    "original": "We have, we had an excursion.",
                    "corrected": "We had an excursion.",
                    "explanation": "Using both 'have' and 'had' is redundant; only the past form 'had' is necessary.",
                    "context": "The trip included various activities. We had an excursion. It was a nice way to explore the area."
                },
                {
                    "original": "There, it’s like trees in the water with long corny.",
                    "corrected": "It's like trees in the water with long roots.",
                    "explanation": "'Corny' is not the right term; 'roots' is the proper noun for what supports trees.",
                    "context": "Learning about the local flora was fascinating. It's like trees in the water with long roots. They play a crucial role in the ecosystem."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "there was no space for my feet.",
                    "corrected": "there wasn't enough space for my feet.",
                    "explanation": "The phrase 'there was no space' is too absolute; 'there wasn't enough space' more accurately describes the lack of adequate room.",
                    "context": "It was uncomfortable on the plane. I couldn't stretch my legs at all. There wasn't enough space for my feet."
                },
                {
                    "original": "It's not so expensive.",
                    "corrected": "It's not very expensive.",
                    "explanation": "'So expensive' can imply the speaker is emphasizing cost in a misleading way; 'very expensive' correctly describes the relative cost.",
                    "context": "Venezuela is generally regarded as a poor country. It's not very expensive to travel there compared to the Maldives."
                },
                {
                    "original": "a lot of layoffs.",
                    "corrected": "a lot of layovers.",
                    "explanation": "'Layoffs' refers to job dismissals, while 'layovers' refers to stops between flights, which is the intended meaning here.",
                    "context": "I prefer flying directly to my destination over multiple stops. I think a direct flight is better than a lot of layovers."
                },
                {
                    "original": "like locals?",
                    "corrected": "like locals.",
                    "explanation": "The question mark is unnecessary because the phrase is a statement rather than a question.",
                    "context": "I encountered different types of tourists during my trip. I wondered if they were like locals."
                },
                {
                    "original": "Was it, were there many sharks there?",
                    "corrected": "Were there many sharks there?",
                    "explanation": "Starting with 'Was it' is awkward and doesn't align with the subject; simplifying to 'Were there' directly addresses the situation.",
                    "context": "I was curious about the marine life during my beach visit. Were there many sharks there?"
                },
                {
                    "original": "You know, there is no way, if you went to Turkey, there is no way you would avoid these activities.",
                    "corrected": "You know, if you went to Turkey, there is no way you would avoid these activities.",
                    "explanation": "The first part of the sentence is redundant; removing 'there is no way' makes it more concise and maintains clarity.",
                    "context": "I’ve been to Turkey several times. If you went to Turkey, there is no way you would avoid these activities."
                },
                {
                    "original": "there is some kind of tension going between America and Venezuela.",
                    "corrected": "there is some kind of tension between America and Venezuela.",
                    "explanation": "The word 'going' is unnecessary; simply using 'between' directly conveys the location of the tension.",
                    "context": "I’ve read about the political issues in the region. I believe there is some kind of tension between America and Venezuela."
                },
                {
                    "original": "I want to go to Mars.",
                    "corrected": "I want to go to Mars.",
                    "explanation": "The correction here is to show that the student's sentence was actually already correct.",
                    "context": "Traveling to new places fascinates me. I want to go to Mars, although it might be a bit unrealistic."
                },
                {
                    "original": "He’s been talking here and there about Mars for ages, for decades.",
                    "corrected": "He’s been talking about Mars here and there for ages, for decades.",
                    "explanation": "The original phrasing disrupts the natural flow; placing 'here and there' after 'talking about Mars' is more idiomatic.",
                    "context": "I’ve followed various news stories. He’s been talking about Mars here and there for ages, for decades."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "Why the hell do you need a colony on Mars?",
                    "corrected": "Why the hell would you need a colony on Mars?",
                    "explanation": "The modal verb 'would' is needed here to express hypothetical situations or reasonings.",
                    "context": "I just don’t get the urgency of going to Mars. Why the hell would you want a colony on Mars? It’s just so uninviting."
                },
                {
                    "original": "Because there is too much of them.",
                    "corrected": "Because there are too many of them.",
                    "explanation": "'Too much' is used with uncountable nouns, while 'too many' is for countable nouns.",
                    "context": "I think people don't care as much about the environment in places like that. Because there are too many of them, they have other priorities."
                },
                {
                    "original": "I only have a rainy nose.",
                    "corrected": "I only have a runny nose.",
                    "explanation": "'Rainy' is incorrect; the term 'runny nose' is the correct expression for a nose that is producing mucus.",
                    "context": "I’m not feeling great today. No, I don’t have a temperature. I only have a runny nose, which is annoying."
                },
                {
                    "original": "If I had to go to university, I would cancel it.",
                    "corrected": "If I had to go to university, I would skip it.",
                    "explanation": "While 'cancel' can be used, 'skip' is idiomatic when referring to not attending a class or event.",
                    "context": "I’m really not up for it today. If I had to go to university, I would skip it. Today just doesn't feel right."
                },
                {
                    "original": "You want to spread some tropical thickness to them?",
                    "corrected": "You want to spread some tropical vibes to them?",
                    "explanation": "'Thickness' is awkward and doesn't convey the intended positive, light-hearted feeling; 'vibes' is more suitable.",
                    "context": "I brought back some gifts for my friends. You want to spread some tropical vibes to them? That could be fun!"
                },
                {
                    "original": "I think my mom also have a jet lag.",
                    "corrected": "I think my mom also has jet lag.",
                    "explanation": "'Have' should be 'has' because 'mom' is singular third-person.",
                    "context": "I don't know how to deal with this feeling. I think my mom also has jet lag. We’re both struggling to adjust."
                },
                {
                    "original": "You're too conscious, you know, you're too smart.",
                    "corrected": "You're too self-aware, you know, you're too smart.",
                    "explanation": "'Conscious' is incorrect in this context; 'self-aware' is a better match for awareness of one's thoughts and feelings.",
                    "context": "You seem to have such a thoughtful approach to things. You're too self-aware, you know, you're too smart for your age."
                },
                {
                    "original": "I used to enhance myself with alcohol.",
                    "corrected": "I used to rely on alcohol.",
                    "explanation": "'Enhance' does not convey the meaning intended; 'rely on' better reflects dependence.",
                    "context": "In the past, I struggled with social interactions. I used to rely on alcohol to help me loosen up and connect."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "I'm advising everybody against.",
                    "corrected": "I'm advising everybody against drinking alcohol.",
                    "explanation": "The phrase is incomplete; it lacks the object that specifies what the advice is against.",
                    "context": "I was joking about drinking alcohol. I'm advising everybody against drinking alcohol. It's important to be mindful of such habits."
                },
                {
                    "original": "What is milder? Means less severe, contains less alcohol.",
                    "corrected": "What is milder? It means less severe and contains less tobacco.",
                    "explanation": "The term 'milder' should be accompanied by 'it' to form a complete sentence. Additionally, it should refer to 'tobacco' instead of 'alcohol' in this context.",
                    "context": "We were discussing the differences between smoking and drinking. What is milder? It means less severe and contains less tobacco. This is important when comparing hookah to cigarettes."
                },
                {
                    "original": "After it, your head is spinning.",
                    "corrected": "After that, your head is spinning.",
                    "explanation": "'After it' is colloquial and less idiomatic; 'after that' is more standard English.",
                    "context": "I was telling you about the effects of smoking hookah. After that, your head is spinning, and you might feel nauseous."
                },
                {
                    "original": "I will finish those three essay over the weekend?",
                    "corrected": "Can I finish those three essays over the weekend?",
                    "explanation": "The original sentence incorrectly asserts instead of asking; it should be in the interrogative form. Additionally, 'essay' should be plural: 'essays'.",
                    "context": "I wanted to ensure I can complete my assignments. Can I finish those three essays over the weekend? I hope to discuss them with you on Monday."
                },
                {
                    "original": "So, so, so, so, so, so, I believe that is that was great seeing you.",
                    "corrected": "So, I believe that was great seeing you.",
                    "explanation": "The repetition of 'so' is unnecessary and makes the sentence awkward. The correct tense is 'was' to match the context.",
                    "context": "As the lesson came to an end, I reflected on our time together. So, I believe that was great seeing you. I enjoy these discussions."
                },
                {
                    "original": "I wish this bills to start working.",
                    "corrected": "I wish these pills would start working.",
                    "explanation": "'This bills' is grammatically incorrect; 'these pills' is the correct plural form. 'Would' should be used to express a wish.",
                    "context": "I was discussing my hopes for feeling better soon. I wish these pills would start working. They should help relieve my symptoms."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Under the Weather",
                    "definition": "Feeling ill or unwell.",
                    "context": {
                        "Context 1": "I'm feeling a little under the weather today, so I might skip the class.",
                        "Context 2": "She was under the weather after eating too much candy on Halloween.",
                        "Context 3": "My dog seemed under the weather after playing in the rain."
                    }
                },
                {
                    "word": "Elite",
                    "definition": "A select group that is superior in terms of ability or qualities to the rest of a group.",
                    "context": {
                        "Context 1": "The hotel where we stayed felt very elite due to its luxurious amenities.",
                        "Context 2": "The elite athletes competed fiercely for the Olympic gold medal.",
                        "Context 3": "He joined an elite book club that only invites bestselling authors."
                    }
                },
                {
                    "word": "Jet Lag",
                    "definition": "A condition characterized by fatigue and other symptoms due to traveling across time zones.",
                    "context": {
                        "Context 1": "I think I have jet lag after my long flight to the new time zone.",
                        "Context 2": "After the road trip, he felt a bit of jet lag from driving all night.",
                        "Context 3": "She blamed her jet lag for forgetting her best friend's birthday."
                    }
                },
                {
                    "word": "Amuse",
                    "definition": "To entertain or make someone laugh.",
                    "context": {
                        "Context 1": "The performances at the wedding amused everyone in attendance.",
                        "Context 2": "His jokes did not amuse her; instead, she found them quite rude.",
                        "Context 3": "They tried to amuse the children with magic tricks at the party."
                    }
                },
                {
                    "word": "Excursion",
                    "definition": "A short journey or trip, especially one engaged in as a leisure activity.",
                    "context": {
                        "Context 1": "We had an excursion to see the mangroves during our vacation.",
                        "Context 2": "His excursion to the mountains turned into an unexpected adventure.",
                        "Context 3": "The school organized an excursion to the local museum for the students."
                    }
                },
                {
                    "word": "Freckles",
                    "definition": "Small, pale brown spots on the skin, typically caused by sun exposure.",
                    "context": {
                        "Context 1": "I noticed she had more freckles after her trip to the beach.",
                        "Context 2": "He decided to draw freckles on his character to make her more unique.",
                        "Context 3": "During the summer, children often get freckles from playing outside."
                    }
                },
                {
                    "word": "Locale",
                    "definition": "A place where something happens or is set, or that has particular events associated with it.",
                    "context": {
                        "Context 1": "The wedding took place in a beautiful locale right by the ocean.",
                        "Context 2": "The locale of the story is an ancient castle in the mountains.",
                        "Context 3": "Many locals recommend the market as the best locale for finding fresh produce."
                    }
                },
                {
                    "word": "Encounter",
                    "definition": "An unexpected or casual meeting with someone or something.",
                    "context": {
                        "Context 1": "I had the most amazing encounter at the wedding.",
                        "Context 2": "The author wrote about her encounter with a famous celebrity in her book.",
                        "Context 3": "Each encounter with nature reminds me of how beautiful the world is."
                    }
                },
                {
                    "word": "Venezuelan",
                    "definition": "Relating to Venezuela, its people, or its culture.",
                    "context": {
                        "Context 1": "The Venezuelan wedding was a unique experience for me.",
                        "Context 2": "He prepared a Venezuelan dish for dinner to impress his friends.",
                        "Context 3": "A Venezuelan sunset is known to be one of the most picturesque scenes."
                    }
                },
                {
                    "word": "Patient",
                    "definition": "Able to accept or tolerate delays, problems, or suffering without becoming annoyed or anxious.",
                    "context": {
                        "Context 1": "You need to be patient with your language learning process.",
                        "Context 2": "The patient waited quietly in the doctor's office.",
                        "Context 3": "A patient gardener knows that plants need time to grow."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Freckles",
                    "fact": "Did you know that freckles can actually help protect your skin from sun damage? They may not be just cute spots!"
                },
                {
                    "word": "Excursion",
                    "fact": "The longest excursion ever recorded was a trip around the Earth that took about three days on the Concorde plane!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the teacher go to the beach?",
                    "answer": "Because she wanted to test the waters!"
                },
                {
                    "question": "How do you organize a space party?",
                    "answer": "You planet!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Direct Flight",
                    "definition": "A flight that goes from one destination to another without any stopovers.",
                    "context": {
                        "Context 1": "There is a direct flight to Moscow from Margarita, allowing travelers to avoid layovers.",
                        "Context 2": "I took a direct flight to Paris, which made my journey much easier than connecting flights.",
                        "Context 3": "During my vacation, I preferred a direct flight to avoid the hassle of changing planes."
                    }
                },
                {
                    "word": "All-inclusive",
                    "definition": "A type of vacation package that includes accommodations, meals, drinks, and activities.",
                    "context": {
                        "Context 1": "We stayed at an all-inclusive hotel in Venezuela, where all meals and drinks were included.",
                        "Context 2": "John chose an all-inclusive resort for his honeymoon to save money on dining out.",
                        "Context 3": "An all-inclusive package can make budgeting for your holiday much easier."
                    }
                },
                {
                    "word": "Excursion",
                    "definition": "A short journey or trip, often for leisure or educational purposes.",
                    "context": {
                        "Context 1": "We went on an excursion to explore the beautiful beaches during our stay in Venezuela.",
                        "Context 2": "The school organized an excursion to the local museum for the students.",
                        "Context 3": "During our excursion, we spotted dolphins swimming near the boat."
                    }
                },
                {
                    "word": "Resort",
                    "definition": "A place where people go for vacation, often with various recreational facilities.",
                    "context": {
                        "Context 1": "The resort we stayed at in Venezuela had beautiful views and plenty of activities.",
                        "Context 2": "She dreams of visiting a tropical resort where she can relax and unwind.",
                        "Context 3": "The ski resort was packed with visitors eager to hit the slopes."
                    }
                },
                {
                    "word": "Distraction",
                    "definition": "Something that prevents someone from concentrating on something else.",
                    "context": {
                        "Context 1": "On the airplane, distractions made it difficult for me to fall asleep.",
                        "Context 2": "Social media distractions can hinder productivity when studying.",
                        "Context 3": "In a crowded cafe, the loud music was a distraction from my reading."
                    }
                },
                {
                    "word": "Connecting Flights",
                    "definition": "Flights that require a transfer at another airport before reaching the final destination.",
                    "context": {
                        "Context 1": "Travelers often prefer direct flights over connecting flights to save time.",
                        "Context 2": "He missed his connecting flight because of a delay in the first leg of his journey.",
                        "Context 3": "Some travelers enjoy connecting flights because it allows them to explore another city briefly."
                    }
                },
                {
                    "word": "Jellyfish",
                    "definition": "A marine creature with a gelatinous body, often found in oceans and seas.",
                    "context": {
                        "Context 1": "Luckily, we didn’t see any jellyfish while swimming in Venezuela.",
                        "Context 2": "During our beach trip, my brother got stung by a jellyfish and had to be treated.",
                        "Context 3": "Jellyfish can be fascinating to watch as they float gracefully in the water."
                    }
                },
                {
                    "word": "Tension",
                    "definition": "Mental or emotional strain; a state of anxiety or stress.",
                    "context": {
                        "Context 1": "There is some political tension between the USA and Venezuela, causing concern for travelers.",
                        "Context 2": "The tension in the room was palpable as the debate heated up.",
                        "Context 3": "Yoga is a great way to relieve tension and promote relaxation."
                    }
                },
                {
                    "word": "Bungee jumping",
                    "definition": "An activity involving jumping from a tall structure while connected to a large elastic cord.",
                    "context": {
                        "Context 1": "I had never tried bungee jumping, even though it was offered at many tourist spots.",
                        "Context 2": "He decided to go bungee jumping from a bridge during his trip for an adrenaline rush.",
                        "Context 3": "Bungee jumping is not for the faint of heart, as it requires courage and thrill-seeking."
                    }
                },
                {
                    "word": "Spa",
                    "definition": "A place where people go for relaxation and therapeutic treatments, often involving water.",
                    "context": {
                        "Context 1": "I enjoyed a relaxing spa treatment during my vacation in Venezuela.",
                        "Context 2": "After a stressful week, I treated myself to a day at the spa.",
                        "Context 3": "They went to the spa to unwind after hiking in the mountains."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Excursion",
                    "fact": "The word 'excursion' comes from the Latin 'excurrere,' meaning 'to run out.'"
                },
                {
                    "word": "Bungee jumping",
                    "fact": "Did you know that the world's first commercial bungee jump was launched in 1986 at the Niue Island?"
                },
                {
                    "word": "Resort",
                    "fact": "The word 'resort' originally meant a place you go to for recreation, but now is often associated with luxury vacations!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the airplane break up with the airport?",
                    "answer": "Because it needed space!"
                },
                {
                    "question": "What kind of music do airplanes listen to?",
                    "answer": "Plane old rock!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Jet lag",
                    "definition": "A temporary sleep disorder that occurs when a person's internal body clock is out of sync with the time of the destination they have traveled to, often due to long flights across time zones.",
                    "context": {
                        "Context 1": "After flying from Moscow to the island, I am still suffering from jet lag and can't sleep until 3 a.m.",
                        "Context 2": "He didn't expect to feel so energetic after the flight, surprisingly avoiding jet lag this time.",
                        "Context 3": "They say the best remedy for jet lag is to spend a day adjusting to the local time zone."
                    }
                },
                {
                    "word": "Sinister",
                    "definition": "Giving the impression that something harmful or evil is happening or will happen.",
                    "context": {
                        "Context 1": "The conversation took a sinister turn when we started discussing the environmental issues.",
                        "Context 2": "The movie had a sinister villain that scared the audience.",
                        "Context 3": "Her smile had a sinister quality, leaving everyone unsure of her true intentions."
                    }
                },
                {
                    "word": "Bribe",
                    "definition": "An illegally offered payment or advantage given to someone to influence their actions.",
                    "context": {
                        "Context 1": "I joked that alcohol and cigarettes could be a bribe for my male professor to pass the exam.",
                        "Context 2": "In the film, the main character attempted to bribe the police officer with money.",
                        "Context 3": "Offering a bribe to a public official is a serious crime that can lead to severe penalties."
                    }
                },
                {
                    "word": "Conquer",
                    "definition": "To overcome and take control of a place or situation; to successfully overcome an obstacle.",
                    "context": {
                        "Context 1": "I mentioned the idea of conquering the moon as a symbol of exploration.",
                        "Context 2": "The nation aimed to conquer its rivals through diplomatic negotiations.",
                        "Context 3": "She tried to conquer her fear of public speaking by practicing consistently."
                    }
                },
                {
                    "word": "Awkwardness",
                    "definition": "A feeling of embarrassment or discomfort in social situations.",
                    "context": {
                        "Context 1": "I described feeling awkwardness when meeting new people.",
                        "Context 2": "The awkwardness in the room was palpable after the joke fell flat.",
                        "Context 3": "He managed to overcome his awkwardness by engaging in conversation games."
                    }
                },
                {
                    "word": "Tropical",
                    "definition": "Relating to or situated in the tropics; typically characterized by warm temperatures and lush vegetation.",
                    "context": {
                        "Context 1": "I quipped about spreading 'tropical thickness' to my friends.",
                        "Context 2": "The tropical climate of the region attracts many tourists each year.",
                        "Context 3": "They decided to wear tropical shirts to the beach party."
                    }
                },
                {
                    "word": "Conscious",
                    "definition": "Aware of and responding to one's surroundings; awake.",
                    "context": {
                        "Context 1": "I was told I was too conscious to indulge in drinking and smoking.",
                        "Context 2": "He became conscious of the time and rushed to his meeting.",
                        "Context 3": "Being conscious of the environment, she always recycles and uses less plastic."
                    }
                },
                {
                    "word": "Enhance",
                    "definition": "To improve the quality, value, or extent of something.",
                    "context": {
                        "Context 1": "I used to enhance my social skills with alcohol to feel more outgoing.",
                        "Context 2": "The software update aims to enhance the user experience significantly.",
                        "Context 3": "They installed new lights to enhance the ambiance of the restaurant."
                    }
                },
                {
                    "word": "Influence",
                    "definition": "The capacity to have an effect on the character, development, or behavior of someone or something.",
                    "context": {
                        "Context 1": "We discussed how alcohol could influence social interactions.",
                        "Context 2": "The teacher had a profound influence on her students' lives.",
                        "Context 3": "Social media can significantly influence public opinion."
                    }
                },
                {
                    "word": "Comfortable",
                    "definition": "Providing physical ease and relaxation; free from stress or anxiety.",
                    "context": {
                        "Context 1": "He remarked that hanging out with friends would make him feel comfortable again.",
                        "Context 2": "The sofa was so comfortable that I fell asleep immediately.",
                        "Context 3": "She felt comfortable sharing her feelings with her close friends."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Jet lag",
                    "fact": "Did you know that some people have tried wearing socks filled with rice to help combat jet lag?"
                },
                {
                    "word": "Bribe",
                    "fact": "In some countries, it's more common to bribe a taxi driver for good service than it is to leave a tip!"
                }
            ],
            "jokes": [
                {
                    "question": "Why don’t scientists trust atoms?",
                    "answer": "Because they make up everything!"
                },
                {
                    "question": "Why did the scarecrow win an award?",
                    "answer": "Because he was outstanding in his field!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Alcohol",
                    "definition": "A colorless, flammable liquid that is the active ingredient in beverages such as beer, wine, and spirits.",
                    "context": {
                        "Context 1": "The discussion about alcohol reminded everyone of the importance of moderation.",
                        "Context 2": "In cooking, some recipes call for alcohol to enhance the flavor of the dish.",
                        "Context 3": "A famous brand of alcohol just launched a new cocktail flavor that has become quite popular."
                    }
                },
                {
                    "word": "Hookah",
                    "definition": "A device for smoking flavored tobacco or other substances, which is passed through water before being inhaled.",
                    "context": {
                        "Context 1": "He mentioned that smoking hookah is a social activity in many cultures.",
                        "Context 2": "Some people prefer hookah over cigarettes because they believe it's less harmful.",
                        "Context 3": "She decided to use a hookah to celebrate New Year's Eve with her friends."
                    }
                },
                {
                    "word": "Milder",
                    "definition": "Less severe, harsh, or intense.",
                    "context": {
                        "Context 1": "He explained that hookah tobacco is milder than traditional cigarettes.",
                        "Context 2": "The weather was milder than expected, making it perfect for a picnic.",
                        "Context 3": "The professor's grading style was milder compared to the last semester."
                    }
                },
                {
                    "word": "Habit",
                    "definition": "A routine behavior that is often repeated and can be difficult to change.",
                    "context": {
                        "Context 1": "He realized that his habit of smoking hookah was not healthy.",
                        "Context 2": "Brushing your teeth every morning is a good habit to develop.",
                        "Context 3": "She made it a habit to go jogging every morning before work."
                    }
                },
                {
                    "word": "Distraction",
                    "definition": "Something that diverts attention away from what one is supposed to focus on.",
                    "context": {
                        "Context 1": "He mentioned distractions made it hard for him to finish his essay.",
                        "Context 2": "The loud music was a major distraction while she was trying to study.",
                        "Context 3": "She uses her phone as a distraction during long meetings."
                    }
                },
                {
                    "word": "Under the weather",
                    "definition": "Feeling ill or unwell.",
                    "context": {
                        "Context 1": "They both felt under the weather and decided not to write essays.",
                        "Context 2": "After traveling, she felt under the weather and took a few days to recover.",
                        "Context 3": "He skipped the party because he was feeling a bit under the weather."
                    }
                },
                {
                    "word": "Pill",
                    "definition": "A small round mass of solid medicine to be swallowed whole.",
                    "context": {
                        "Context 1": "He talked about taking a pill to help alleviate his headache.",
                        "Context 2": "She forgot to take her pill and had to wait until lunchtime to do so.",
                        "Context 3": "The doctor prescribed a pill for his high blood pressure."
                    }
                },
                {
                    "word": "Feel sick",
                    "definition": "To experience a sense of nausea or discomfort.",
                    "context": {
                        "Context 1": "He expressed that smoking made him feel sick.",
                        "Context 2": "After eating too much dessert, she started to feel sick.",
                        "Context 3": "He always feels sick when he rides roller coasters."
                    }
                },
                {
                    "word": "Essays",
                    "definition": "A short piece of writing on a particular subject, often a student's work.",
                    "context": {
                        "Context 1": "They discussed the homework of writing essays over the weekend.",
                        "Context 2": "The student's essay impressed the teacher with its originality.",
                        "Context 3": "He couldn't stop writing essays about his travels around the world."
                    }
                },
                {
                    "word": "Sore throat",
                    "definition": "A painful or scratchy sensation in the throat.",
                    "context": {
                        "Context 1": "He mentioned taking a pill for his sore throat.",
                        "Context 2": "She drank warm tea to soothe her sore throat.",
                        "Context 3": "When he has a sore throat, he usually avoids speaking."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Hookah",
                    "fact": "Did you know that hookahs originated in India in the 16th century and have come a long way since then?"
                },
                {
                    "word": "Alcohol",
                    "fact": "In some cultures, it's believed that singing to your alcohol will make it taste better!"
                },
                {
                    "word": "Sore throat",
                    "fact": "The phrase 'sore throat' is used so much that it’s almost as painful as having one!"
                }
            ],
            "jokes": [
                {
                    "question": "Why don't secrets work well with alcohol?",
                    "answer": "Because they tend to spill out!"
                },
                {
                    "question": "What did one hookah say to the other at the party?",
                    "answer": "Let's get this smoke rolling!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey there! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just getting over a cold. How about you?"
                },
                {
                    "Person 1": "Same here! I think I caught something from the last trip I took."
                },
                {
                    "Person 2": "Where did you go?"
                },
                {
                    "Person 1": "I went to Isla de Margarita in Venezuela. It was amazing!"
                },
                {
                    "Person 2": "Nice! I’ve heard about that place. What was the best part?"
                },
                {
                    "Person 1": "There were only ten guests in our hotel the whole week! It felt exclusive."
                },
                {
                    "Person 2": "Wow, that sounds great! Was the weather nice?"
                },
                {
                    "Person 1": "It was pretty hot, around 95 degrees every day. I loved it!"
                },
                {
                    "Person 2": "That's a bit too hot for me, but I get it. Did you do anything fun?"
                },
                {
                    "Person 1": "Yeah! I even crashed a Venezuelan wedding at the hotel. It was wild!"
                },
                {
                    "Person 2": "Really? That sounds like an adventure!"
                },
                {
                    "Person 1": "It was! Everyone wanted to take selfies with me since I was a foreigner."
                },
                {
                    "Person 2": "That's funny! Did you at least get free food?"
                },
                {
                    "Person 1": "Totally! They kept serving great food, and I didn’t have to pay a dime!"
                },
                {
                    "Person 2": "Sounds like a win! Did you notice any differences from weddings here?"
                },
                {
                    "Person 1": "For sure! They had a pool party where everyone wore white. Very chill!"
                },
                {
                    "Person 2": "No crazy toasts or fights like at Russian weddings?"
                },
                {
                    "Person 1": "Nope! Just good vibes, some drinks, and a DJ."
                },
                {
                    "Person 2": "That’s refreshing! How did you stay entertained for a week?"
                },
                {
                    "Person 1": "We swam a lot! Also took an excursion through mangroves, which was really cool."
                },
                {
                    "Person 2": "Sounds beautiful! Did you fly back directly?"
                },
                {
                    "Person 1": "Well, we had a layover in Caracas on the way back to refuel."
                },
                {
                    "Person 2": "First time flying across the Atlantic, huh? How'd you find it?"
                },
                {
                    "Person 1": "It was great! Those big planes are quite the experience, right?"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "**Person 1**": "You flew to Venezuela? How long was the flight?"
                },
                {
                    "**Person 2**": "Yeah, it was a long one—about 13 and a half hours there and around 15 back."
                },
                {
                    "**Person 1**": "Ugh, that sounds brutal. Were you able to sleep at all?"
                },
                {
                    "**Person 2**": "Not really. I couldn't get comfortable—no leg room on that plane."
                },
                {
                    "**Person 1**": "Are you tall?"
                },
                {
                    "**Person 2**": "I'm about 5 feet 9 inches, so yeah, my knees were not happy."
                },
                {
                    "**Person 1**": "So was it worth the trip anyway?"
                },
                {
                    "**Person 2**": "Totally. The beaches and the weather made up for the flight."
                },
                {
                    "**Person 1**": "Did you fly into Caracas?"
                },
                {
                    "**Person 2**": "No, we had a direct flight to Margarita island. Apparently only that island has direct service."
                },
                {
                    "**Person 1**": "Oh, I didn't realize there were direct flights. That must have helped with connections."
                },
                {
                    "**Person 2**": "Yeah, one long direct flight beats multiple layovers any day."
                },
                {
                    "**Person 1**": "What kind of hotel did you stay in?"
                },
                {
                    "**Person 2**": "It was all-inclusive—food anytime, drinks by the pool. They served alcohol after 11 a.m."
                },
                {
                    "**Person 1**": "Nice. Did you go with family or friends?"
                },
                {
                    "**Person 2**": "Mostly family, but we met a small group of other guests from Moscow and ended up hanging out a lot."
                },
                {
                    "**Person 1**": "Oh wow, that must have been interesting. What did you do together?"
                },
                {
                    "**Person 2**": "We did excursions, spent time on the beach, ate together, and even played soccer with some local kids."
                },
                {
                    "**Person 1**": "Soccer with local kids sounds fun. How was the water—clear, calm?"
                },
                {
                    "**Person 2**": "Pretty clear, but there were big waves. No sharks or jellyfish that I saw."
                },
                {
                    "**Person 1**": "Did you try any activities like diving or parasailing?"
                },
                {
                    "**Person 2**": "No diving or parasailing this time. A little snorkeling, but nothing extreme."
                },
                {
                    "**Person 1**": "Any spa time? I could use a hammam right about now."
                },
                {
                    "**Person 2**": "I love a good spa, but our hotel didn't have one. Missed that part."
                },
                {
                    "**Person 1**": "Weren't you worried about the news? I heard there's tension between the US and Venezuela."
                },
                {
                    "**Person 2**": "A little nervous at first—heard about some naval activity—but the area we were in felt safe."
                },
                {
                    "**Person 1**": "Alright. Random question: after all that travel, would you rather go to Mars or another island?"
                },
                {
                    "**Person 2**": "Ha! Mars sounds wild—Elon keeps talking about it—but I'm keeping my feet on the sand for now."
                },
                {
                    "**Person 1**": "Deal. Bring back a seashell instead of a moon rock, then."
                },
                {
                    "**Person 2**": "You got it. And next time we'll splurge on better seats so I can actually sleep."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever wondered why we’re so obsessed with going to Mars?"
                },
                {
                    "Person 2": "Honestly, yeah! It’s like, why bother? The moon is cool enough!"
                },
                {
                    "Person 1": "Right? I mean, it’s like a giant rock. What are we gonna do there? Build a sandcastle?"
                },
                {
                    "Person 2": "Exactly! Mars is just a desert. Doesn’t sound too inviting, does it?"
                },
                {
                    "Person 1": "And I think they say we might need a backup plan for Earth or something."
                },
                {
                    "Person 2": "Yeah, but wouldn’t it be better to fix our own planet first?"
                },
                {
                    "Person 1": "Totally! Spending all that cash on cleaning up the environment makes way more sense."
                },
                {
                    "Person 2": "For sure! Have you ever been to a place like India? It’s pretty eye-opening."
                },
                {
                    "Person 1": "No, but I’ve heard that with so many people, they just focus on survival."
                },
                {
                    "Person 2": "Exactly! They don’t have time to think about the environment when they’re just trying to eat."
                },
                {
                    "Person 1": "Wow, that’s kind of a downer. Speaking of downers, how are you feeling today?"
                },
                {
                    "Person 2": "A bit rough, honestly. I think I’m still feeling jet lagged."
                },
                {
                    "Person 1": "Ugh, that’s the worst! You can't fall asleep until like 3 AM, right?"
                },
                {
                    "Person 2": "Yes! It’s driving me crazy. I want to sleep all day."
                },
                {
                    "Person 1": "Have you tried any tricks to fix the jet lag?"
                },
                {
                    "Person 2": "Not really, just toughing it out. How about you? You got any ideas?"
                },
                {
                    "Person 1": "Maybe some melatonin or a good book? Or just sleep whenever!"
                },
                {
                    "Person 2": "Ugh, I wish! I can’t even focus on reading right now."
                },
                {
                    "Person 1": "Do your parents ever deal with that too?"
                },
                {
                    "Person 2": "Yeah, my mom’s kind of suffering from it too. It’s not fun."
                },
                {
                    "Person 1": "That sounds rough. Just take it easy then. Got any fun plans for the weekend?"
                },
                {
                    "Person 2": "I'd love to see my friends! It’s been too long."
                },
                {
                    "Person 1": "Awesome! Are you bringing them anything from your trip?"
                },
                {
                    "Person 2": "Yeah, I picked up some local snacks and a couple of cool bracelets."
                },
                {
                    "Person 1": "Nice! Any drinks in there? I hear local drinks can be fun."
                },
                {
                    "Person 2": "Just some for my dad. I don’t actually drink."
                },
                {
                    "Person 1": "Same here—never really got into it. I’d rather enjoy a good soda."
                },
                {
                    "Person 2": "Same! My friends sometimes drink, but it’s not my thing."
                },
                {
                    "Person 1": "Right? There’s a lot of pressure to fit in, though. Ever feel that?"
                },
                {
                    "Person 2": "All the time. It can be hard to connect when you’re not drinking."
                },
                {
                    "Person 1": "Totally! Sometimes when I feel shy, I think about alcohol, but it’s not worth it."
                },
                {
                    "Person 2": "Yeah, I used to think it was fun, but now it just seems pointless."
                },
                {
                    "Person 1": "Exactly! I’ve been good without it for ages."
                },
                {
                    "Person 2": "Same here! We’re just more fun without the booze."
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just trying to shake off this cold I caught."
                },
                {
                    "Person 1": "Oh no, I hope you feel better soon! Any remedies you're trying?"
                },
                {
                    "Person 2": "Yeah, I'm just taking some over-the-counter medicine. It's supposed to help with headaches and stuff."
                },
                {
                    "Person 1": "That sounds good! I've always heard about drinking plenty of water too."
                },
                {
                    "Person 2": "Definitely! I've been guzzling water all day. But, I can't wait until I can taste my food again!"
                },
                {
                    "Person 1": "Ha! That’s the worst part. Did you have any plans for the weekend before you got sick?"
                },
                {
                    "Person 2": "I was thinking about writing some essays and catching up on some reading, but now I’m not sure."
                },
                {
                    "Person 1": "Essays? For school?"
                },
                {
                    "Person 2": "Yeah, but I’ve only finished one. Too many distractions lately!"
                },
                {
                    "Person 1": "Same here! I keep getting sidetracked by videos online."
                },
                {
                    "Person 2": "Tell me about it! Sometimes I just end up watching random things for hours."
                },
                {
                    "Person 1": "Exactly! Maybe we can motivate each other to get some work done next week?"
                },
                {
                    "Person 2": "That would be great! Let’s check in with each other on progress."
                },
                {
                    "Person 1": "For sure! I’ll text you on Sunday to see how you’re feeling."
                },
                {
                    "Person 2": "Perfect! Hope you have a good day, and get some rest too!"
                },
                {
                    "Person 1": "Thanks! You take care of yourself. Talk soon!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 2,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "But actually it's a tiny library.",
                    "corrected": "But actually, it's a tiny library.",
                    "explanation": "A comma is needed after 'actually' to separate the introductory phrase from the main clause.",
                    "context": "I thought that there were more books when I carried them in my luggage. But actually, it's a tiny library. Most of the books are about design and related topics."
                },
                {
                    "original": "I need to show everyone what treasure do I have.",
                    "corrected": "I need to show everyone what treasure I have.",
                    "explanation": "The correct word order for statements is subject-verb, so 'do I have' should be 'I have.'",
                    "context": "The books were stored in drawers and you couldn't see them. Now I need to show everyone what treasure I have. I want to share my collection with my friends."
                },
                {
                    "original": "I keep kept kept kept my books in the tablet previously in Armenia.",
                    "corrected": "I kept my books on the tablet previously in Armenia.",
                    "explanation": "The verb 'keep' is incorrectly repeated; the past tense 'kept' is sufficient, and 'on' is the correct preposition for devices.",
                    "context": "I always have a laptop and tablet, and I can read books from the tablet. I kept my books on the tablet previously in Armenia. Now, I want to find new books to read."
                },
                {
                    "original": "There is a problem when you starting to live in your country.",
                    "corrected": "There is a problem when you start to live in your country.",
                    "explanation": "The gerund 'starting' should be replaced with the base form 'start' to match the present tense structure.",
                    "context": "I have already left part of my life in Russia. There is a problem when you start to live in your country. You may feel uncertain about how long you will stay."
                },
                {
                    "original": "And you want or don't want to buy many things.",
                    "corrected": "And you don't want to buy many things.",
                    "explanation": "The phrase 'you want or don't want' is awkward; simplifying it to 'you don't want' conveys the meaning more clearly.",
                    "context": "You don't want to buy many things. It's kind of mental pressure for me to always think about what I really need. I want to avoid accumulating unnecessary items."
                },
                {
                    "original": "It's like some kind of some kind of uncomfortable when you don't have any books at the house.",
                    "corrected": "It's kind of uncomfortable when you don't have any books at home.",
                    "explanation": "The phrase 'some kind of some kind of' is redundant; 'kind of' is sufficient, and 'at home' is the correct expression.",
                    "context": "Every family has some sort of library at home. It's kind of uncomfortable when you don't have any books at home. Books provide a sense of comfort and belonging."
                },
                {
                    "original": "It's about comfortable and not about comfortable for me.",
                    "corrected": "It's about comfort and not about discomfort for me.",
                    "explanation": "'Comfortable' is an adjective; 'comfort' is the noun needed here, and 'not about comfortable' should be 'not about discomfort.'",
                    "context": "Books act like an emotional connector. It's about comfort and not about discomfort for me. They help me feel at home."
                },
                {
                    "original": "I realized that I now have like 28 big bags filled with stuff that I bought here at some point.",
                    "corrected": "I realized that I now have about 28 big bags filled with stuff that I bought here at some point.",
                    "explanation": "'Like' is informal and should be replaced with 'about' for clarity in this context.",
                    "context": "When I first moved to Kazakhstan, I had only one suitcase. I realized that I now have about 28 big bags filled with stuff that I bought here. It's surprising how much I've accumulated."
                },
                {
                    "original": "I'm sure that you was you were.",
                    "corrected": "I'm sure that you were.",
                    "explanation": "'You was' is incorrect; the correct form is 'you were.'",
                    "context": "I noticed how much stuff I had accumulated. I'm sure that you were also careful with your spending. It's easy to collect things over time."
                },
                {
                    "original": "I think that it happens.",
                    "corrected": "I think that happens.",
                    "explanation": "The use of 'it' is unnecessary; 'that happens' is more direct and idiomatic.",
                    "context": "You mentioned how you felt about accumulating things. I think that happens to many people. We often buy more than we need."
                },
                {
                    "original": "But today the difference is really visible, not visible, hearable.",
                    "corrected": "But today the difference is really noticeable, not visible, hearable.",
                    "explanation": "'Visible' is incorrect in this context; 'noticeable' is the appropriate word to describe the quality of sound.",
                    "context": "I noticed the audio quality when using the new microphone. But today the difference is really noticeable. It's much clearer than before."
                },
                {
                    "original": "This helps like the system to drive to this like new device.",
                    "corrected": "This helps the system connect to this new device.",
                    "explanation": "The phrase 'helps like the system to drive to' is awkward; 'helps the system connect to' is clearer and more idiomatic.",
                    "context": "When you connect a new device, it needs specific software. This helps the system connect to this new device. It's essential for proper functionality."
                },
                {
                    "original": "The main idea is it should not have any any notions that are not very common.",
                    "corrected": "The main idea is that it should not have any notions that are not very common.",
                    "explanation": "The phrase is missing 'that' to introduce the clause, and 'any any' is redundant.",
                    "context": "When discussing essay topics, clarity is crucial. The main idea is that it should not have any notions that are not very common. This ensures students can relate to the topics."
                },
                {
                    "original": "And a lot of people don't know what that is.",
                    "corrected": "And many people don't know what that is.",
                    "explanation": "'A lot of' is informal; 'many' is more appropriate in academic contexts.",
                    "context": "I prompted my other students to write about universal basic income. And many people don't know what that is. It's important to choose topics that are widely understood."
                },
                {
                    "original": "This is a very like common.",
                    "corrected": "This is a very common topic.",
                    "explanation": "'Very like' is incorrect; 'very' should be followed directly by the adjective 'common.'",
                    "context": "When selecting essay topics, relevance is key. This is a very common topic. It engages students and encourages discussion."
                },
                {
                    "original": "You just mean any state university.",
                    "corrected": "You just mean any state university.",
                    "explanation": "The phrase is correct but lacks clarity; it could be rephrased for better understanding.",
                    "context": "When discussing university names, clarity is important. You just mean any state university. Specific names help avoid confusion."
                },
                {
                    "original": "But there was addiction, like the name of blah, blah, blah.",
                    "corrected": "But there was a distinction, like the name of blah, blah, blah.",
                    "explanation": "'Addiction' is incorrect; the intended word is 'distinction,' which refers to a difference.",
                    "context": "When talking about universities, it's essential to be precise. But there was a distinction, like the name of blah, blah, blah. This helps clarify the conversation."
                },
                {
                    "original": "You're talking about a specific university, which is called state universe, then it should not be a.",
                    "corrected": "You're talking about a specific university, which is called a state university, then it should not be.",
                    "explanation": "The phrase 'state universe' is incorrect; it should be 'state university.'",
                    "context": "In our discussion about universities, clarity is crucial. You're talking about a specific university, which is called a state university, then it should not be. This avoids ambiguity."
                },
                {
                    "original": "Then everything. Just Moscow State with the upper case.",
                    "corrected": "Then everything should be just Moscow State with uppercase letters.",
                    "explanation": "The phrase is incomplete; it needs clarification that 'uppercase' refers to capitalization.",
                    "context": "When discussing proper naming conventions, precision is key. Then everything should be just Moscow State with uppercase letters. This ensures proper formatting."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "It's a name of us like you capitalize again all letters.",
                    "corrected": "It's a name for us, so you should capitalize all letters.",
                    "explanation": "The phrase 'a name of us' is incorrect; it should be 'a name for us' to indicate purpose.",
                    "context": "When discussing the university's name, I mentioned that it's a name for us, so you should capitalize all letters. This is important for clarity."
                },
                {
                    "original": "California University sounds okay. Not quite.",
                    "corrected": "California University sounds okay, but not quite.",
                    "explanation": "The sentence lacks a conjunction to connect the two contrasting ideas.",
                    "context": "I was explaining that California University sounds okay, but not quite right. It’s important to be specific when naming universities."
                },
                {
                    "original": "This is kind of more logical, but you explained your point.",
                    "corrected": "This is kind of more logical, but you did explain your point.",
                    "explanation": "The verb 'explained' should be in the past tense to match the context.",
                    "context": "I was discussing the logic of the argument. This is kind of more logical, but you did explain your point well."
                },
                {
                    "original": "This is tough for me. Local businesses, bankruptcy.",
                    "corrected": "This is tough for me: local businesses facing bankruptcy.",
                    "explanation": "The phrase lacks clarity; it should be restructured for better understanding.",
                    "context": "I was trying to articulate my thoughts on local businesses. This is tough for me: local businesses facing bankruptcy is a serious issue."
                },
                {
                    "original": "But the word example here, like explicitly shows and if we use example here, then before we can replace it with instance you already did.",
                    "corrected": "But the word 'example' here explicitly shows that if we use 'example' again, we can replace it with 'instance,' which you already did.",
                    "explanation": "The sentence is overly complex and lacks clarity; it should be simplified.",
                    "context": "I was clarifying the use of the word 'example' in writing. But the word 'example' here explicitly shows that if we use 'example' again, we can replace it with 'instance,' which you already did."
                },
                {
                    "original": "Second place in the list of impact is accountable.",
                    "corrected": "The second place in the list of impacts is accountable.",
                    "explanation": "The article 'the' is needed to specify which place is being referred to.",
                    "context": "I was discussing the ranking of impacts. The second place in the list of impacts is accountable, which is crucial to understand."
                },
                {
                    "original": "Before small, almost certainly we need A.",
                    "corrected": "Before 'small,' we almost certainly need 'a.'",
                    "explanation": "The sentence structure is confusing; it should clarify what 'A' refers to.",
                    "context": "I was pointing out a grammatical issue. Before 'small,' we almost certainly need 'a' to make the sentence correct."
                },
                {
                    "original": "I won't go over, you know, mistakes like in your essay.",
                    "corrected": "I won't go over the mistakes in your essay.",
                    "explanation": "The phrase 'you know' is unnecessary and makes the sentence awkward.",
                    "context": "I was summarizing my feedback. I won't go over the mistakes in your essay since you can do that yourself."
                },
                {
                    "original": "You can just do it.",
                    "corrected": "You can just handle it yourself.",
                    "explanation": "The phrase 'do it' is vague; 'handle it yourself' provides clearer guidance.",
                    "context": "I was encouraging independence in the editing process. You can just handle it yourself, which is a good approach."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Luggage",
                    "definition": "Bags and suitcases used for traveling.",
                    "context": {
                        "Context 1": "I thought that there were more books when I carried them in my luggage.",
                        "Context 2": "She packed her luggage carefully to avoid extra fees at the airport.",
                        "Context 3": "His luggage was lost during the flight, and he had to buy new clothes."
                    }
                },
                {
                    "word": "Treasure",
                    "definition": "Valuable items or something that is greatly valued.",
                    "context": {
                        "Context 1": "Now I need to show everyone what treasure I have.",
                        "Context 2": "The pirate's treasure was hidden on a deserted island.",
                        "Context 3": "She considers her family photos to be her greatest treasure."
                    }
                },
                {
                    "word": "Comfortable",
                    "definition": "Providing physical ease and relaxation.",
                    "context": {
                        "Context 1": "It's kind of uncomfortable when you don't have any books at the house.",
                        "Context 2": "He prefers to wear comfortable shoes when he goes hiking.",
                        "Context 3": "The couch is so comfortable that I could sleep on it all day."
                    }
                },
                {
                    "word": "Emotional connector",
                    "definition": "Something that helps to create a bond or connection on an emotional level.",
                    "context": {
                        "Context 1": "Books act like an emotional connector.",
                        "Context 2": "Music can be a powerful emotional connector between people.",
                        "Context 3": "Family traditions often serve as emotional connectors across generations."
                    }
                },
                {
                    "word": "Significant",
                    "definition": "Important or meaningful.",
                    "context": {
                        "Context 1": "The quality is really significant for you.",
                        "Context 2": "Her significant contribution to the project was recognized by the team.",
                        "Context 3": "The significant change in weather patterns has scientists concerned."
                    }
                },
                {
                    "word": "Drivers",
                    "definition": "Software that allows the operating system to communicate with hardware devices.",
                    "context": {
                        "Context 1": "It turned out the drivers were missing.",
                        "Context 2": "He updated the drivers on his computer to improve performance.",
                        "Context 3": "Without the correct drivers, the printer wouldn't work."
                    }
                },
                {
                    "word": "Resource",
                    "definition": "A source of supply or support.",
                    "context": {
                        "Context 1": "I found these topics on some website, which is a good resource.",
                        "Context 2": "The library is a valuable resource for students.",
                        "Context 3": "She used online resources to learn more about the subject."
                    }
                },
                {
                    "word": "Norm",
                    "definition": "A standard or pattern, especially of social behavior, that is typical or expected.",
                    "context": {
                        "Context 1": "Universal basic income will be a norm in the future.",
                        "Context 2": "In many cultures, greeting with a handshake is the norm.",
                        "Context 3": "Wearing casual clothes to work has become the norm in many companies."
                    }
                },
                {
                    "word": "Common interest",
                    "definition": "A shared concern or topic that is relevant to a group.",
                    "context": {
                        "Context 1": "This is a topic of common interest.",
                        "Context 2": "They formed a club based on their common interest in photography.",
                        "Context 3": "The discussion focused on common interests in environmental conservation."
                    }
                },
                {
                    "word": "Capitalized",
                    "definition": "Written with an uppercase letter.",
                    "context": {
                        "Context 1": "It should not be a capitalized word.",
                        "Context 2": "All proper nouns should be capitalized in English.",
                        "Context 3": "The title of the book was capitalized for emphasis."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Luggage",
                    "fact": "Did you know that the world's largest suitcase weighs over 200 pounds and is made entirely of chocolate?"
                },
                {
                    "word": "Treasure",
                    "fact": "The most expensive treasure ever found was worth over $5 billion and was discovered in a shipwreck off the coast of Florida!"
                },
                {
                    "word": "Comfortable",
                    "fact": "The most comfortable chair in the world was designed to be so relaxing that it was banned in some workplaces!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the suitcase go to therapy?",
                    "answer": "Because it had too much baggage!"
                },
                {
                    "question": "What did one book say to the other?",
                    "answer": "I have a novel idea!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Capitalize",
                    "definition": "To write or print in capital letters.",
                    "context": {
                        "Context 1": "When you mention California University, you should capitalize the 'C' and 'U'.",
                        "Context 2": "In English, the first word of a sentence should always be capitalized.",
                        "Context 3": "To emphasize a point, you can capitalize certain words in your presentation."
                    }
                },
                {
                    "word": "Discipline",
                    "definition": "A branch of knowledge, typically one studied in higher education.",
                    "context": {
                        "Context 1": "In the essay, you should mention the discipline of mathematics.",
                        "Context 2": "She chose psychology as her discipline because she wanted to understand human behavior.",
                        "Context 3": "The discipline of physics has many practical applications in engineering."
                    }
                },
                {
                    "word": "Stimulate",
                    "definition": "To encourage interest or activity in something.",
                    "context": {
                        "Context 1": "You can stimulate interest in your topic by providing engaging examples.",
                        "Context 2": "The new marketing campaign was designed to stimulate sales during the holiday season.",
                        "Context 3": "Exercise can stimulate the brain and improve cognitive function."
                    }
                },
                {
                    "word": "Bankruptcy",
                    "definition": "The state of being unable to pay debts owed.",
                    "context": {
                        "Context 1": "Local businesses may face bankruptcy if large companies take over.",
                        "Context 2": "After several poor financial decisions, the company declared bankruptcy.",
                        "Context 3": "Bankruptcy can be a fresh start for individuals overwhelmed by debt."
                    }
                },
                {
                    "word": "Example",
                    "definition": "A representative form or pattern; a case that illustrates a concept.",
                    "context": {
                        "Context 1": "You should provide a specific example to support your argument.",
                        "Context 2": "For example, the teacher used a real-life situation to explain the concept.",
                        "Context 3": "An example of teamwork is when everyone contributes to a group project."
                    }
                },
                {
                    "word": "Effective",
                    "definition": "Successful in producing a desired or intended result.",
                    "context": {
                        "Context 1": "Using statistics can be an effective way to strengthen your argument.",
                        "Context 2": "The new training program proved to be effective in improving employee performance.",
                        "Context 3": "An effective way to learn a language is through immersion."
                    }
                },
                {
                    "word": "Perspective",
                    "definition": "A particular attitude toward or way of regarding something; a point of view.",
                    "context": {
                        "Context 1": "From my perspective, the essay could benefit from more detailed examples.",
                        "Context 2": "Traveling can give you a new perspective on life and different cultures.",
                        "Context 3": "The artist's perspective is evident in the way she portrays emotions in her paintings."
                    }
                },
                {
                    "word": "Reference",
                    "definition": "The act of mentioning or alluding to something.",
                    "context": {
                        "Context 1": "You should include a reference to the previous studies in your essay.",
                        "Context 2": "He made a reference to a famous quote during his speech.",
                        "Context 3": "The book contains a reference section for further reading."
                    }
                },
                {
                    "word": "Logical",
                    "definition": "Of or according to the rules of logic or formal argument.",
                    "context": {
                        "Context 1": "Your argument should be logical and well-structured.",
                        "Context 2": "It’s logical to assume that if it rains, the ground will be wet.",
                        "Context 3": "The detective's logical reasoning led to the solving of the case."
                    }
                },
                {
                    "word": "Adjust",
                    "definition": "To change or modify something to achieve a desired fit or result.",
                    "context": {
                        "Context 1": "You may need to adjust your thesis statement to make it clearer.",
                        "Context 2": "He had to adjust the settings on his camera for better lighting.",
                        "Context 3": "Sometimes, you need to adjust your plans based on unexpected events."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Bankruptcy",
                    "fact": "Did you know that the term 'bankruptcy' comes from the Italian word 'banca rotta,' which means 'broken bench'? It referred to the benches of moneylenders who would be broken if they went bankrupt!"
                },
                {
                    "word": "Stimulate",
                    "fact": "In the animal kingdom, some species of frogs can stimulate their own heart rates by jumping! Talk about a jumpstart!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                },
                {
                    "question": "Why did the math book look sad?",
                    "answer": "Because it had too many problems!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going this morning?"
                },
                {
                    "Person 2": "Pretty good! Just enjoying my coffee. How about you?"
                },
                {
                    "Person 1": "Same here! I just got a new mug, and I love it. It has a funny quote on it."
                },
                {
                    "Person 2": "Nice! I’m always on the lookout for quirky mugs. What does it say?"
                },
                {
                    "Person 1": "It says, 'I’m not a morning person.' Perfect for me, right?"
                },
                {
                    "Person 2": "Haha, that’s great! I can relate. Mornings are tough sometimes."
                },
                {
                    "Person 1": "For sure! So, any plans for the weekend?"
                },
                {
                    "Person 2": "Yeah, I’m thinking about going hiking if the weather holds up."
                },
                {
                    "Person 1": "That sounds awesome! Where do you usually go?"
                },
                {
                    "Person 2": "There's a nice trail about an hour away. It has some great views."
                },
                {
                    "Person 1": "I love a good view! I might join you if you don’t mind."
                },
                {
                    "Person 2": "Of course! The more, the merrier. We can pack some snacks too."
                },
                {
                    "Person 1": "Perfect! I’ll bring some trail mix and maybe some sandwiches."
                },
                {
                    "Person 2": "Sounds like a plan! I’ll bring the drinks."
                },
                {
                    "Person 1": "Awesome! I’m looking forward to it."
                },
                {
                    "Person 2": "Me too! It’ll be a nice break from the usual routine."
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you hear about that new coffee shop that opened downtown?"
                },
                {
                    "Person 2": "Yeah, I saw it on Instagram! It looks super cute. Have you been there yet?"
                },
                {
                    "Person 1": "Not yet, but I’m planning to check it out this weekend. I heard they have amazing pastries."
                },
                {
                    "Person 2": "Oh, I love pastries! What kind are you hoping to try?"
                },
                {
                    "Person 1": "I’m really curious about their almond croissant. I’ve heard it’s to die for!"
                },
                {
                    "Person 2": "Yum! I’m a sucker for a good croissant. Maybe we should go together!"
                },
                {
                    "Person 1": "That sounds like a plan! We can make a whole day out of it."
                },
                {
                    "Person 2": "Definitely! We could grab coffee, then maybe walk around the park or hit up that new bookstore."
                },
                {
                    "Person 1": "I love that idea! I’ve been wanting to check out some new books."
                },
                {
                    "Person 2": "Same here! I need something to read for the upcoming rainy days."
                },
                {
                    "Person 1": "Perfect! Let’s aim for Saturday then. What time works for you?"
                },
                {
                    "Person 2": "How about 10 AM? That way we can beat the weekend crowd."
                },
                {
                    "Person 1": "Sounds good to me! I’ll see you then."
                },
                {
                    "Person 2": "Can’t wait! It’s going to be a fun day."
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
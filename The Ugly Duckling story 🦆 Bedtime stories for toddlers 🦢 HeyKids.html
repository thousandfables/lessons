<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 2,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "Could be heard from all directions, the ducklings came to life and took their first steps, said the mother duck.",
                    "corrected": "It could be heard from all directions that the ducklings came to life and took their first steps, said the mother duck.",
                    "explanation": "The original sentence lacks a subject; 'It' should be included to clarify what is being heard.",
                    "context": "As the mother duck watched her eggs, she felt a sense of excitement. It could be heard from all directions that the ducklings came to life and took their first steps, said the mother duck. She was thrilled to see them emerge."
                },
                {
                    "original": "She can't be a chicken, not even a turkey.",
                    "corrected": "She can't be a chicken or even a turkey.",
                    "explanation": "The phrase 'not even a turkey' is awkward; 'or even a turkey' is more idiomatic.",
                    "context": "The mother duck was observing her unusual duckling. She can't be a chicken or even a turkey. The way she moves is so different from the others."
                },
                {
                    "original": "It's true that perhaps she's not the prettiest duckling, but she's good natured and she can swim as well as the others, maybe even better.",
                    "corrected": "It's true that perhaps she isn't the prettiest duckling, but she's good-natured and can swim as well as the others, maybe even better.",
                    "explanation": "The contraction 'she's' should be 'she isn't' for clarity; 'good natured' should be hyphenated to 'good-natured.'",
                    "context": "The mother duck defended her offspring against the other ducks. It's true that perhaps she isn't the prettiest duckling, but she's good-natured and can swim as well as the others, maybe even better. She believed in her duckling's abilities."
                },
                {
                    "original": "The poor duckling didn't know where to hide and what to do.",
                    "corrected": "The poor duckling didn't know where to hide or what to do.",
                    "explanation": "The conjunction 'and' should be replaced with 'or' to correctly connect the two clauses.",
                    "context": "Feeling lost and rejected, the ugly duckling wandered around. The poor duckling didn't know where to hide or what to do. She just wanted to find a place where she belonged."
                },
                {
                    "original": "I was lucky they didn't get me this time.",
                    "corrected": "I was lucky they didn't catch me this time.",
                    "explanation": "'Get' is too vague; 'catch' is more specific in this context.",
                    "context": "After narrowly escaping danger, the ugly duckling felt a mix of relief and fear. I was lucky they didn't catch me this time. She knew she had to stay vigilant."
                },
                {
                    "original": "The ugly duckling had never seen birds as beautiful as them in her whole life.",
                    "corrected": "The ugly duckling had never seen birds as beautiful as those in her whole life.",
                    "explanation": "'Them' should be replaced with 'those' to correctly refer to the previously mentioned birds.",
                    "context": "As she gazed at the swans, the ugly duckling felt a deep longing. The ugly duckling had never seen birds as beautiful as those in her whole life. She wished to be like them."
                },
                {
                    "original": "She hid behind the house and waited for the wind to stop.",
                    "corrected": "She hid behind the house and waited for the wind to die down.",
                    "explanation": "'Stop' is less idiomatic; 'die down' is a more common expression for wind calming.",
                    "context": "Seeking shelter from the harsh weather, the ugly duckling found a small house. She hid behind the house and waited for the wind to die down. It was a moment of hope amid her struggles."
                },
                {
                    "original": "The old woman noticed the duckling and asked her, Who are you?",
                    "corrected": "The old woman noticed the duckling and asked her, 'Who are you?'",
                    "explanation": "Quotation marks are needed to indicate direct speech.",
                    "context": "In the warmth of the house, the old woman turned to the duckling. The old woman noticed the duckling and asked her, 'Who are you?' She seemed curious about her unusual guest."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "Can you cuddle, purr?",
                    "corrected": "Can you cuddle and purr?",
                    "explanation": "The conjunction 'and' is needed to connect the two verbs 'cuddle' and 'purr' in the question.",
                    "context": "The tomcat asked the duckling if she could perform certain actions. Can you cuddle and purr? The duckling responded that she could not."
                },
                {
                    "original": "What's there to understand?",
                    "corrected": "What is there to understand?",
                    "explanation": "The contraction 'What's' is informal; the full form 'What is' is more appropriate in this context.",
                    "context": "The chicken questioned the duckling's feelings. What is there to understand? The duckling felt misunderstood and frustrated."
                },
                {
                    "original": "Learn to do what is asked of you.",
                    "corrected": "Learn to do what is asked of you.",
                    "explanation": "No correction needed; this sentence is correct.",
                    "context": "The chicken advised the duckling on how to live a fulfilling life. Learn to do what is asked of you. The duckling felt pressured by this advice."
                },
                {
                    "original": "But I think they will ignore me because I'm ugly.",
                    "corrected": "But I think they will ignore me because I am ugly.",
                    "explanation": "The contraction 'I'm' is informal; using 'I am' is more appropriate in this reflective context.",
                    "context": "The ugly duckling expressed her insecurities about fitting in with the swans. But I think they will ignore me because I am ugly. She felt apprehensive about approaching them."
                },
                {
                    "original": "A surprise!",
                    "corrected": "What a surprise!",
                    "explanation": "'A surprise!' is an incomplete expression; 'What a surprise!' is the correct exclamatory form.",
                    "context": "The duckling looked into the water and was shocked by her reflection. What a surprise! She realized she was now a beautiful swan."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Brood",
                    "definition": "To sit on eggs to hatch them.",
                    "context": {
                        "Context 1": "The mother duck was brooding her eggs, waiting for them to hatch.",
                        "Context 2": "The hen decided to brood her chicks under the warm sun.",
                        "Context 3": "He would brood over his homework, trying to figure out the answers."
                    }
                },
                {
                    "word": "Hatch",
                    "definition": "To emerge from an egg.",
                    "context": {
                        "Context 1": "The ducklings began to hatch one by one, filling the nest with life.",
                        "Context 2": "The scientist watched as the butterfly started to hatch from its cocoon.",
                        "Context 3": "The magician made a rabbit hatch from a hat during his performance."
                    }
                },
                {
                    "word": "Siblings",
                    "definition": "Brothers and sisters.",
                    "context": {
                        "Context 1": "The mother duck was worried about her duckling not looking like its siblings.",
                        "Context 2": "My siblings and I always argue over who gets the last slice of pizza.",
                        "Context 3": "The siblings decided to team up for the school science project."
                    }
                },
                {
                    "word": "Ugly",
                    "definition": "Unpleasant or unsightly in appearance.",
                    "context": {
                        "Context 1": "The other ducks called the gray duckling ugly, but she was unique.",
                        "Context 2": "He thought the painting was ugly, but others found it beautiful.",
                        "Context 3": "The ugly sweater party was a hit, with everyone wearing their most ridiculous designs."
                    }
                },
                {
                    "word": "Puddle",
                    "definition": "A small pool of liquid, usually rainwater.",
                    "context": {
                        "Context 1": "The duck made her nest at the edge of a puddle.",
                        "Context 2": "After the rain, the kids jumped in the puddle and splashed each other.",
                        "Context 3": "The dog drank from the puddle after chasing a squirrel."
                    }
                },
                {
                    "word": "Nest",
                    "definition": "A structure built by birds to hold their eggs.",
                    "context": {
                        "Context 1": "The duck built her nest carefully to protect her eggs.",
                        "Context 2": "The squirrel found a cozy nest in the tree to sleep in.",
                        "Context 3": "The children made a nest out of blankets for their stuffed animals."
                    }
                },
                {
                    "word": "Flock",
                    "definition": "A group of birds or animals.",
                    "context": {
                        "Context 1": "The ugly duckling wanted to join the flock of wild ducks.",
                        "Context 2": "A flock of sheep grazed peacefully in the meadow.",
                        "Context 3": "The flock of geese honked loudly as they flew overhead."
                    }
                },
                {
                    "word": "Embrace",
                    "definition": "To hold someone closely in one's arms.",
                    "context": {
                        "Context 1": "The mother duck embraced her ducklings after they hatched.",
                        "Context 2": "He decided to embrace the changes in his life with optimism.",
                        "Context 3": "The friends shared a warm embrace after not seeing each other for years."
                    }
                },
                {
                    "word": "Strange",
                    "definition": "Unusual or surprising in a way that is unsettling.",
                    "context": {
                        "Context 1": "The mother duck thought the gray duckling looked strange compared to her siblings.",
                        "Context 2": "He had a strange feeling that something was not right.",
                        "Context 3": "The strange noise coming from the attic made everyone curious."
                    }
                },
                {
                    "word": "Journey",
                    "definition": "An act of traveling from one place to another.",
                    "context": {
                        "Context 1": "The ugly duckling set out on a journey to find a place where she would be accepted.",
                        "Context 2": "Their journey across the country took several days.",
                        "Context 3": "The journey through the forest was filled with adventure and surprises."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Ugly",
                    "fact": "The term 'ugly duckling' has become a popular metaphor for someone who transforms into something beautiful!"
                },
                {
                    "word": "Nest",
                    "fact": "Some birds can build nests that are so intricate, they look like works of art!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the duck go to therapy?",
                    "answer": "Because she had too many emotional quacks!"
                },
                {
                    "question": "What did the mother duck say to her ducklings?",
                    "answer": "You better not be playing foul!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Cuddle",
                    "definition": "To hold close in one's arms as a way of showing love or affection.",
                    "context": {
                        "Context 1": "The tomcat asked the duckling, 'Can you cuddle?'",
                        "Context 2": "After a long day, she just wanted to cuddle with her favorite blanket.",
                        "Context 3": "The puppy loved to cuddle with its owner on the couch."
                    }
                },
                {
                    "word": "Purr",
                    "definition": "The low, continuous, vibrating sound made by some animals, especially cats, as a sign of contentment.",
                    "context": {
                        "Context 1": "The tomcat asked the duckling, 'Can you purr?'",
                        "Context 2": "The cat began to purr as soon as it was petted.",
                        "Context 3": "She could hear the purr of the engine as the car started."
                    }
                },
                {
                    "word": "Carefree",
                    "definition": "Free from worries or responsibilities; lighthearted.",
                    "context": {
                        "Context 1": "The chicken suggested that the duckling could have a carefree life by laying eggs.",
                        "Context 2": "Children often have a carefree attitude during summer vacation.",
                        "Context 3": "He felt carefree as he strolled along the beach, enjoying the sunshine."
                    }
                },
                {
                    "word": "Urge",
                    "definition": "A strong desire or impulse to do something.",
                    "context": {
                        "Context 1": "The duckling felt the urge to swim after remembering the fresh air.",
                        "Context 2": "She had an urge to eat chocolate after seeing the dessert menu.",
                        "Context 3": "The athlete felt an urge to train harder after watching the Olympics."
                    }
                },
                {
                    "word": "Reflect",
                    "definition": "To throw back light, heat, or sound; to think deeply about something.",
                    "context": {
                        "Context 1": "The duckling looked in the water and saw her reflection.",
                        "Context 2": "He took a moment to reflect on his choices before making a decision.",
                        "Context 3": "The mirror can reflect your image perfectly if it's clean."
                    }
                },
                {
                    "word": "Acceptance",
                    "definition": "The action of consenting to receive or undertake something offered; the process of being received as adequate or suitable.",
                    "context": {
                        "Context 1": "The swans welcomed the duckling into their circle, showing acceptance.",
                        "Context 2": "Finding acceptance in a new community can be challenging.",
                        "Context 3": "She struggled with acceptance of her flaws but learned to embrace them."
                    }
                },
                {
                    "word": "Courage",
                    "definition": "The ability to do something that frightens one; bravery.",
                    "context": {
                        "Context 1": "The duckling gathered her courage to approach the swans.",
                        "Context 2": "It takes courage to stand up for what you believe in.",
                        "Context 3": "He showed great courage by speaking in front of a large audience."
                    }
                },
                {
                    "word": "Home",
                    "definition": "The place where one lives permanently, especially as a member of a family or household.",
                    "context": {
                        "Context 1": "The ugly duckling felt that she was finally home with the swans.",
                        "Context 2": "After a long trip, returning home felt comforting.",
                        "Context 3": "Home is where the heart is, they say."
                    }
                },
                {
                    "word": "Beautiful",
                    "definition": "Pleasant to look at; attractive.",
                    "context": {
                        "Context 1": "The ugly duckling turned into a beautiful swan.",
                        "Context 2": "The sunset was so beautiful that everyone stopped to take pictures.",
                        "Context 3": "She wore a beautiful dress to the party."
                    }
                },
                {
                    "word": "Circle",
                    "definition": "A round plane figure whose boundary consists of points equidistant from a fixed center.",
                    "context": {
                        "Context 1": "The swans welcomed the duckling into their circle.",
                        "Context 2": "They sat in a circle to discuss their plans.",
                        "Context 3": "The children drew a circle in the sand."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Cuddle",
                    "fact": "Did you know that cuddling can actually release oxytocin, also known as the 'love hormone'?"
                },
                {
                    "word": "Purr",
                    "fact": "Cats can purr at a frequency that promotes healing in their bones and tissues!"
                },
                {
                    "word": "Urge",
                    "fact": "The urge to snack is often stronger when you're watching TV, thanks to the brain's association with food and entertainment!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the duckling bring a ladder to the lake?",
                    "answer": "Because it wanted to reach new heights!"
                },
                {
                    "question": "What did the swan say to the ugly duckling?",
                    "answer": "Don't worry, you quack me up!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you hear about that new park they opened downtown?"
                },
                {
                    "Person 2": "Yeah, I did! I heard they have a really cool playground and a lake for paddle boating."
                },
                {
                    "Person 1": "Exactly! I was thinking of checking it out this weekend. Want to join?"
                },
                {
                    "Person 2": "Definitely! I could use some fresh air. Plus, I heard they have a picnic area too."
                },
                {
                    "Person 1": "Perfect! We can pack some snacks and make a day of it."
                },
                {
                    "Person 2": "Sounds like a plan! What snacks are you thinking?"
                },
                {
                    "Person 1": "Maybe some sandwiches and fruit? And of course, chips!"
                },
                {
                    "Person 2": "Chips are a must! I’ll bring some drinks too. How about lemonade?"
                },
                {
                    "Person 1": "Lemonade sounds refreshing! I can’t wait to see the park."
                },
                {
                    "Person 2": "Me too! I heard there are also walking trails. We could explore a bit."
                },
                {
                    "Person 1": "That would be fun! I love walking in nature."
                },
                {
                    "Person 2": "Same here! It’ll be nice to get away from screens for a bit."
                },
                {
                    "Person 1": "Absolutely! Just good food, good company, and nature."
                },
                {
                    "Person 2": "Can’t wait! Let’s plan to meet around 10?"
                },
                {
                    "Person 1": "Perfect! I’ll bring a blanket for us to sit on."
                },
                {
                    "Person 2": "Awesome! See you Saturday!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you hear about that new park they opened downtown?"
                },
                {
                    "Person 2": "Yeah, I saw some pictures online! It looks really nice. Have you been there yet?"
                },
                {
                    "Person 1": "Not yet, but I’m planning to go this weekend. I heard they have a great walking trail."
                },
                {
                    "Person 2": "That sounds awesome! I love walking trails. Are you going by yourself?"
                },
                {
                    "Person 1": "I might bring my dog along. He loves to explore new places."
                },
                {
                    "Person 2": "That’s perfect! Dogs always make walks more fun. What kind of dog do you have?"
                },
                {
                    "Person 1": "He’s a golden retriever. Super friendly and loves to meet other dogs."
                },
                {
                    "Person 2": "Golden retrievers are the best! I used to have one. They’re so loyal."
                },
                {
                    "Person 1": "Exactly! I can’t imagine life without him. Do you have any pets now?"
                },
                {
                    "Person 2": "No, not right now. I’m thinking about getting a cat, though."
                },
                {
                    "Person 1": "Cats are great! They have such unique personalities. What kind are you thinking about?"
                },
                {
                    "Person 2": "Maybe a tabby. I love their stripes and they seem so playful."
                },
                {
                    "Person 1": "That sounds like a good choice! You should definitely visit a shelter."
                },
                {
                    "Person 2": "Yeah, I’ve been looking into it. I want to adopt rather than buy."
                },
                {
                    "Person 1": "That’s awesome! There are so many animals that need homes."
                },
                {
                    "Person 2": "For sure! Anyway, let me know how the park is this weekend!"
                },
                {
                    "Person 1": "Will do! Maybe we can go together next time."
                },
                {
                    "Person 2": "Sounds like a plan!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I just want to know and know more about different, let's say, ways.",
                    "corrected": "I just want to know more about different, let's say, options.",
                    "explanation": "The phrase 'know and know more' is redundant; 'know more' is sufficient. 'Ways' can be replaced with 'options' for clarity.",
                    "context": "I'm interested in exploring various academic paths. I just want to know more about different, let's say, options. This way, I can make a more informed decision."
                },
                {
                    "original": "In Russia it easily may be more cold temperatures.",
                    "corrected": "In Russia, it can easily be colder.",
                    "explanation": "The phrase 'more cold temperatures' is awkward; 'colder' is the correct comparative form. 'Can easily be' is a more natural structure.",
                    "context": "We often talk about the weather here. In Russia, it can easily be colder. I remember some winters where it dropped to minus 20 degrees."
                },
                {
                    "original": "I drink every month.",
                    "corrected": "I take vitamins every month.",
                    "explanation": "'Drink' is not the correct verb for taking vitamins; 'take' is appropriate.",
                    "context": "I have a routine to stay healthy. I take vitamins every month. This helps me maintain my energy levels."
                },
                {
                    "original": "I feel more aggressive, something like that.",
                    "corrected": "I feel more aggressive, something like that.",
                    "explanation": "The phrase 'more aggressive' is vague; it could be clarified to specify feelings or behaviors.",
                    "context": "Sometimes, I notice changes in my mood. I feel more aggressive, something like that. It's interesting how vitamins can affect my emotions."
                },
                {
                    "original": "For example, usually I can be more, I don't know.",
                    "corrected": "For example, usually I can feel more, I don't know.",
                    "explanation": "'Can be more' is incorrect; 'can feel more' is the correct expression of emotion.",
                    "context": "I often reflect on how I feel. For example, usually I can feel more, I don't know, energetic or motivated when I take my vitamins."
                },
                {
                    "original": "Remember something's more better.",
                    "corrected": "Remember things better.",
                    "explanation": "'Something's more better' is incorrect; 'better' is already comparative, and 'things' should be used instead of 'something's.'",
                    "context": "I find that my focus improves with certain habits. I remember things better. This helps me in school."
                },
                {
                    "original": "I read a little. If I didn't, if I did nothing in school tomorrow, I was really bad.",
                    "corrected": "I read a little. If I hadn't done anything in school tomorrow, I would have felt really bad.",
                    "explanation": "The conditional structure is incorrect; 'hadn't done' and 'would have felt' are needed for proper grammar.",
                    "context": "I try to keep up with my studies even when I'm sick. I read a little. If I hadn't done anything in school tomorrow, I would have felt really bad."
                },
                {
                    "original": "Maybe you know? Yeah. Yeah. Yeah.",
                    "corrected": "Maybe you know it? Yeah. Yeah. Yeah.",
                    "explanation": "The sentence lacks clarity; adding 'it' makes it clearer what is being referenced.",
                    "context": "I often mention things I enjoy. Maybe you know it? Yeah. Yeah. Yeah. It's nice to share interests."
                },
                {
                    "original": "I can listen from K-pop to Rammstein.",
                    "corrected": "I can listen to anything from K-pop to Rammstein.",
                    "explanation": "The preposition 'to' is missing; 'listen to' is the correct phrase.",
                    "context": "My music taste is quite diverse. I can listen to anything from K-pop to Rammstein. It really depends on my mood."
                },
                {
                    "original": "I kind of... Like I can relate to them to some extent.",
                    "corrected": "I kind of... Like I can relate to them to some degree.",
                    "explanation": "'To some extent' is correct but 'to some degree' is more idiomatic in this context.",
                    "context": "When I talk about music with others, I feel a connection. I kind of... Like I can relate to them to some degree. It's a shared experience."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "We just go back to the children and spend our time here.",
                    "corrected": "We just go back to the classroom and spend our time there.",
                    "explanation": "The term 'children' is incorrect in this context; it should refer to the 'classroom' where they spend their time.",
                    "context": "In school, during PE lessons, we didn't want to participate. We just go back to the classroom and spend our time there. It was more comfortable for us."
                },
                {
                    "original": "We will have proof.",
                    "corrected": "We will have proof of our work.",
                    "explanation": "The phrase is incomplete; it needs to specify what the proof is related to.",
                    "context": "When we asked the teacher to let us do our homework instead of attending PE, we insisted that we will have proof of our work. We wanted to show we were serious."
                },
                {
                    "original": "Your minds? Marks.",
                    "corrected": "Your grades? Marks.",
                    "explanation": "'Minds' is incorrect; the correct term in this context is 'grades' or 'marks' to refer to academic scores.",
                    "context": "We were discussing our academic performance. Your grades? Marks. I have a 4.20 average, while my classmate has a 4.80."
                },
                {
                    "original": "But she's not higher than me.",
                    "corrected": "But she's taller than me.",
                    "explanation": "'Not higher' is awkward; 'taller' is the correct comparative form for height.",
                    "context": "We were comparing our heights. But she's taller than me. I think she's around 170 centimeters."
                },
                {
                    "original": "I don't know really how high, truth, but I remember she measured 172.",
                    "corrected": "I don't really know how tall she is, but I remember she measured 172.",
                    "explanation": "The phrase 'how high, truth' is awkward; it should be 'how tall she is' for clarity.",
                    "context": "When discussing our heights, I said, I don't really know how tall she is, but I remember she measured 172 centimeters."
                },
                {
                    "original": "Like, does she like to read?",
                    "corrected": "Does she like to read?",
                    "explanation": "The word 'like' at the beginning is unnecessary and informal; the sentence is clear without it.",
                    "context": "I was curious about my friend's interests. Does she like to read? I know she reads fanfics."
                },
                {
                    "original": "This is actually an amazing app.",
                    "corrected": "This is actually an amazing app for creating stories.",
                    "explanation": "The sentence is vague; adding 'for creating stories' clarifies the app's purpose.",
                    "context": "I was explaining a useful app to my friend. This is actually an amazing app for creating stories and helps with studying."
                },
                {
                    "original": "So there is no, for example, Pasha eat apple yesterday.",
                    "corrected": "So there are no sentences like 'Pasha ate an apple yesterday.'",
                    "explanation": "The original sentence is grammatically incorrect; it should use 'are' for plural and 'ate' for past tense.",
                    "context": "I was discussing the quality of sentences generated by the AI. So there are no sentences like 'Pasha ate an apple yesterday.' They are well-structured."
                },
                {
                    "original": "You can call.",
                    "corrected": "You can make a call.",
                    "explanation": "'You can call' is incomplete; 'make a call' is a more idiomatic expression.",
                    "context": "We were talking about the app's features. You can make a call and chat by voice with the AI."
                },
                {
                    "original": "No, how do we call these people who we have in our story, like heroes in our... Characters.",
                    "corrected": "No, how do we call these people in our story, like heroes? Characters.",
                    "explanation": "The original sentence is awkward and unclear; restructuring it improves clarity.",
                    "context": "We were discussing story elements. No, how do we call these people in our story, like heroes? Characters."
                },
                {
                    "original": "And this text is divided into... Visions.",
                    "corrected": "And this text is divided into... Sections.",
                    "explanation": "'Visions' is incorrect; the correct term is 'sections' to describe parts of a text.",
                    "context": "We were analyzing the structure of a book. And this text is divided into... Sections, like chapters."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "I have a priority for English because in Russian, if you will have a talk with characters more than in our book, for example, they will start to glitch a little.",
                    "corrected": "I prioritize English because in Russian, if you talk with characters more than in our book, for example, they start to glitch a little.",
                    "explanation": "The phrase 'I have a priority for English' is awkward; 'I prioritize English' is more natural. Additionally, 'if you will have a talk' should be 'if you talk' for correct tense usage.",
                    "context": "I find that I focus more on English. I prioritize English because in Russian, if you talk with characters more than in our book, for example, they start to glitch a little. It's a strange phenomenon that doesn't happen in English."
                },
                {
                    "original": "I made this fanfic with the app, but in fact, if I read just read one, I read no more than four.",
                    "corrected": "I made this fanfic with the app, but actually, if I read one, I read no more than four.",
                    "explanation": "The phrase 'in fact, if I read just read one' is redundant and awkward; 'actually, if I read one' is clearer and more concise.",
                    "context": "I created a fanfic using an app. I made this fanfic with the app, but actually, if I read one, I read no more than four. I didn't find them very engaging."
                },
                {
                    "original": "I just couldn't settle on it.",
                    "corrected": "I just couldn't get into it.",
                    "explanation": "'Settle on it' is not idiomatic in this context; 'get into it' is a more common way to express difficulty in engaging with something.",
                    "context": "I found the story quite strange. I just couldn't get into it. It was hard for me to enjoy the fanfic."
                },
                {
                    "original": "Like, for example, someone can ship a snake, I met already 60 years old man with Harry, who isn't even upper 80s.",
                    "corrected": "For example, someone can ship a snake with a 60-year-old man with Harry, who isn't even in his 80s.",
                    "explanation": "The phrase 'I met already 60 years old man' is awkward; it should be 'a 60-year-old man.' Also, 'upper 80s' is incorrect; 'in his 80s' is the correct expression.",
                    "context": "I find some fanfics really bizarre. For example, someone can ship a snake with a 60-year-old man with Harry, who isn't even in his 80s. It's just too strange for me."
                },
                {
                    "original": "Because you know, the story goes that starting from some time, starting from some year or some century, like mages were forced to actually hide from muggles.",
                    "corrected": "Because you know, the story goes that starting from a certain time, mages were forced to hide from muggles.",
                    "explanation": "The phrase 'starting from some time, starting from some year or some century' is redundant; 'starting from a certain time' is sufficient.",
                    "context": "The lore is quite fascinating. Because you know, the story goes that starting from a certain time, mages were forced to hide from muggles. It reflects the historical tension between the two groups."
                },
                {
                    "original": "In fact, rules are to make your hand up like that.",
                    "corrected": "In fact, the rules say to raise your hand like that.",
                    "explanation": "'Rules are to make your hand up' is awkward; 'the rules say to raise your hand' is clearer and more idiomatic.",
                    "context": "Classroom behavior can be quite strict. In fact, the rules say to raise your hand like that. It's a way to maintain order."
                },
                {
                    "original": "I don't know really. Since the first grade I... For me it was not good.",
                    "corrected": "I don't really know. Since the first grade, it hasn't been good for me.",
                    "explanation": "The phrase 'For me it was not good' is awkward; 'it hasn't been good for me' is more natural.",
                    "context": "Reflecting on my school experience, I don't really know. Since the first grade, it hasn't been good for me. I struggled to enjoy it."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "If I'll hear something on this history lesson I'll remember it very good.",
                    "corrected": "If I hear something in this history lesson, I'll remember it very well.",
                    "explanation": "'If I'll hear' is incorrect; it should be 'If I hear.' Additionally, 'very good' should be 'very well' to describe the verb 'remember.'",
                    "context": "I find history lessons engaging, and I often remember what I learn. If I hear something in this history lesson, I'll remember it very well. I just wish I could explore more topics."
                },
                {
                    "original": "I just understand these topics really nice.",
                    "corrected": "I just understand these topics really well.",
                    "explanation": "'Really nice' is incorrect; 'well' should be used to describe the verb 'understand.'",
                    "context": "I enjoy learning about different historical topics. I just understand these topics really well. It helps me connect with the material better."
                },
                {
                    "original": "But, less-minus, I was able.",
                    "corrected": "But, all in all, I was able.",
                    "explanation": "'Less-minus' is not a standard phrase; 'all in all' is more appropriate to convey the overall idea.",
                    "context": "I wasn't fully prepared for the test, but I managed to do okay. But, all in all, I was able to write a decent essay. I think I could have done better with more preparation."
                },
                {
                    "original": "In dressing room it's only for B lesson.",
                    "corrected": "In the dressing room, it's only for B lessons.",
                    "explanation": "Missing article 'the' and incorrect plural form; 'B lesson' should be 'B lessons' to indicate multiple instances.",
                    "context": "After class, I prefer to stay in the dressing room. In the dressing room, it's only for B lessons. It helps me avoid the crowd outside."
                },
                {
                    "original": "Because in common dressing near exit there are so many people.",
                    "corrected": "Because in the common dressing room near the exit, there are so many people.",
                    "explanation": "Missing article 'the' and 'common dressing' should be 'common dressing room' for clarity.",
                    "context": "After school, I often hang out in the dressing room. Because in the common dressing room near the exit, there are so many people. It's just easier to relax there."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Open House Day",
                    "definition": "An event where a school or university invites prospective students to visit and learn about programs and facilities.",
                    "context": {
                        "Context 1": "Today is Open House Day at the university, and I want to learn about different faculties.",
                        "Context 2": "The Open House Day at the zoo allowed families to see behind-the-scenes animal care.",
                        "Context 3": "During Open House Day, the bakery offered free samples of their new pastries."
                    }
                },
                {
                    "word": "Faculty",
                    "definition": "A group of academic departments in a college or university, or the teaching staff of a school.",
                    "context": {
                        "Context 1": "I want to learn about the different faculties at the university, like biology and chemistry.",
                        "Context 2": "The faculty of the art school organized an exhibition of student works.",
                        "Context 3": "At the faculty of engineering, students designed innovative solutions for urban problems."
                    }
                },
                {
                    "word": "Biology",
                    "definition": "The scientific study of life and living organisms.",
                    "context": {
                        "Context 1": "I am interested in studying biology, especially bioengineering.",
                        "Context 2": "The biology of plants can reveal how they adapt to different environments.",
                        "Context 3": "In biology class, we learned about the human body's systems and functions."
                    }
                },
                {
                    "word": "Ill",
                    "definition": "Suffering from a disease or not feeling well.",
                    "context": {
                        "Context 1": "I was ill and didn't go to school for a whole week.",
                        "Context 2": "He felt ill after eating too much candy at the party.",
                        "Context 3": "The ill puppy needed to see a veterinarian immediately."
                    }
                },
                {
                    "word": "Immunity",
                    "definition": "The ability of an organism to resist infection or disease.",
                    "context": {
                        "Context 1": "Taking vitamins helps to keep my immunity strong.",
                        "Context 2": "Vaccines are designed to boost immunity against specific diseases.",
                        "Context 3": "A healthy diet can enhance your body's immunity to common colds."
                    }
                },
                {
                    "word": "Vitamin",
                    "definition": "Organic compounds that are essential for normal growth and nutrition, typically obtained from the diet.",
                    "context": {
                        "Context 1": "I start taking vitamins every month to support my health.",
                        "Context 2": "Some people take vitamin D supplements during the winter months.",
                        "Context 3": "The doctor recommended a vitamin-rich diet to improve my energy levels."
                    }
                },
                {
                    "word": "Recover",
                    "definition": "To return to a normal state of health, mind, or strength after an illness or difficult situation.",
                    "context": {
                        "Context 1": "I recovered quickly after being ill for a week.",
                        "Context 2": "The athlete worked hard to recover from his injury before the next game.",
                        "Context 3": "After the storm, the town took months to recover from the damage."
                    }
                },
                {
                    "word": "Aggressive",
                    "definition": "Ready or likely to attack or confront; characterized by or resulting from aggression.",
                    "context": {
                        "Context 1": "With vitamins, I feel less aggressive and more active.",
                        "Context 2": "The aggressive dog barked loudly at strangers passing by.",
                        "Context 3": "In business, aggressive marketing strategies can lead to increased sales."
                    }
                },
                {
                    "word": "Stage",
                    "definition": "A particular point or period in a process or development.",
                    "context": {
                        "Context 1": "There are stages of illness, and I felt better after the hardest stage.",
                        "Context 2": "The play has three stages, each representing a different time in the character's life.",
                        "Context 3": "In the cooking process, the marinating stage is crucial for flavor."
                    }
                },
                {
                    "word": "Fanfic",
                    "definition": "A fictional story written by fans of an original work, using its characters and settings.",
                    "context": {
                        "Context 1": "I read a fanfic based on a popular book series this week.",
                        "Context 2": "The fanfic community is vibrant, with many writers sharing their stories online.",
                        "Context 3": "Some fanfics have gained popularity and inspired official adaptations."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Biology",
                    "fact": "Did you know that octopuses have three hearts? Two pump blood to the gills, while one pumps it to the rest of the body!"
                },
                {
                    "word": "Vitamin",
                    "fact": "The word 'vitamin' comes from 'vital amine,' as they were originally thought to be amines essential for life!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the biology book look so sad?",
                    "answer": "Because it had too many problems!"
                },
                {
                    "question": "What did the vitamin say to the mineral?",
                    "answer": "You’re looking a little salty today!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Connection",
                    "definition": "A relationship or link between people, ideas, or things.",
                    "context": {
                        "Context 1": "The music creates a strong connection between the audience and the performers.",
                        "Context 2": "I felt a deep connection to the character in the book after reading her story.",
                        "Context 3": "The connection between the two cities is strengthened by the new train line."
                    }
                },
                {
                    "word": "Choreographed",
                    "definition": "Planned and arranged the movements of a dance or performance.",
                    "context": {
                        "Context 1": "The girls in my class choreographed a dance routine for the school talent show.",
                        "Context 2": "The choreographed fight scenes in the movie were impressive.",
                        "Context 3": "He choreographed a beautiful ballet that was performed at the theater."
                    }
                },
                {
                    "word": "Vibe",
                    "definition": "A distinctive emotional atmosphere or feeling.",
                    "context": {
                        "Context 1": "We really have some of the same vibe when it comes to music.",
                        "Context 2": "The café had a relaxed vibe that made it perfect for studying.",
                        "Context 3": "She gives off a positive vibe that makes everyone feel welcome."
                    }
                },
                {
                    "word": "Marks",
                    "definition": "Scores or grades given for academic performance.",
                    "context": {
                        "Context 1": "Our marks in school can sometimes reflect our understanding of the subjects.",
                        "Context 2": "He received high marks on his final exam.",
                        "Context 3": "The teacher gave marks for participation in class discussions."
                    }
                },
                {
                    "word": "Height",
                    "definition": "The measurement of someone or something from base to top.",
                    "context": {
                        "Context 1": "She is much taller than me; her height is 170 centimeters.",
                        "Context 2": "The height of the mountain is impressive, reaching over 3,000 meters.",
                        "Context 3": "He measured the height of the building before starting the renovation."
                    }
                },
                {
                    "word": "Fanfic",
                    "definition": "A fictional story created by fans of a particular work, often featuring its characters.",
                    "context": {
                        "Context 1": "I use an app to create fanfics based on my favorite books.",
                        "Context 2": "She enjoys reading fanfic about popular TV shows.",
                        "Context 3": "The fanfic community is vibrant and filled with creative writers."
                    }
                },
                {
                    "word": "AI (Artificial Intelligence)",
                    "definition": "The simulation of human intelligence processes by machines, especially computer systems.",
                    "context": {
                        "Context 1": "The AI in the app can help you write essays and generate ideas.",
                        "Context 2": "AI is being used in various industries to improve efficiency.",
                        "Context 3": "Some people are concerned about the ethical implications of AI."
                    }
                },
                {
                    "word": "Characters",
                    "definition": "The individuals in a story, play, or movie.",
                    "context": {
                        "Context 1": "In my fanfic, I created new characters to interact with the original ones.",
                        "Context 2": "The characters in the novel were well-developed and relatable.",
                        "Context 3": "He enjoys drawing characters from his favorite anime."
                    }
                },
                {
                    "word": "Chapter",
                    "definition": "A division of a book, usually with a number or title.",
                    "context": {
                        "Context 1": "The book is divided into several chapters, each telling a different part of the story.",
                        "Context 2": "I can't wait to read the next chapter of this thrilling novel.",
                        "Context 3": "Each chapter begins with a quote that sets the tone for the content."
                    }
                },
                {
                    "word": "Contents",
                    "definition": "The list of chapters or sections in a book, usually found at the beginning.",
                    "context": {
                        "Context 1": "We will look at the contents of the book to find the chapter we need.",
                        "Context 2": "The contents of the box were a surprise for the birthday party.",
                        "Context 3": "She organized the contents of her backpack before heading to class."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Vibe",
                    "fact": "Did you know that the word 'vibe' originally comes from 'vibration'? It’s all about those good feelings!"
                },
                {
                    "word": "AI",
                    "fact": "AI can now write poetry and even create art! Imagine a robot trying to express its feelings!"
                },
                {
                    "word": "Fanfic",
                    "fact": "Some fanfics are so popular that they have inspired real movies and TV shows!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the music teacher go to jail?",
                    "answer": "Because she got caught with too many sharp notes!"
                },
                {
                    "question": "Why did the student bring a ladder to school?",
                    "answer": "Because they wanted to go to high school!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Fanfic",
                    "definition": "A type of fiction written by fans of a particular work, often using its characters and settings.",
                    "context": {
                        "Context 1": "I read a fanfic about Harry Potter that had a unique twist on the original story.",
                        "Context 2": "She enjoys writing fanfic based on her favorite TV shows.",
                        "Context 3": "The fanfic community is vibrant, with many writers sharing their stories online."
                    }
                },
                {
                    "word": "Glitch",
                    "definition": "A sudden malfunction or irregularity in a system.",
                    "context": {
                        "Context 1": "The game started to glitch, causing characters to behave strangely.",
                        "Context 2": "My computer had a glitch that made it freeze during an important presentation.",
                        "Context 3": "Sometimes, glitches in the matrix can lead to unexpected surprises."
                    }
                },
                {
                    "word": "Ship",
                    "definition": "To support or endorse a romantic relationship between fictional characters.",
                    "context": {
                        "Context 1": "I ship Harry and Hermione because I think they would make a great couple.",
                        "Context 2": "Fans often ship characters from different series, creating unique crossover stories.",
                        "Context 3": "In the fandom, many people ship the main character with the villain."
                    }
                },
                {
                    "word": "Muggle",
                    "definition": "A person who lacks knowledge or experience in a particular area, especially in magic.",
                    "context": {
                        "Context 1": "In the Harry Potter universe, muggles are non-magical people.",
                        "Context 2": "He felt like a muggle when trying to understand advanced computer programming.",
                        "Context 3": "At the magic show, the magician joked about how muggles never see the tricks coming."
                    }
                },
                {
                    "word": "Trauma",
                    "definition": "A deeply distressing or disturbing experience.",
                    "context": {
                        "Context 1": "After reading that fanfic, I felt a bit of trauma from the unexpected plot twist.",
                        "Context 2": "The trauma of losing a loved one can take a long time to heal.",
                        "Context 3": "He experienced trauma after the car accident, which affected his daily life."
                    }
                },
                {
                    "word": "Victorian",
                    "definition": "Relating to the period of Queen Victoria's reign, characterized by strict social norms.",
                    "context": {
                        "Context 1": "The story was set in a Victorian era, with all its unique customs and fashion.",
                        "Context 2": "She loves reading Victorian novels because of their intricate plots.",
                        "Context 3": "The museum had a Victorian exhibit showcasing life in the 19th century."
                    }
                },
                {
                    "word": "Chill",
                    "definition": "To relax or spend time in a laid-back manner.",
                    "context": {
                        "Context 1": "We decided to chill at the hotel for a couple of days after the competition.",
                        "Context 2": "On weekends, I like to chill with friends and watch movies.",
                        "Context 3": "He prefers to chill at home rather than go out to parties."
                    }
                },
                {
                    "word": "Competition",
                    "definition": "An event in which people compete against each other for a prize.",
                    "context": {
                        "Context 1": "Our class participated in an English singing competition last year.",
                        "Context 2": "The competition for the best science project was intense this year.",
                        "Context 3": "She won first place in the baking competition at the local fair."
                    }
                },
                {
                    "word": "Rules",
                    "definition": "Explicit or understood regulations or principles governing conduct within a particular activity.",
                    "context": {
                        "Context 1": "In class, we have rules about raising hands to speak.",
                        "Context 2": "The rules of the game were explained before we started playing.",
                        "Context 3": "He broke the rules of the road and got pulled over by the police."
                    }
                },
                {
                    "word": "Overturn",
                    "definition": "To reverse a decision or situation.",
                    "context": {
                        "Context 1": "They planned to overturn the government's decision with a protest.",
                        "Context 2": "The court's ruling could overturn years of legal precedent.",
                        "Context 3": "In the movie, the hero works to overturn the villain's evil plans."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Fanfic",
                    "fact": "Some fanfics are so popular that they get turned into real books or movies!"
                },
                {
                    "word": "Muggle",
                    "fact": "The term 'muggle' was popularized by the Harry Potter series, but it originally referred to a type of marijuana!"
                },
                {
                    "word": "Glitch",
                    "fact": "The term 'glitch' comes from the Yiddish word 'glitshen,' which means to slip or slide!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the wizard break up with his girlfriend?",
                    "answer": "Because she had too many muggle problems!"
                },
                {
                    "question": "Why don’t ghosts like to go out in the rain?",
                    "answer": "Because it dampens their spirits!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Reliable",
                    "definition": "Consistently good in quality or performance; able to be trusted.",
                    "context": {
                        "Context 1": "The information presented in school history books is not always reliable.",
                        "Context 2": "My car is very reliable; it has never broken down on me.",
                        "Context 3": "When choosing a doctor, it's important to find someone who is reliable and experienced."
                    }
                },
                {
                    "word": "Concept",
                    "definition": "An abstract idea or a general notion.",
                    "context": {
                        "Context 1": "The concept of teamwork was emphasized during our history lesson.",
                        "Context 2": "She developed a new concept for her art project that combines technology and nature.",
                        "Context 3": "The concept of time travel has fascinated scientists and writers for decades."
                    }
                },
                {
                    "word": "Evidence",
                    "definition": "The available body of facts or information indicating whether a belief or proposition is true or valid.",
                    "context": {
                        "Context 1": "There are many facts in history books that are not supported by any evidence.",
                        "Context 2": "The detective gathered evidence to solve the mystery of the missing jewels.",
                        "Context 3": "In science class, we learned how to collect evidence for our experiments."
                    }
                },
                {
                    "word": "Grasp",
                    "definition": "To understand something fully.",
                    "context": {
                        "Context 1": "I have the ability to grasp information quickly after learning it.",
                        "Context 2": "He struggled to grasp the concept of gravity in his physics class.",
                        "Context 3": "After reading the book, she finally grasped the main themes of the story."
                    }
                },
                {
                    "word": "Chill",
                    "definition": "To relax or calm down.",
                    "context": {
                        "Context 1": "After passing the control tests, I can just chill in class.",
                        "Context 2": "On weekends, I like to chill at home and watch movies.",
                        "Context 3": "The dog loves to chill in the sun on the porch."
                    }
                },
                {
                    "word": "Boredom",
                    "definition": "The state of feeling weary and restless due to lack of interest.",
                    "context": {
                        "Context 1": "Learning about events from the past can sometimes lead to boredom.",
                        "Context 2": "He tried to fight off boredom by playing video games all weekend.",
                        "Context 3": "Boredom can sometimes inspire creativity, leading to new ideas."
                    }
                },
                {
                    "word": "Advantage",
                    "definition": "A condition or circumstance that puts one in a favorable or superior position.",
                    "context": {
                        "Context 1": "The automatic passing of control tests is a cool advantage for students with good marks.",
                        "Context 2": "Having a supportive family can be a great advantage in life.",
                        "Context 3": "She took advantage of the sale to buy new clothes."
                    }
                },
                {
                    "word": "Prepared",
                    "definition": "Ready for use or consideration; equipped with necessary information or skills.",
                    "context": {
                        "Context 1": "I wasn't prepared for the history test because I missed the lesson.",
                        "Context 2": "He was well prepared for the job interview and answered all questions confidently.",
                        "Context 3": "The chef prepared a delicious meal for the guests."
                    }
                },
                {
                    "word": "Mark",
                    "definition": "A score or grade given to a student's work.",
                    "context": {
                        "Context 1": "I got a B mark on my history essay.",
                        "Context 2": "The teacher gave me a high mark for my art project.",
                        "Context 3": "He was disappointed with his mark on the math test."
                    }
                },
                {
                    "word": "Control Test",
                    "definition": "An assessment used to evaluate a student's understanding of a subject.",
                    "context": {
                        "Context 1": "If you have less than two B marks, you must write the control test.",
                        "Context 2": "The control test in science was challenging but fair.",
                        "Context 3": "She studied hard for the control test to improve her grade."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Reliable",
                    "fact": "Did you know that the word 'reliable' comes from the Latin 'religere,' which means 'to tie back'? So, when something is reliable, it ties back to its promise!"
                },
                {
                    "word": "Chill",
                    "fact": "The term 'chill' was originally used in the 1950s to describe a cool temperature, but now it describes a laid-back attitude!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the history teacher go to jail?",
                    "answer": "Because he had too many 'unreliable' sources!"
                },
                {
                    "question": "Why did the student bring a ladder to school?",
                    "answer": "Because they wanted to go to high school!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just getting ready for the day. How about you?"
                },
                {
                    "Person 1": "Same here! I have a meeting later, so I’m trying to get everything done before that."
                },
                {
                    "Person 2": "Oh, nice! What’s the meeting about?"
                },
                {
                    "Person 1": "It’s about a project I’m working on for school. We’re discussing some new ideas."
                },
                {
                    "Person 2": "Sounds interesting! What kind of project is it?"
                },
                {
                    "Person 1": "It’s about exploring different career paths in science. I’m really curious about bioengineering."
                },
                {
                    "Person 2": "Bioengineering? That sounds cool! Are you thinking of studying that?"
                },
                {
                    "Person 1": "Maybe! I just want to learn more about it and see if it’s a good fit for me."
                },
                {
                    "Person 2": "That’s smart! I think it’s great to explore your options."
                },
                {
                    "Person 1": "Yeah, I feel like there’s so much out there. I want to make sure I choose the right path."
                },
                {
                    "Person 2": "For sure! I remember when I was trying to decide what to study, it felt overwhelming."
                },
                {
                    "Person 1": "Exactly! And then you hear about all these different programs and it just adds to the confusion."
                },
                {
                    "Person 2": "Right? But it’s also exciting to think about all the possibilities."
                },
                {
                    "Person 1": "Totally! So, how was your week? Did you do anything fun?"
                },
                {
                    "Person 2": "Not much, just caught up on some shows and hung out with friends. What about you?"
                },
                {
                    "Person 1": "I’ve been pretty busy with schoolwork, but I did manage to binge a new series last weekend."
                },
                {
                    "Person 2": "Nice! What series?"
                },
                {
                    "Person 1": "It’s called 'The Midnight Club.' It’s a bit spooky but really good!"
                },
                {
                    "Person 2": "I’ve heard of that! I need to check it out. I love a good thriller."
                },
                {
                    "Person 1": "You should! It keeps you on the edge of your seat."
                },
                {
                    "Person 2": "I’m in! I’ll add it to my watchlist. Any other recommendations?"
                },
                {
                    "Person 1": "Definitely! If you like thrillers, you might enjoy 'Stranger Things' too."
                },
                {
                    "Person 2": "Oh, I love that show! I can’t wait for the next season."
                },
                {
                    "Person 1": "Same here! It’s going to be epic."
                },
                {
                    "Person 2": "Alright, I should let you get back to your meeting prep. Good luck!"
                },
                {
                    "Person 1": "Thanks! I’ll need it. Catch you later?"
                },
                {
                    "Person 2": "For sure! Let’s chat soon."
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you seen the latest episode of that new Sherlock series?"
                },
                {
                    "Person 2": "Not yet! I’ve heard it’s really good, though. I might binge-watch it this weekend."
                },
                {
                    "Person 1": "You definitely should! The plot twists are insane. It keeps you guessing."
                },
                {
                    "Person 2": "I love a good mystery! I usually get hooked on shows like that."
                },
                {
                    "Person 1": "Same here! Speaking of shows, have you been listening to any new music lately?"
                },
                {
                    "Person 2": "Yeah! I’ve been getting into K-pop. BTS and BLACKPINK are my favorites right now."
                },
                {
                    "Person 1": "Nice! I’ve heard a lot about them. Do you have a favorite song?"
                },
                {
                    "Person 2": "Definitely! 'Dynamite' is such a catchy tune. It always puts me in a good mood."
                },
                {
                    "Person 1": "I need to check that out. I usually stick to rock music, but I’m open to trying new stuff."
                },
                {
                    "Person 2": "You should! It’s fun to mix things up. Plus, it’s great to share music with friends."
                },
                {
                    "Person 1": "For sure! By the way, do you ever go to concerts?"
                },
                {
                    "Person 2": "I do! I went to a concert last month, and it was amazing. The energy was unreal!"
                },
                {
                    "Person 1": "That sounds awesome! I’ve been wanting to go to one. Who did you see?"
                },
                {
                    "Person 2": "I saw a local band. They were really good! I love supporting local music."
                },
                {
                    "Person 1": "That’s cool! I should look into local shows. It’s a great way to discover new artists."
                },
                {
                    "Person 2": "Absolutely! Let’s keep an eye out for some together. It’ll be fun!"
                },
                {
                    "Person 1": "Definitely! I’m looking forward to it."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you catch that new series everyone's talking about?"
                },
                {
                    "Person 2": "Oh, you mean the one with the time travel? Yeah, I just started watching it!"
                },
                {
                    "Person 1": "Nice! What do you think so far?"
                },
                {
                    "Person 2": "I love it! The plot twists are wild. I didn’t see that coming in the first episode."
                },
                {
                    "Person 1": "Right? I was like, 'No way!' when they revealed that character's secret."
                },
                {
                    "Person 2": "Exactly! And the way they mix history with fiction is so cool. It makes you think."
                },
                {
                    "Person 1": "Totally! I always wondered how different things would be if certain events had gone differently."
                },
                {
                    "Person 2": "Same here! I mean, imagine if we could actually go back and change something."
                },
                {
                    "Person 1": "That would be crazy! But I feel like it would mess everything up."
                },
                {
                    "Person 2": "Yeah, like the butterfly effect. One small change could lead to a huge difference."
                },
                {
                    "Person 1": "Exactly! I think it’s better to just enjoy the stories and not think too hard about it."
                },
                {
                    "Person 2": "For sure! Speaking of stories, have you read any good books lately?"
                },
                {
                    "Person 1": "I just finished a mystery novel. It kept me guessing until the last page!"
                },
                {
                    "Person 2": "Nice! I love a good mystery. Who's the author?"
                },
                {
                    "Person 1": "It's by that new writer, Sarah Johnson. I think you’d really like it."
                },
                {
                    "Person 2": "I’ll have to check it out! I’m always looking for new recommendations."
                },
                {
                    "Person 1": "Definitely! Let me know what you think once you read it."
                },
                {
                    "Person 2": "Will do! And maybe we can discuss it over coffee?"
                },
                {
                    "Person 1": "Sounds like a plan! I’m in."
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you ever have to sit through boring history classes in school?"
                },
                {
                    "Person 2": "Oh, definitely! I remember just zoning out when they started talking about stuff that happened centuries ago."
                },
                {
                    "Person 1": "Right? Like, why should I care about what happened in Mexico in the 1600s?"
                },
                {
                    "Person 2": "Exactly! But some parts were interesting. I actually liked learning about certain events."
                },
                {
                    "Person 1": "Same here! I think it depends on the teacher too. If they make it engaging, it’s way better."
                },
                {
                    "Person 2": "For sure! I had a teacher who made history feel like an adventure. I actually looked forward to those classes."
                },
                {
                    "Person 1": "That’s awesome! I remember getting decent grades in history, but I always wondered how reliable the info was."
                },
                {
                    "Person 2": "Yeah, I felt that too. Sometimes it seemed like there was no solid evidence for what we were learning."
                },
                {
                    "Person 1": "Exactly! I tried to dig up facts on my own, but it was tough to keep up."
                },
                {
                    "Person 2": "I get that! I once had to write an essay for a test without really studying. I just used my notes and somehow got a B!"
                },
                {
                    "Person 1": "Nice! That’s impressive! I always felt like I could grasp things quickly, but tests were still nerve-wracking."
                },
                {
                    "Person 2": "Totally! But I loved that our teacher let us skip tests if we had good grades. It felt like a reward."
                },
                {
                    "Person 1": "That’s a great system! I would’ve loved to just chill while others were stressing over tests."
                },
                {
                    "Person 2": "Yeah, it was the best! So, what are you up to this week? Any plans?"
                },
                {
                    "Person 1": "I might start watching Sherlock. Have you seen it?"
                },
                {
                    "Person 2": "I’ve heard great things! I’ll try to check it out too if I have time."
                },
                {
                    "Person 1": "Cool! Let’s compare notes after the first episode!"
                },
                {
                    "Person 2": "Sounds like a plan! Enjoy your week!"
                },
                {
                    "Person 1": "You too! Bye!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
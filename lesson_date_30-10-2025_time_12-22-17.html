<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "But that's because, because she work not in Moscow.",
                    "corrected": "But that's because she doesn't work in Moscow.",
                    "explanation": "The verb 'work' should be preceded by the auxiliary 'does' in negative form.",
                    "context": "I paid a lot for my hair because my stylist is very skilled. But that's because she doesn't work in Moscow."
                },
                {
                    "original": "I thought, what?",
                    "corrected": "I thought, 'What?'",
                    "explanation": "Direct thoughts need to be enclosed in quotation marks.",
                    "context": "I was surprised by how long the hair appointment took. I thought, 'What?' when I didnâ€™t see any changes in the mirror."
                },
                {
                    "original": "And I was a little bit surprised when I saw that because like we did it for four hours.",
                    "corrected": "I was a little surprised when I saw that because we had been doing it for four hours.",
                    "explanation": "The past perfect continuous 'had been doing' is more appropriate for emphasizing the duration of an action completed before another past action.",
                    "context": "After spending a long time at the salon, I expected to see more change. I was a little surprised when I saw that because we had been doing it for four hours."
                },
                {
                    "original": "There were any.",
                    "corrected": "There weren't any.",
                    "explanation": "'Were' is incorrect here without 'not'; it should be negated with 'weren't.'",
                    "context": "When we compared my essays, I was hoping to find significant improvements. But there weren't any."
                },
                {
                    "original": "Like, he's one of, I believe, the highest paying in Astana.",
                    "corrected": "I believe he's one of the highest-paid stylists in Astana.",
                    "explanation": "The adjective 'highest-paid' should hyphenate and not include 'one of' because it could suggest there are many described the same way.",
                    "context": "I found a highly recommended stylist for my haircut. I believe he's one of the highest-paid stylists in Astana."
                },
                {
                    "original": "But sometimes it can be muscles.",
                    "corrected": "But sometimes it can be just muscles.",
                    "explanation": "The word 'just' adds clarity in this context, emphasizing that the cause might not be serious.",
                    "context": "When discussing back pain, I mentioned that sometimes it can be just muscles. But it can indicate a more serious problem like the kidneys."
                },
                {
                    "original": "Yeah, I did.",
                    "corrected": "Yes, I did.",
                    "explanation": "'Yeah' is informal; 'yes' is more appropriate for academic or formal discussions.",
                    "context": "In our previous lesson, we discussed my essay. Yes, I did make some revisions."
                },
                {
                    "original": "But you know, sometimes after washing they become even better.",
                    "corrected": "But you know, sometimes after washing, they look even better.",
                    "explanation": "The verb 'look' is preferred for conveying visual improvement, and a comma is needed for clarity.",
                    "context": "I was talking about my hair after washing it. But you know, sometimes after washing, they look even better."
                },
                {
                    "original": "I have a sore throat after I have...",
                    "corrected": "I have a sore throat after my doctor said that I have...",
                    "explanation": "The construction is awkward; it should reflect reported speech for clarity.",
                    "context": "In discussing my health, I mentioned my recent symptoms. I have a sore throat after my doctor said that I have issues with my kidneys."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "This is our writing task to a steel.",
                    "corrected": "This is our writing task for a skill.",
                    "explanation": "'To a steel' is incorrect; 'for a skill' should be used to indicate the purpose of the task.",
                    "context": "We're focusing on the writing task for our skills development. This is our writing task for a skill. We're still discussing the essay format."
                },
                {
                    "original": "Why other countries prioritize public transport over fast trains?",
                    "corrected": "Why do other countries prioritize public transport over fast trains?",
                    "explanation": "The auxiliary verb 'do' is needed here to form a correct question.",
                    "context": "In the essay, we're examining different perspectives. We need to explore why other countries prioritize public transport over fast trains."
                },
                {
                    "original": "That is improving.",
                    "corrected": "That is an example of improving.",
                    "explanation": "The phrase lacks clarity; adding 'an example of' clarifies what is being referred to.",
                    "context": "We're discussing how to better public transport. That is an example of improving the public transport system we had in mind."
                },
                {
                    "original": "But there are many cities in Russia that are not connected by fast trains, which causes a lot of problems.",
                    "corrected": "But there are many cities in Russia that are not connected by fast trains, and that causes a lot of problems.",
                    "explanation": "The clause should use 'and' to connect suggestions logically.",
                    "context": "We're looking at the effects of inadequate train connections. But there are many cities in Russia that are not connected by fast trains, and that causes a lot of problems."
                },
                {
                    "original": "I would love to have a fast train from Astrakhan to Moscow.",
                    "corrected": "I would love to see a fast train from Astrakhan to Moscow.",
                    "explanation": "'To have' is less idiomatic; 'to see' conveys a desire to experience something.",
                    "context": "The lack of connections frustrates me. I would love to see a fast train from Astrakhan to Moscow to make travel easier."
                },
                {
                    "original": "What do you think is better?",
                    "corrected": "What do you think is the better option?",
                    "explanation": "The original phrasing is vague; specifying 'the better option' clarifies the question.",
                    "context": "We're debating transportation choices. What do you think is the better option when deciding between improving buses or building fast trains?"
                },
                {
                    "original": "Because of increased taxes.",
                    "corrected": "This is due to increased taxes.",
                    "explanation": "The original phrase is a sentence fragment and should be made into a complete sentence.",
                    "context": "We're discussing funding issues related to transit. This is due to increased taxes that affect affordability."
                },
                {
                    "original": "A metro ride or a bus ride, which is which is more more expensive?",
                    "corrected": "A metro ride or a bus ride, which is more expensive?",
                    "explanation": "The phrase has a repetition error ('which is which is'); it needs to be concise.",
                    "context": "We're comparing costs. A metro ride or a bus ride, which is more expensive?"
                },
                {
                    "original": "They need. I don't know. They need more metro lanes.",
                    "corrected": "They need more metro lanes.",
                    "explanation": "The earlier phrase is awkwardly fragmented; it can be streamlined for clarity.",
                    "context": "When discussing public transport needs, they need more metro lanes to accommodate the population."
                },
                {
                    "original": "I'm not going to say the same thing about me.",
                    "corrected": "I'm not going to speak from my own perspective anymore.",
                    "explanation": "'Say the same thing about me' is informal; 'speak from my own perspective' is clearer in this context.",
                    "context": "I recognized that I was focusing too much on my own opinion. I'm not going to speak from my own perspective anymore."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "And then no one will emphasize the words in which you accidentally missed one letter.",
                    "corrected": "And then no one will emphasize the words where you accidentally missed one letter.",
                    "explanation": "'In which' is incorrect here; 'where' better indicates a location in this context.",
                    "context": "You need to check your writing thoroughly. And then no one will emphasize the words where you accidentally missed one letter. It's important to be meticulous."
                },
                {
                    "original": "And it automatically fixes it.",
                    "corrected": "And it automatically fixes errors.",
                    "explanation": "The word 'it' is vague here; specifying 'errors' clarifies what is being fixed.",
                    "context": "We rely on technology a lot. And it automatically fixes errors. You should not depend solely on that."
                },
                {
                    "original": "Because at the end of November you will sit down and you will have a plan.",
                    "corrected": "Because at the end of November, you will sit down and have a plan.",
                    "explanation": "The second 'you will' is redundant; 'and have a plan' is sufficient.",
                    "context": "You need to start planning ahead. Because at the end of November, you will sit down and have a plan. This is crucial for your success."
                },
                {
                    "original": "And the TSC in which there are no 250 words.",
                    "corrected": "And the TSC where there are no 250 words.",
                    "explanation": "'In which' is not idiomatic; 'where' is the correct choice to indicate the place.",
                    "context": "It's important to meet word counts. And the TSC where there are no 250 words. Make sure you prepare well."
                },
                {
                    "original": "What about people who constantly travel between cities?",
                    "corrected": "What about people who frequently travel between cities?",
                    "explanation": "'Constantly' implies continuous action; 'frequently' better describes regular occurrences.",
                    "context": "People have different travel needs. What about people who frequently travel between cities? Their demands are crucial to consider."
                },
                {
                    "original": "Yes, because these trains, they will pollute our reserves there.",
                    "corrected": "Yes, because these trains will pollute our resources.",
                    "explanation": "The word 'reserves' is unsuitable here; 'resources' is more appropriate in this context.",
                    "context": "Ecology is important in transportation discussions. Yes, because these trains will pollute our resources. We must consider the environmental impact."
                },
                {
                    "original": "Some example that supports this.",
                    "corrected": "An example that supports this.",
                    "explanation": "'Some example' is non-idiomatic; 'an example' is the correct phrasing.",
                    "context": "To strengthen our argument, we need details. An example that supports this will make our points more convincing."
                },
                {
                    "original": "This is a cover issue.",
                    "corrected": "This is a crucial issue.",
                    "explanation": "'Cover issue' is unclear; 'crucial issue' is a more standard expression indicating importance.",
                    "context": "Understanding priorities is essential. This is a crucial issue that affects many decisions in transport policies."
                },
                {
                    "original": "But these are different ideas.",
                    "corrected": "But these are separate ideas.",
                    "explanation": "'Different' is vague; 'separate' clearly distinguishes the ideas.",
                    "context": "When writing, clarity is key. But these are separate ideas that cannot be conflated in your argument."
                },
                {
                    "original": "Here in the city everything is already arranged for you.",
                    "corrected": "Here in the city, everything is already set up for you.",
                    "explanation": "'Arranged' is slightly awkward; 'set up' conveys the meaning more naturally.",
                    "context": "In urban settings, infrastructure is crucial. Here in the city, everything is already set up for you to use."
                },
                {
                    "original": "It's not made up by you.",
                    "corrected": "It's not fabricated by you.",
                    "explanation": "'Made up' can imply fiction; 'fabricated' better suits the formal context.",
                    "context": "We need factual information. It's not fabricated by you; it needs to be based on reality."
                },
                {
                    "original": "Because it helps with their identity.",
                    "corrected": "Because it helps with their sense of identity.",
                    "explanation": "Adding 'sense of' clarifies what aspect of identity is being referred to.",
                    "context": "Identity is shaped by experience. Because it helps with their sense of identity, transport plays a crucial role in people's lives."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "you can see thousands of crowds of people",
                    "corrected": "you can see thousands of people",
                    "explanation": "'Thousands of crowds' is incorrect; it should simply be 'thousands of people' as 'crowds' is redundant.",
                    "context": "In the morning, I often take the subway. You can see thousands of people on the train."
                },
                {
                    "original": "this will be an example explanation is our attempt to explain facts",
                    "corrected": "this will be an example; the explanation is our attempt to clarify facts",
                    "explanation": "Missing punctuation and clarity; a semicolon separates two independent clauses.",
                    "context": "When presenting an idea, I often use examples. This will be an example; the explanation is my attempt to clarify facts."
                },
                {
                    "original": "the stations are very often half empty",
                    "corrected": "the stations are often half empty",
                    "explanation": "The word 'very' is unnecessary and adds redundancy; 'often' conveys sufficient frequency.",
                    "context": "During rush hour, the subway can be chaotic. However, the stations are often half empty compared to peak times."
                },
                {
                    "original": "now these facts will explain with a reference to the topic",
                    "corrected": "now we will explain these facts with a reference to the topic",
                    "explanation": "Incorrect word order and structure; 'now we will explain' is more appropriate.",
                    "context": "In my presentation, I need to clarify some points. Now we will explain these facts with a reference to the topic."
                },
                {
                    "original": "what does this fact give us in our idea",
                    "corrected": "what does this fact provide for our idea",
                    "explanation": "'Give us' can be replaced with 'provide for' for better clarity and formal tone.",
                    "context": "I often analyze data to build my arguments. What does this fact provide for our idea?"
                },
                {
                    "original": "this topic is a little bit of a write",
                    "corrected": "this topic is a little bit complex to write about",
                    "explanation": "The phrase 'a little bit of a write' is unclear; instead, 'complex to write about' conveys intention better.",
                    "context": "When discussing public transport, I find it challenging. This topic is a little bit complex to write about."
                },
                {
                    "original": "we need to invest money on transport public transport",
                    "corrected": "we need to invest money in public transport",
                    "explanation": "Use 'in' instead of 'on' with 'invest.' 'On' is incorrect in this context.",
                    "context": "As I've researched public services, I've come to a conclusion. We need to invest money in public transport."
                },
                {
                    "original": "the paragraph about transport in which countries different",
                    "corrected": "the paragraph about transport in different countries",
                    "explanation": "The structure 'in which countries different' is awkward and should be rephrased for clarity.",
                    "context": "In my essay, I discuss various transit systems. The paragraph is about transport in different countries."
                },
                {
                    "original": "this is, for example, relevant in some kind of China",
                    "corrected": "this is, for example, relevant in countries like China",
                    "explanation": "'Some kind of China' is incorrect; 'countries like China' is clearer and more idiomatic.",
                    "context": "When comparing transport systems, the examples vary. This is, for example, relevant in countries like China."
                },
                {
                    "original": "by buying new buses or building a new subway station this would make cities less overloaded",
                    "corrected": "buying new buses or building a new subway station would make cities less overloaded",
                    "explanation": "The sentence is a run-on; a clearer structure avoids run-on sentences.",
                    "context": "To ease congestion, we need solutions. Buying new buses or building a new subway station would make cities less overloaded."
                },
                {
                    "original": "and more livable for everyone more comfortable",
                    "corrected": "and more livable and comfortable for everyone",
                    "explanation": "The conjunction needs to be repeated for clarity; it separates distinct ideas.",
                    "context": "Ultimately, public investments can enhance quality of life. These changes would make cities more livable and comfortable for everyone."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Diagnosis",
                    "definition": "The identification of the nature of an illness or other problem by examining the symptoms.",
                    "context": {
                        "Context 1": "After a thorough examination, the doctor made a diagnosis of the patientâ€™s condition.",
                        "Context 2": "The detective's diagnosis of the crime scene led to the capture of the culprit.",
                        "Context 3": "Through trial and error, the chef found the perfect diagnosis for a new dish recipe."
                    }
                },
                {
                    "word": "Symptoms",
                    "definition": "A physical or mental feature that is regarded as indicating a condition of disease.",
                    "context": {
                        "Context 1": "The patient described her symptoms, leading the doctor to suggest further tests.",
                        "Context 2": "He showed symptoms of extreme tiredness after staying up late playing video games.",
                        "Context 3": "Despite his symptoms of excitement, he still managed to keep a straight face during the surprise party."
                    }
                },
                {
                    "word": "Chronic",
                    "definition": "A condition persisting for a long time or constantly recurring.",
                    "context": {
                        "Context 1": "Doctors often refer to conditions like asthma and diabetes as chronic diseases.",
                        "Context 2": "She has a chronic love for chocolate, always craving a piece after dinner.",
                        "Context 3": "The athlete's chronic need to win was evident in every match he played."
                    }
                },
                {
                    "word": "Curable",
                    "definition": "Able to be cured or healed.",
                    "context": {
                        "Context 1": "Doctors assured him that his illness was curable with proper treatment.",
                        "Context 2": "The curable nature of the curse meant that the wizard would eventually regain his powers.",
                        "Context 3": "The recipe for the curable potion was hidden deep within the ancient spellbook."
                    }
                },
                {
                    "word": "Condition",
                    "definition": "The state of something, often pertaining to health.",
                    "context": {
                        "Context 1": "The condition of her health improved after she followed the doctor's advice.",
                        "Context 2": "The old car was still in good condition despite its age.",
                        "Context 3": "This video game has a condition-based scenario where players must complete tasks under certain circumstances."
                    }
                },
                {
                    "word": "Sore",
                    "definition": "A feeling of pain or discomfort in a part of the body.",
                    "context": {
                        "Context 1": "He has a sore throat and needs to rest his voice.",
                        "Context 2": "After yoga, her muscles felt sore but satisfied.",
                        "Context 3": "The sore spot on the couch is where everyone fights for a seat during movie night."
                    }
                },
                {
                    "word": "Backache",
                    "definition": "Pain in the back, often caused by strain or injury.",
                    "context": {
                        "Context 1": "After lifting heavy boxes, she experienced a terrible backache.",
                        "Context 2": "The magician complained of a backache after carrying his props around all day.",
                        "Context 3": "Comedians often joke about backaches being the price of success from too much sitting."
                    }
                },
                {
                    "word": "Fluid",
                    "definition": "A substance that has no fixed shape and yields easily to external pressure; a liquid.",
                    "context": {
                        "Context 1": "Staying hydrated is important, especially when you're losing a lot of fluid due to illness.",
                        "Context 2": "The fluid mechanics involved in the plant's watering system are quite complex.",
                        "Context 3": "Her dance moves were fluid, flowing seamlessly to the rhythm of the music."
                    }
                },
                {
                    "word": "Conditioner",
                    "definition": "A substance applied to hair after shampooing to improve its texture and appearance.",
                    "context": {
                        "Context 1": "Using a good conditioner made her hair feel soft and easy to manage.",
                        "Context 2": "The secret to the car's shine was a special conditioner applied before a show.",
                        "Context 3": "He jokingly called his secret recipe for the perfect pasta dish 'conditioner' because it improved everything!"
                    }
                },
                {
                    "word": "Balsam",
                    "definition": "A fragrant resin obtained from certain trees, used for medicinal or aromatic purposes.",
                    "context": {
                        "Context 1": "She used a balsam lotion to soothe her dry skin during winter months.",
                        "Context 2": "The forest was filled with the sweet scent of balsam as they hiked through.",
                        "Context 3": "He considered his home brew of balsam tea a cure for everything, from colds to heartbreak."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Diagnosis",
                    "fact": "The word diagnosis comes from the Greek word 'diagnosis' which means 'discerning' or 'distinguishing' - so letâ€™s thank the ancient Greeks for naming our doctor visits!"
                },
                {
                    "word": "Chronic",
                    "fact": "Chronic comes from the Greek word 'chronos' which means 'time.' So it's like the condition has a long-term relationship with you!"
                },
                {
                    "word": "Balsam",
                    "fact": "Balsam is often used in perfumery; interestingly, the scent of balsam is said to evoke feelings of warmth and comfort, kind of like hot chocolate on a cold day!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the doctor carry a red pen?",
                    "answer": "In case they needed to draw blood!"
                },
                {
                    "question": "What did one sore throat say to the other?",
                    "answer": "â€˜Youâ€™re looking a bit hoarse today!â€™"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Essay",
                    "definition": "A short piece of writing on a particular subject.",
                    "context": {
                        "Context 1": "In this discussion essay, you will compare two different transportation methods.",
                        "Context 2": "She wrote an essay about her summer vacation.",
                        "Context 3": "The teacher assigned a three-page essay on the causes of World War II."
                    }
                },
                {
                    "word": "Relevant",
                    "definition": "Closely connected or appropriate to what is being done or considered.",
                    "context": {
                        "Context 1": "We need to ensure that all ideas are relevant to the essay prompt.",
                        "Context 2": "The weather forecast was not relevant to their discussion about movie choices.",
                        "Context 3": "He shared a story that was relevant to his family's history on Thanksgiving Day."
                    }
                },
                {
                    "word": "Argument",
                    "definition": "An exchange of diverging or opposite views, often in a debate format.",
                    "context": {
                        "Context 1": "In a discussion essay, it's important to present both sides of the argument.",
                        "Context 2": "The argument between the two friends was about which movie to watch.",
                        "Context 3": "The lawyer made a compelling argument in favor of her client."
                    }
                },
                {
                    "word": "Transport",
                    "definition": "The action of moving goods or people from one place to another.",
                    "context": {
                        "Context 1": "The essay discusses the pros and cons of public transport.",
                        "Context 2": "Her transport was delayed due to heavy traffic.",
                        "Context 3": "He enjoys using different modes of transport when traveling abroad."
                    }
                },
                {
                    "word": "Perspective",
                    "definition": "A particular attitude toward or way of regarding something; a point of view.",
                    "context": {
                        "Context 1": "From my perspective, improving public transport is crucial.",
                        "Context 2": "The artist's painting offered a unique perspective on urban life.",
                        "Context 3": "Her perspective on the issue changed after attending the workshop."
                    }
                },
                {
                    "word": "Improve",
                    "definition": "To make or become better.",
                    "context": {
                        "Context 1": "We need to find ways to improve existing public transport systems.",
                        "Context 2": "He wants to improve his basketball skills by practicing daily.",
                        "Context 3": "The new policy aims to improve employee satisfaction at work."
                    }
                },
                {
                    "word": "Example",
                    "definition": "A representative form or pattern; something that illustrates a concept.",
                    "context": {
                        "Context 1": "You should provide an example to support your argument in the essay.",
                        "Context 2": "The teacher used an example from history to explain the concept.",
                        "Context 3": "She was an example of kindness in the community."
                    }
                },
                {
                    "word": "Invest",
                    "definition": "To allocate resources, usually money, for a future return or benefit.",
                    "context": {
                        "Context 1": "The government needs to invest in better public transport for its citizens.",
                        "Context 2": "He decided to invest in cryptocurrency after researching its trends.",
                        "Context 3": "Many companies invest heavily in advertising to attract new customers."
                    }
                },
                {
                    "word": "Metro",
                    "definition": "An underground railway system in a city.",
                    "context": {
                        "Context 1": "In the essay, the advantages of using the metro are mentioned.",
                        "Context 2": "The metro system in Paris is known for its efficiency.",
                        "Context 3": "She took the metro to avoid traffic congestions."
                    }
                },
                {
                    "word": "Counterargument",
                    "definition": "An argument offered in opposition to another argument.",
                    "context": {
                        "Context 1": "It's essential to include a counterargument in your discussion essay.",
                        "Context 2": "His counterargument to the proposal was well-articulated and received with interest.",
                        "Context 3": "They didn't anticipate the counterargument from the opposing team."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Essay",
                    "fact": "Did you know the longest essay ever written was over 300,000 words? It discussed the meaning of life using pizza as a metaphor!"
                },
                {
                    "word": "Metro",
                    "fact": "In some cities, the metro system has declining ridership because people prefer to walk their pet goldfish than take the train!"
                }
            ],
            "jokes": [
                {
                    "question": "Why don't scientists trust atoms?",
                    "answer": "Because they make up everything!"
                },
                {
                    "question": "Why was the math book sad?",
                    "answer": "Because it had too many problems!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Emphasize",
                    "definition": "To give special importance or prominence to something in speaking or writing.",
                    "context": {
                        "Context 1": "In the lesson, the teacher emphasized the importance of checking for spelling mistakes.",
                        "Context 2": "He had to emphasize his point during the debate so everyone would understand.",
                        "Context 3": "The musician wanted to emphasize the emotional part of the song with a powerful voice."
                    }
                },
                {
                    "word": "Correct",
                    "definition": "To make right or free from error; to rectify.",
                    "context": {
                        "Context 1": "After writing her essay, she took time to correct her grammar mistakes.",
                        "Context 2": "I will correct my friend every time he mispronounces a word.",
                        "Context 3": "The coach needed to correct the playersâ€™ techniques before the game."
                    }
                },
                {
                    "word": "Compose",
                    "definition": "To create or put together something, particularly written work.",
                    "context": {
                        "Context 1": "Students were asked to compose a 250-word essay by the end of the lesson.",
                        "Context 2": "He decided to compose a song for his band's new album.",
                        "Context 3": "The artist, inspired by nature, began to compose a beautiful painting."
                    }
                },
                {
                    "word": "Revise",
                    "definition": "To make changes to something in order to improve it.",
                    "context": {
                        "Context 1": "They will need to revise their essay before submitting it for grading.",
                        "Context 2": "I had to revise my travel plans after hearing about the hurricane.",
                        "Context 3": "Before the exam, she chose to revise her notes to ensure she remembered everything."
                    }
                },
                {
                    "word": "Structure",
                    "definition": "The arrangement of and relations between the parts or elements of something.",
                    "context": {
                        "Context 1": "The teacher explained that the essay needed a clear structure to be effective.",
                        "Context 2": "The building's unique structure caught the attention of many visitors.",
                        "Context 3": "Scientists are exploring the structure of the universe using advanced telescopes."
                    }
                },
                {
                    "word": "Commute",
                    "definition": "To travel some distance between one's home and place of work on a regular basis.",
                    "context": {
                        "Context 1": "His daily commute took over an hour each way, and he often felt tired by the end of the day.",
                        "Context 2": "Many people in big cities rely on public transport to commute to their jobs.",
                        "Context 3": "During rush hour, the commute can be filled with unexpected delays and traffic jams."
                    }
                },
                {
                    "word": "Priority",
                    "definition": "Something that is regarded as more important than another.",
                    "context": {
                        "Context 1": "The lesson emphasized the priority of improving public transport for most city dwellers.",
                        "Context 2": "In an emergency, your safety should always be the priority.",
                        "Context 3": "She made the priority of getting her homework done before watching TV."
                    }
                },
                {
                    "word": "Overload",
                    "definition": "To load beyond capacity; to give too much of a particular resource.",
                    "context": {
                        "Context 1": "Public transportation systems can experience overload during rush hour.",
                        "Context 2": "The teacher warned the students not to overload their backpacks with heavy books.",
                        "Context 3": "Overloading an electrical circuit can cause it to short-circuit."
                    }
                },
                {
                    "word": "Example",
                    "definition": "A representative form or pattern; a case that illustrates a concept.",
                    "context": {
                        "Context 1": "The teacher provided an example to clarify his point about the essay structure.",
                        "Context 2": "As an example of kindness, he volunteered at the local shelter.",
                        "Context 3": "She looked for an example of a successful business model to study."
                    }
                },
                {
                    "word": "Ecology",
                    "definition": "The branch of biology concerned with the relations between organisms and their environment.",
                    "context": {
                        "Context 1": "The discussion included ecology and its importance regarding transportation and pollution.",
                        "Context 2": "Studying ecology is crucial for understanding climate change.",
                        "Context 3": "Her project on marine ecology won first prize at the science fair."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Commute",
                    "fact": "In some cities, people spend more time commuting than they do on vacation each year!"
                },
                {
                    "word": "Ecology",
                    "fact": "Did you know a group of flamingos is called a 'flamboyance'? They certainly make ecology look fabulous!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to school?",
                    "answer": "Because he wanted to go to high school!"
                },
                {
                    "question": "Why did the bicycle fall over?",
                    "answer": "Because it was two-tired!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Crowd",
                    "definition": "A large number of people gathered together.",
                    "context": {
                        "Context 1": "In the subway, there is always a crowd of people during rush hour.",
                        "Context 2": "The crowd at the concert went wild when the band started playing their hit song.",
                        "Context 3": "During the festival, the streets were filled with a crowd of excited tourists."
                    }
                },
                {
                    "word": "Fact",
                    "definition": "A statement that can be proven true or false.",
                    "context": {
                        "Context 1": "The fact that most Russians use public transport is widely recognized.",
                        "Context 2": "It's a fact that the Earth revolves around the Sun.",
                        "Context 3": "Did you know it's a fact that honey never spoils?"
                    }
                },
                {
                    "word": "Transport",
                    "definition": "A system or means of conveying people or goods.",
                    "context": {
                        "Context 1": "Investing in public transport can ease congestion in cities.",
                        "Context 2": "The transport of goods by train is often more economical than by truck.",
                        "Context 3": "Transporting animals long distances can be harmful to their health."
                    }
                },
                {
                    "word": "Loaded",
                    "definition": "Filled to capacity; heavily burdened.",
                    "context": {
                        "Context 1": "The subway train is always loaded with commuters during peak hours.",
                        "Context 2": "His backpack was loaded with books for the semester.",
                        "Context 3": "The truck was loaded with supplies for the charity event."
                    }
                },
                {
                    "word": "Explanation",
                    "definition": "A statement or account that makes something clear.",
                    "context": {
                        "Context 1": "His explanation about why public transport is important helped clarify the topic.",
                        "Context 2": "The teacher provided an explanation of the math problem on the board.",
                        "Context 3": "She gave a detailed explanation of her research findings at the conference."
                    }
                },
                {
                    "word": "Invest",
                    "definition": "To allocate money or resources to make a profit or achieve a result.",
                    "context": {
                        "Context 1": "The government plans to invest in new subway lines to reduce traffic.",
                        "Context 2": "They decided to invest in stocks to secure their financial future.",
                        "Context 3": "He wants to invest time into learning a new language."
                    }
                },
                {
                    "word": "Comfortable",
                    "definition": "Providing physical ease and relaxation.",
                    "context": {
                        "Context 1": "A more comfortable public transport system is crucial for the city's residents.",
                        "Context 2": "She found a comfortable seat on the airplane and relaxed.",
                        "Context 3": "They decorated their living room to make it more comfortable for guests."
                    }
                },
                {
                    "word": "Relevant",
                    "definition": "Connected to the matter at hand; applicable.",
                    "context": {
                        "Context 1": "The discussion about public transport is highly relevant to urban planning.",
                        "Context 2": "His experience in marketing is relevant to the job he is applying for.",
                        "Context 3": "The book offers many relevant insights into human behavior."
                    }
                },
                {
                    "word": "Example",
                    "definition": "A representative form or pattern used to illustrate a concept.",
                    "context": {
                        "Context 1": "An example showing the subway's capacity issues was provided in the lesson.",
                        "Context 2": "For example, many people enjoy playing soccer as a recreational activity.",
                        "Context 3": "As an example of kindness, she volunteers at the local shelter."
                    }
                },
                {
                    "word": "City",
                    "definition": "A large town or a significant urban area.",
                    "context": {
                        "Context 1": "Moscow is a city where public transport is widely used.",
                        "Context 2": "The city of Paris is known for its beautiful architecture.",
                        "Context 3": "A city can be defined by its population and infrastructure."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Crowd",
                    "fact": "Did you know that the largest gathering for a single sporting event was over 3.5 million fans at a cricket match in India?"
                },
                {
                    "word": "Invest",
                    "fact": "In ancient Rome, citizens invested in gladiator gamesâ€”ticket sales went directly to buying better swords!"
                }
            ],
            "jokes": [
                {
                    "question": "Why donâ€™t scientists trust atoms?",
                    "answer": "Because they make up everything!"
                },
                {
                    "question": "Why was the math book sad?",
                    "answer": "Because it had too many problems!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey, have you been to that new park downtown? It's got this awesome bench area."
                },
                {
                    "Person 2": "No, I haven't checked it out yet. Is it nice?"
                },
                {
                    "Person 1": "Yeah! I sat there for a while the other day, just enjoying the fresh air."
                },
                {
                    "Person 2": "Sounds relaxing. I need to get outside more. I feel like I'm always stuck indoors."
                },
                {
                    "Person 1": "I get that! Sometimes I forget how good it feels to just sit outside."
                },
                {
                    "Person 2": "Right? I feel like being outdoors clears my head. Did you see anyone else there?"
                },
                {
                    "Person 1": "Not really, it was pretty quiet, but it was nice. Just me and the trees."
                },
                {
                    "Person 2": "Perfect! I love it when places are peaceful like that."
                },
                {
                    "Person 1": "For sure! And you know, it really helps when the weather is nice. Not too hot, not too cold."
                },
                {
                    "Person 2": "Definitely. My favorite kind of day is when itâ€™s sunny but breezy."
                },
                {
                    "Person 1": "Yes! Perfect for bringing a book along. Do you like reading outside?"
                },
                {
                    "Person 2": "Absolutely! I could read for hours if Iâ€™m comfortable."
                },
                {
                    "Person 1": "Maybe we should plan a day to go together. Bring snacks and a couple of books."
                },
                {
                    "Person 2": "That sounds like a fun idea! Letâ€™s do it this weekend."
                },
                {
                    "Person 1": "Awesome! Iâ€™m looking forward to it."
                },
                {
                    "Person 2": "Me too! It'll be nice to catch up and enjoy some fresh air."
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you hear about the new train system they're building in California?"
                },
                {
                    "Person 2": "Yeah! I think it's supposed to cut travel time between major cities. Pretty exciting stuff!"
                },
                {
                    "Person 1": "For sure! But I wonder if they should focus more on improving local public transport instead."
                },
                {
                    "Person 2": "That's a good point. A lot of people rely on buses and subways for their daily commute."
                },
                {
                    "Person 1": "Right? It seems like investing in faster trains is awesome, but what about people who just need to get around town?"
                },
                {
                    "Person 2": "Exactly! Plus, I often hear complaints about the buses being late or overcrowded."
                },
                {
                    "Person 1": "Totally! In my neighborhood, the buses are pretty infrequent, which makes it hard for people to get to work on time."
                },
                {
                    "Person 2": "Yeah, and imagine if more people had access to better public transport options. It could change everything!"
                },
                {
                    "Person 1": "Definitely! But do you think a fast train from here to L.A. would be useful?"
                },
                {
                    "Person 2": "I mean, it could be cool for weekend trips, but I think improving the local stuff is more urgent."
                },
                {
                    "Person 1": "Agreed! Not everyone has the money for train tickets, especially if they raise taxes to fund the projects."
                },
                {
                    "Person 2": "Right? A bus ride is way cheaper, and everyone needs to get around, not just travel between cities."
                },
                {
                    "Person 1": "Plus, the environmental impact of better local transport could be huge as well!"
                },
                {
                    "Person 2": "Absolutely! Investing in eco-friendly buses and subway lines could make a big difference."
                },
                {
                    "Person 1": "So, should we write a letter or something to suggest they focus on improving public transport?"
                },
                {
                    "Person 2": "That sounds like a plan! Letâ€™s get our ideas down and make sure they're heard!"
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever thought about how much time we spend writing stuff?"
                },
                {
                    "Person 2": "Oh, for sure! I feel like Iâ€™m always typing away, whether itâ€™s for work or just texting friends."
                },
                {
                    "Person 1": "Right? And then I look at the screen and realize I still need to check for typos."
                },
                {
                    "Person 2": "Yeah, it's crazy how you can miss the simplest mistakes. Sometimes, I donâ€™t even notice until someone points it out."
                },
                {
                    "Person 1": "Exactly! I mean, weâ€™ve gotten used to relying on spell checkers and autocorrect."
                },
                {
                    "Person 2": "Definitely! But when it comes to writing essays or reports, itâ€™s all on us. Gotta double-check everything."
                },
                {
                    "Person 1": "For sure. And then thereâ€™s the whole formatting issue, like making sure everything flows well."
                },
                {
                    "Person 2": "Ugh, I know! Sometimes I just want to throw my hands up and be done with it all."
                },
                {
                    "Person 1": "Ha! Same here. I try to set aside time to focus, but distractions pop up everywhere."
                },
                {
                    "Person 2": "Right? Itâ€™s always tempting to check social media or grab a snack instead of writing."
                },
                {
                    "Person 1": "Maybe we should have a writing party where we hold each other accountable!"
                },
                {
                    "Person 2": "That sounds like a plan! Letâ€™s set a goal and make it fun."
                },
                {
                    "Person 1": "Deal! Just promise me weâ€™ll limit the snack breaks."
                },
                {
                    "Person 2": "Only if you bring the snacks! But yeah, let's stay focused this time."
                },
                {
                    "Person 1": "Alright, writing party it is! Canâ€™t wait!"
                },
                {
                    "Person 2": "It'll be great! Let's do this!"
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever noticed how packed the subway gets during rush hour?"
                },
                {
                    "Person 2": "Oh, totally! It's like a sea of people every morning. I sometimes wonder where all of them come from!"
                },
                {
                    "Person 1": "Right? It's wild! I think it's just the easiest way for everyone to get around in the city."
                },
                {
                    "Person 2": "Yeah, public transport is super popular here. It really makes a difference in getting from point A to point B without worrying about traffic."
                },
                {
                    "Person 1": "Exactly! But then again, it can feel a bit overwhelming, especially when you're crammed in like sardines."
                },
                {
                    "Person 2": "For sure! I always try to find a spot near the door, just to make my escape easier when my stop comes up!"
                },
                {
                    "Person 1": "Smart move! I usually just zone out and hope I donâ€™t miss my stop. I swear, some days it feels like a marathon just to get on and off!"
                },
                {
                    "Person 2": "Ha! Thatâ€™s so true. And don't get me started on the delays! Itâ€™s like they happen just when you're in a rush."
                },
                {
                    "Person 1": "Ugh, yes! I think they should invest more in the system to make it bigger and more efficient."
                },
                {
                    "Person 2": "Definitely. A few more trains or even a new subway line would help a lot. It'd relieve some of that crowd pressure."
                },
                {
                    "Person 1": "Letâ€™s hope they do that soon. I mean, if it gets too crowded, people might just give up and start driving again!"
                },
                {
                    "Person 2": "True! And we all know what a nightmare that can be with traffic."
                },
                {
                    "Person 1": "Exactly! Public transport needs to be the way to go if we want to keep our cities livable."
                },
                {
                    "Person 2": "Absolutely! Alright, enough about subways. Whatâ€™s for lunch?"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 3,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "Moscow city, for example, because it's just tonescapers and nothing more.",
                    "corrected": "Moscow city, for example, because it's just skyscrapers and nothing more.",
                    "explanation": "The term 'tonescapers' is a mistaken spelling of 'skyscrapers.'",
                    "context": "I think the reason I don't like Moscow city, for example, is that it's just skyscrapers and nothing more. I feel there's no history; it has only modern buildings."
                },
                {
                    "original": "I always felt that, like, how romantic it is to live in one of those old Soviet-style buildings.",
                    "corrected": "I always felt how romantic it is to live in one of those old Soviet-style buildings.",
                    "explanation": "The phrase 'that, like,' is unnecessary; it makes the sentence awkward and less direct.",
                    "context": "I always felt how romantic it is to live in one of those old Soviet-style buildings. You can feel the history as you walk outside, with huge modern buildings right next to you."
                },
                {
                    "original": "I won't visit it in winter.",
                    "corrected": "I won't visit it during winter.",
                    "explanation": "'In winter' is less common than 'during winter,' which is more idiomatic in English.",
                    "context": "There is nothing particularly interesting about Astrakhan, but it's quite warm, which I like. I won't visit it during winter."
                },
                {
                    "original": "I told about it to my dad.",
                    "corrected": "I told him about it.",
                    "explanation": "The phrase 'told about it' is incorrect; correctly, it should be 'told him about it.'",
                    "context": "I made some travel plans to visit Moscow. I told him about it, and he said he would think about it, which I interpret as a yes."
                },
                {
                    "original": "if not me, we will really just...",
                    "corrected": "if I don't go, we will really just...",
                    "explanation": "The original sentence structure is confusing; 'if not me' should instead be 'if I don't go' for clarity.",
                    "context": "I don't feel stressed in big cities like Moscow. My mom said if I don't go, we will really just have a hard time navigating the Metro system."
                },
                {
                    "original": "I told you what it's better in summer.",
                    "corrected": "I told you that it's better in summer.",
                    "explanation": "The word 'what' is incorrectly used here; 'that' is the appropriate conjunction.",
                    "context": "It's really great in summer. I told you that it's better in summer compared to winter."
                },
                {
                    "original": "the snowing has a big role, plays a big role.",
                    "corrected": "the snowfall plays a big role.",
                    "explanation": "The word 'snowing' is not used as a noun; 'snowfall' is the correct term.",
                    "context": "In winter, I liked it more because it was amazing. The snowfall plays a big role because it was unexpected and heavy."
                },
                {
                    "original": "spending time in a train.",
                    "corrected": "spending time on a train.",
                    "explanation": "We typically use 'on' with modes of transport like trains, not 'in.'",
                    "context": "During my trip, I did the essay in the train. Oh, I hate spending time on a train; I can't do anything."
                },
                {
                    "original": "the price for a train ticket now is pretty much the same as the price for a plane ticket.",
                    "corrected": "the price of a train ticket now is pretty much the same as the price of a plane ticket.",
                    "explanation": "'Price for' is less common than 'price of' in this context.",
                    "context": "The train ticket price is quite high. The price of a train ticket now is pretty much the same as the price of a plane ticket."
                },
                {
                    "original": "Does Astrakhan has an airport?",
                    "corrected": "Does Astrakhan have an airport?",
                    "explanation": "The verb 'has' should be 'have' to agree with the auxiliary 'does.'",
                    "context": "I was discussing travel options from Astrakhan. I asked, 'Does Astrakhan have an airport?'"
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "there are no error",
                    "corrected": "there are no errors.",
                    "explanation": "The noun 'error' should be plural ('errors') to match the context of multiple mistakes.",
                    "context": "I mentioned that flights were running smoothly in Rostov. However, there are no errors with the planes working, absolutely."
                },
                {
                    "original": "the phrase goes, to be honest.",
                    "corrected": "the phrase is, to be honest.",
                    "explanation": "'Goes' is informal; 'is' is more appropriate in this context to define a phrase.",
                    "context": "We've been talking about language usage. The phrase is, to be honest. It's important to use this correctly since you use it often."
                },
                {
                    "original": "you can write this part, but if you do, you should explain in detail.",
                    "corrected": "you can write this part, but if you do, you should explain it in detail.",
                    "explanation": "'In detail' requires an object for clarity, hence 'it' should be included.",
                    "context": "I clarified that you can include a section in your essay. However, if you do, you should explain it in detail to make your argument stronger."
                },
                {
                    "original": "This is not a counter argument.",
                    "corrected": "This is not a counterargument.",
                    "explanation": "The term 'counterargument' should be written as one word.",
                    "context": "We were reviewing your work. I pointed out that mentioning limits is not a counterargument; it needs further development."
                },
                {
                    "original": "I can say I use computer science my childhood and I feel okay.",
                    "corrected": "I can say I have used computers since my childhood and I feel okay.",
                    "explanation": "The past perfect tense 'have used' is necessary here to indicate an action that started in the past and continues to the present.",
                    "context": "In discussing potential smartphone harm, I shared my experience. I said I have used computers since my childhood, and I feel okay."
                },
                {
                    "original": "As for example, social media says, like the developing of technologies give us an opportunity to, I don't know, defend, for example, our eyes.",
                    "corrected": "For example, social media suggests that the development of technologies gives us an opportunity to protect our eyes.",
                    "explanation": "The proper phrase is 'for example,' and 'give' should be 'gives' to match the subject 'development.'",
                    "context": "While debating the harm of smartphones, I provided a counterpoint. I said, for example, social media suggests that the development of technologies gives us an opportunity to protect our eyes."
                },
                {
                    "original": "It's called undermining.",
                    "corrected": "This is called undermining.",
                    "explanation": "This sentence needs a subject for clarity; 'this' should precede 'is.'",
                    "context": "In explaining your approach, I noted that what you're doing is called undermining when you argue against negative views about smartphone use."
                },
                {
                    "original": "For example, what did you do not to develop an addiction to smartphones?",
                    "corrected": "For example, what do you do to avoid developing an addiction to smartphones?",
                    "explanation": "The sentence needs to be restructured for clarity and tense consistency. 'Did you' should be 'do you' and 'not to develop' rephrased as 'to avoid developing.'",
                    "context": "In considering potential addiction, I asked you about your approach. I wanted to know, for example, what do you do to avoid developing an addiction to smartphones?"
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "But how would you control the usage of smartphones? So they're not spending all their day.",
                    "corrected": "But how would you control the usage of smartphones so that they don't spend all day on them?",
                    "explanation": "The phrase 'they're not spending all their day' should be 'so that they don’t spend all day on them' for grammatical correctness.",
                    "context": "As a parent, I often worry about my children's smartphone usage. But how would you control the usage of smartphones so that they don’t spend all day on them? It’s important to set limits for their screen time."
                },
                {
                    "original": "I had. Something up in my childhood and those special.",
                    "corrected": "I had something like that in my childhood; there were special ones.",
                    "explanation": "The phrase is incomplete and unclear; it should be a complete statement for clarity.",
                    "context": "I remember when I was a child; there were devices made specifically for kids. I had something like that in my childhood; there were special ones."
                },
                {
                    "original": "And because it's special, because it was built this way, you can't access certain sites.",
                    "corrected": "And because it’s special and was built this way, you can’t access certain sites.",
                    "explanation": "The repetitive use of 'because' is unnecessary; it should be consolidated for better flow.",
                    "context": "When discussing the features of certain devices, I recognize their design limits access to inappropriate content. And because it’s special and was built this way, you can’t access certain sites."
                },
                {
                    "original": "I guess it's not. But no, it is. It is problem of people who spend all their time in smartphones.",
                    "corrected": "I guess it’s not. But no, it is a problem for people who spend all their time on smartphones.",
                    "explanation": "The phrase 'it is problem' should include 'a' for grammatical accuracy and 'on' is the correct preposition here.",
                    "context": "While discussing smartphone use, I reflect on how it impacts people's lives. I guess it’s not. But no, it is a problem for people who spend all their time on smartphones."
                },
                {
                    "original": "What exactly can do smartphones, for example, maybe just reminds maybe what you can, I don't know, with it.",
                    "corrected": "What exactly can smartphones do? They can remind you to go outside and get some fresh air.",
                    "explanation": "The sentence structure is awkward and unclear; it needs rephrasing for clarity and proper questioning.",
                    "context": "In considering the role of smartphones, I wonder about their potential benefits. What exactly can smartphones do? They can remind you to go outside and get some fresh air."
                },
                {
                    "original": "So what parents should do? Just remind the children what the world is not only about their devices.",
                    "corrected": "So what should parents do? They should remind their children that the world is not only about their devices.",
                    "explanation": "The sentence lacks clarity, and 'what parents should do' needs to be rephrased for grammatical accuracy.",
                    "context": "While thinking about parenting strategies, I consider how to guide my kids effectively. So what should parents do? They should remind their children that the world is not only about their devices."
                },
                {
                    "original": "Without now, we can say modern smartphones.",
                    "corrected": "Now we can say modern smartphones.",
                    "explanation": "The use of 'without' is unnecessary and incorrect in this context.",
                    "context": "During our discussion, we were drafting ideas for our essay. Now we can say modern smartphones."
                },
                {
                    "original": "Do we need it? No. We don't need it because we only need counter argument to the opinion we disagree with.",
                    "corrected": "Do we need it? No, we don't need it because we only need the counterargument to the opinion we disagree with.",
                    "explanation": "'Counter argument' should be 'counterargument' as one word for correct usage; also, the comma after 'No' is necessary.",
                    "context": "When evaluating our writing, we question the relevance of certain points. Do we need it? No, we don't need it because we only need the counterargument to the opinion we disagree with."
                },
                {
                    "original": "Then we need to remove it about control.",
                    "corrected": "Then we need to remove it regarding control.",
                    "explanation": "'It about control' is incorrect; it should be 'it regarding control' for proper phrasing.",
                    "context": "As we edit our essay, we discuss the components related to our main arguments. Then we need to remove it regarding control."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Tonescapers",
                    "definition": "Tall buildings or structures, often used to refer to skyscrapers.",
                    "context": {
                        "Context 1": "In Moscow, there are countless tonescapers that dominate the skyline.",
                        "Context 2": "The artist painted a beautiful sunset behind the tonescapers in the city.",
                        "Context 3": "He constructed a model of a futuristic city with tonescapers and parks."
                    }
                },
                {
                    "word": "Contrast",
                    "definition": "The state of being strikingly different from something else.",
                    "context": {
                        "Context 1": "The contrast between the modern tonescapers and the old Khrushchevkiy buildings is striking.",
                        "Context 2": "The artist used contrast in the colors to make the painting more vivid.",
                        "Context 3": "The contrast between the hot sun and the cool breeze made for a perfect day at the beach."
                    }
                },
                {
                    "word": "Khrushchevkiy",
                    "definition": "A type of building constructed in the Soviet era, typically characterized by its functional design.",
                    "context": {
                        "Context 1": "The old Khrushchevkiy buildings have more history compared to the new constructions.",
                        "Context 2": "He decided to renovate a Khrushchevkiy apartment to preserve its historical charm.",
                        "Context 3": "During the tour, we learned about the Khrushchevkiy architecture that shaped the city's skyline."
                    }
                },
                {
                    "word": "Impressed",
                    "definition": "Feeling admiration for someone or something due to their qualities or achievements.",
                    "context": {
                        "Context 1": "I am impressed by the size and history of Moscow.",
                        "Context 2": "The teacher was impressed with the students' creativity in their projects.",
                        "Context 3": "He was impressed to see how quickly the baby learned to walk."
                    }
                },
                {
                    "word": "Embassy",
                    "definition": "The official residence or office of an ambassador.",
                    "context": {
                        "Context 1": "We need to visit the Kazakhstan Embassy for travel documents.",
                        "Context 2": "The embassy held a cultural event to celebrate international friendship.",
                        "Context 3": "He felt safe knowing he could go to the embassy if he needed help while abroad."
                    }
                },
                {
                    "word": "Environment",
                    "definition": "The surroundings or conditions in which a person, animal, or plant lives or operates.",
                    "context": {
                        "Context 1": "I miss my little environment that I created for myself.",
                        "Context 2": "Protecting the environment is crucial for future generations.",
                        "Context 3": "The environment at the camp was perfect for bonding with friends."
                    }
                },
                {
                    "word": "Relax",
                    "definition": "To become less tense or anxious; to rest.",
                    "context": {
                        "Context 1": "I miss my chair, where I can just relax and sit back.",
                        "Context 2": "She likes to relax by reading a book in the evenings.",
                        "Context 3": "After a long day, he prefers to relax with some video games."
                    }
                },
                {
                    "word": "Technical",
                    "definition": "Relating to a particular subject or field of activity; very detailed and specific.",
                    "context": {
                        "Context 1": "There were technical challenges with the Metro system that my mom found hard to navigate.",
                        "Context 2": "The technical manual provided detailed instructions for assembling the furniture.",
                        "Context 3": "He was excited to attend a technical seminar about the latest gadgets."
                    }
                },
                {
                    "word": "Doable",
                    "definition": "Something that is possible to achieve or accomplish.",
                    "context": {
                        "Context 1": "I think we will have an awesome trip if it happens; it's totally doable.",
                        "Context 2": "Her goals for the year are ambitious but definitely doable.",
                        "Context 3": "The team agreed that the project timeline was doable with the right resources."
                    }
                },
                {
                    "word": "Massive",
                    "definition": "Large and heavy or significant in scale.",
                    "context": {
                        "Context 1": "The massive snowstorm caught everyone by surprise during winter.",
                        "Context 2": "The massive oak tree in the park provides shade for many visitors.",
                        "Context 3": "His massive collection of stamps amazed everyone at the exhibition."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Embassy",
                    "fact": "Did you know that the world's largest embassy is located in Baghdad, Iraq? It's about the size of a small city!"
                },
                {
                    "word": "Massive",
                    "fact": "The largest living organism on our planet is a fungus in Oregon, covering over 2,385 acres—that's one massive mushroom!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to school?",
                    "answer": "Because they wanted to go to high school!"
                },
                {
                    "question": "What do you call a snowman in the summer?",
                    "answer": "A puddle!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "to be honest",
                    "definition": "A common conversational phrase used to introduce a frank or sincere statement.",
                    "context": {
                        "Context 1": "To be honest, I didn't check the prices there.",
                        "Context 2": "To be honest, I prefer tea to coffee in the morning.",
                        "Context 3": "To be honest, that movie was much better than I expected."
                    }
                },
                {
                    "word": "honestly (adverb)",
                    "definition": "An adverb that modifies a verb or whole sentence to indicate truthfulness or frankness.",
                    "context": {
                        "Context 1": "Honestly, I didn't check the flight prices — I said 'to be honest' instead of 'to be honestly'.",
                        "Context 2": "She honestly answered every question on the test.",
                        "Context 3": "Honestly, I had no idea there was a sale today."
                    }
                },
                {
                    "word": "example",
                    "definition": "A specific case or instance used to illustrate or support a point.",
                    "context": {
                        "Context 1": "For example, some children use Duolingo to learn new words — this is a clear example in your paragraph.",
                        "Context 2": "As an example of renewable energy, consider a rooftop solar panel system.",
                        "Context 3": "She gave the example of a rainy day when explaining why she prefers indoor hobbies."
                    }
                },
                {
                    "word": "explanation",
                    "definition": "A statement that makes something clear by describing the reasons, causes, or meaning.",
                    "context": {
                        "Context 1": "That sentence is more an explanation than an example because it describes how learning apps develop memory and thinking.",
                        "Context 2": "His explanation of the rules helped everyone understand the game.",
                        "Context 3": "The manual provides an explanation of how to assemble the shelf."
                    }
                },
                {
                    "word": "specific",
                    "definition": "Clearly defined or identified; giving exact details rather than generalities.",
                    "context": {
                        "Context 1": "Make the example slightly more specific by naming an app like Duolingo instead of just saying 'learning games'.",
                        "Context 2": "Please be specific about the time and place of the meeting.",
                        "Context 3": "A specific ingredient, like cinnamon, can change the flavor of a recipe."
                    }
                },
                {
                    "word": "counter-argument",
                    "definition": "A reasoned argument opposed to another argument; used to show awareness of other viewpoints.",
                    "context": {
                        "Context 1": "Add a counter-argument to the claim that children should use smartphones so you can respond and weaken it.",
                        "Context 2": "The lawyer presented a strong counter-argument to the prosecution's case.",
                        "Context 3": "In a debate about homework, a common counter-argument is that students need free time to rest."
                    }
                },
                {
                    "word": "undermining",
                    "definition": "The act of weakening or diminishing the effectiveness or authority of something (often an opponent's argument).",
                    "context": {
                        "Context 1": "By showing studies that smartphone harm is overstated, you are undermining the opponent's claim that screens are always harmful.",
                        "Context 2": "Constant criticism can be undermining to a team's confidence.",
                        "Context 3": "The leak of wrong information had an undermining effect on the campaign's credibility."
                    }
                },
                {
                    "word": "addiction",
                    "definition": "A condition in which a person engages in a behavior or uses a substance compulsively despite harmful consequences.",
                    "context": {
                        "Context 1": "If addiction to smartphones is true, explain why you still support the idea that children can use them responsibly.",
                        "Context 2": "He sought help because his video-game addiction affected his sleep and work.",
                        "Context 3": "Some people warn that too much sugar can lead to addictive eating habits."
                    }
                },
                {
                    "word": "limits and control",
                    "definition": "Rules or boundaries set to manage behavior or use of something; often used regarding screen time and parental supervision.",
                    "context": {
                        "Context 1": "Explain specific limits and control parents can use, such as daily screen-time caps and supervised app installation.",
                        "Context 2": "The lab set strict limits and control measures on who could access the chemicals.",
                        "Context 3": "To stay on budget, she put limits and control on her monthly spending."
                    }
                },
                {
                    "word": "blue light filter (night mode)",
                    "definition": "A display setting or screen filter that reduces blue wavelengths to lessen eye strain and help sleep at night.",
                    "context": {
                        "Context 1": "Use a blue light filter or night mode on a phone at night to reduce eye strain — the lesson mentioned an orange/blue filter.",
                        "Context 2": "He turned on the blue light filter before reading on his tablet in bed.",
                        "Context 3": "Many devices include a blue light filter to protect users who work late on computers."
                    }
                },
                {
                    "word": "Duolingo",
                    "definition": "A popular language-learning app that uses short lessons and gamification to teach vocabulary and grammar.",
                    "context": {
                        "Context 1": "For example, children can use Duolingo to practice foreign words as part of a learning activity on smartphones.",
                        "Context 2": "She practised Spanish for ten minutes on Duolingo during her commute.",
                        "Context 3": "The school recommended Duolingo as a fun supplement to classroom language lessons."
                    }
                },
                {
                    "word": "introduction",
                    "definition": "The opening paragraph of an essay that presents the topic and outlines the main points.",
                    "context": {
                        "Context 1": "Your introduction clearly states you'll discuss education, communication, health, and addiction — good job.",
                        "Context 2": "The speaker gave a brief introduction before starting the demonstration.",
                        "Context 3": "A strong introduction can grab the reader's attention with a question or interesting fact."
                    }
                },
                {
                    "word": "body paragraph",
                    "definition": "A middle paragraph in an essay that develops one main idea with evidence, examples, and explanations.",
                    "context": {
                        "Context 1": "In the body paragraph, include a specific example, an explanation, and — when needed — a counter-argument to strengthen your point.",
                        "Context 2": "Each body paragraph in the report focused on a separate benefit of exercise.",
                        "Context 3": "The teacher asked students to write three body paragraphs for the assignment."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Duolingo",
                    "fact": "The Duolingo mascot is a green owl named Duo — fans joke Duo will angrily remind you to practice if you skip a lesson (there are many memes about Duo's 'angry notifications')."
                },
                {
                    "word": "blue light filter",
                    "fact": "Night modes often tint the screen orange because that color blocks blue wavelengths linked to alertness — some people call it the 'warm blanket for your phone'."
                },
                {
                    "word": "adverb",
                    "fact": "The word 'adverb' comes from Latin ad- (to) + verbum (word). So an adverb literally means 'added to a verb' — but in practice it often modifies whole sentences."
                },
                {
                    "word": "to be honest",
                    "fact": "People say 'to be honest' so often that some surveys list it among the top filler phrases in casual speech — it's a sign of being blunt, or just conversational habit!"
                },
                {
                    "word": "addiction",
                    "fact": "Smartphone 'addiction' is not only a social topic: some governments and schools have experimented with app limits and phone-free days to regulate use."
                }
            ],
            "jokes": [
                {
                    "question": "Why did the essay get nervous about smartphones?",
                    "answer": "Because it heard everyone was checking their 'points' and 'notifications' — the essay wanted some attention too!"
                },
                {
                    "question": "What did the teacher say when the student used 'to be honestly' in class?",
                    "answer": "She said, 'To be honest, that's honestly not correct — use \"to be honest\" instead!'"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Smartphone",
                    "definition": "A mobile phone that performs many of the functions of a computer, typically having a touchscreen interface.",
                    "context": {
                        "Context 1": "My sister started using her smartphone at the age of ten, which worried our parents.",
                        "Context 2": "The smartphone was invented to revolutionize the way we communicate.",
                        "Context 3": "He forgot his smartphone at home and felt lost without it."
                    }
                },
                {
                    "word": "Parental Control",
                    "definition": "Features that allow parents to restrict or monitor what their child can access on devices.",
                    "context": {
                        "Context 1": "Using parental control apps, parents can limit screen time on smartphones.",
                        "Context 2": "The new video game does not have parental control options, making it unsuitable for younger children.",
                        "Context 3": "She set up parental control on the home Wi-Fi to block certain websites."
                    }
                },
                {
                    "word": "Attention Span",
                    "definition": "The length of time for which a person can concentrate on a task without becoming distracted.",
                    "context": {
                        "Context 1": "Excessive smartphone use can negatively affect a child's attention span.",
                        "Context 2": "Teenagers today have remarkably short attention spans due to constant digital distractions.",
                        "Context 3": "His attention span was unusually long; he could read for hours without losing focus."
                    }
                },
                {
                    "word": "Notification",
                    "definition": "A message or alert that notifies a user of an event or message on a device.",
                    "context": {
                        "Context 1": "Smartphones have notification features to remind users when to take breaks.",
                        "Context 2": "He turned off all notifications to focus better on his studies.",
                        "Context 3": "When she received a notification about a sale, she quickly checked her emails."
                    }
                },
                {
                    "word": "Addiction",
                    "definition": "The state of being controlled by a habit or a substance.",
                    "context": {
                        "Context 1": "Smartphone addiction is a growing concern among young children.",
                        "Context 2": "He developed an addiction to coffee during his final exams.",
                        "Context 3": "Many people don’t realize they have an addiction to social media until they try to quit."
                    }
                },
                {
                    "word": "Exposure",
                    "definition": "The state of being exposed to something, such as information or an experience.",
                    "context": {
                        "Context 1": "Gradual exposure to smartphones can help children adjust to their use.",
                        "Context 2": "Exposure to different cultures can broaden one’s perspective.",
                        "Context 3": "He had little exposure to classical music until he attended a concert."
                    }
                },
                {
                    "word": "Control",
                    "definition": "The power to influence or direct people's behavior or the course of events.",
                    "context": {
                        "Context 1": "Parents should establish control over their children's smartphone usage.",
                        "Context 2": "The manager lost control of the meeting when arguments broke out.",
                        "Context 3": "She struggled to control her excitement as she opened her birthday gift."
                    }
                },
                {
                    "word": "Features",
                    "definition": "Distinctive attributes or aspects of something.",
                    "context": {
                        "Context 1": "Many smartphones come with features specifically designed for children's safety.",
                        "Context 2": "The new car has advanced safety features to prevent accidents.",
                        "Context 3": "Her phone has exciting features like voice recognition and facial recognition."
                    }
                },
                {
                    "word": "Content",
                    "definition": "The information or topics presented in a book, document, or online.",
                    "context": {
                        "Context 1": "Parents should be aware of harmful content that children can access online.",
                        "Context 2": "The artist's new album contains thought-provoking content.",
                        "Context 3": "His presentation was well-received because the content was engaging and relevant."
                    }
                },
                {
                    "word": "Limit",
                    "definition": "A point or level beyond which something does not or may not exceed or pass.",
                    "context": {
                        "Context 1": "It’s essential to set a limit on how long children can use smartphones.",
                        "Context 2": "There is a limit to how much sugar you should consume each day.",
                        "Context 3": "They decided to limit their vacation budget to avoid overspending."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Smartphone",
                    "fact": "It's said that the first smartphone was actually a device called the ‘IBM Simon’ released in 1994, and it was bigger than a brick!"
                },
                {
                    "word": "Notification",
                    "fact": "The average person receives 50 to 100 notifications per day on their smartphone—talk about being popular!"
                }
            ],
            "jokes": [
                {
                    "question": "Why was the smartphone so good at math?",
                    "answer": "Because it could always count on its apps!"
                },
                {
                    "question": "Why don't smartphones ever get lost?",
                    "answer": "Because they always know how to find their way home with GPS!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Have you ever been to a big city and just felt overwhelmed by all the tall buildings?"
                },
                {
                    "Person 2": "Definitely! I felt that way when I visited New York. So many skyscrapers, but sometimes it feels a little bit heartless, you know?"
                },
                {
                    "Person 1": "Exactly! I mean, they look impressive, but I miss places that tell stories. Like old neighborhoods with history."
                },
                {
                    "Person 2": "Right! I love those old buildings where you can just imagine the people who lived there before. Feels more personal."
                },
                {
                    "Person 1": "Totally! Speaking of places with history, did you ever check out that historic park downtown?"
                },
                {
                    "Person 2": "No, I haven't been there yet! Was it worth it?"
                },
                {
                    "Person 1": "For sure! It’s beautiful to walk around and read the plaques about what used to be there."
                },
                {
                    "Person 2": "Sounds cool! I've been spending so much time just walking around the city, I should probably read more about it."
                },
                {
                    "Person 1": "You really should! But let's be honest, sometimes walking is way more fun than reading."
                },
                {
                    "Person 2": "Ha! True! I always feel torn between exploring and catching up on my reading at home."
                },
                {
                    "Person 1": "Yeah! And sometimes you just need that comfort zone. I really miss my favorite chair while traveling."
                },
                {
                    "Person 2": "Same here! There's nothing like chilling in your own space after a day out."
                },
                {
                    "Person 1": "So are you traveling with anyone right now?"
                },
                {
                    "Person 2": "Yeah, I'm here with my family. They came to visit me!"
                },
                {
                    "Person 1": "That’s nice! Are they enjoying it?"
                },
                {
                    "Person 2": "Oh, totally! But they just left a couple days ago, so now I'm back to exploring solo."
                },
                {
                    "Person 1": "So, what’s next on your travel list?"
                },
                {
                    "Person 2": "I’m thinking about checking out some cozy cafes and maybe a few museums. What about you?"
                },
                {
                    "Person 1": "That sounds fun! I might go to that new art exhibit. It’s supposed to be really good."
                },
                {
                    "Person 2": "Nice! Let's go together if we can!"
                },
                {
                    "Person 1": "For sure! Just text me when you're free."
                },
                {
                    "Person 2": "Will do! And hey, we can grab coffee after. Can’t wait!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you hear about the new coffee shop that just opened downtown?"
                },
                {
                    "Person 2": "Yeah, I saw it on Instagram! Have you been there yet?"
                },
                {
                    "Person 1": "I went yesterday. The vibe is really chill, and they have great pastries!"
                },
                {
                    "Person 2": "Nice! What’s their specialty?"
                },
                {
                    "Person 1": "They do a caramel macchiato that’s pretty amazing. And the croissants are so flaky!"
                },
                {
                    "Person 2": "Yum! I’m definitely going to check it out this weekend. Do they have outdoor seating?"
                },
                {
                    "Person 1": "Yep! There’s a cute patio. Perfect for people-watching."
                },
                {
                    "Person 2": "Sounds perfect! I love sitting outside with a good book."
                },
                {
                    "Person 1": "Same here! I might take my laptop and do some work while I sip my coffee."
                },
                {
                    "Person 2": "That’s a great idea! Sometimes a change of scenery really helps with productivity."
                },
                {
                    "Person 1": "Exactly! Plus, I think it helps to be around other people, even if you’re working."
                },
                {
                    "Person 2": "For sure! I usually get distracted at home. I could use a good atmosphere."
                },
                {
                    "Person 1": "Let’s plan to go together sometime! I’d love to show you the place."
                },
                {
                    "Person 2": "Absolutely! Let’s do it this weekend, then."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey, have you thought about how kids and smartphones mix these days?"
                },
                {
                    "Person 2": "Definitely! It’s a tricky situation, especially with young kids."
                },
                {
                    "Person 1": "Right? Like, if a kid is five or six, do you think it's okay to let them have their own phone?"
                },
                {
                    "Person 2": "Maybe. But I think it really depends on how you manage their usage. You can't just hand them a phone and walk away."
                },
                {
                    "Person 1": "True! When I was a kid, we didn’t have smartphones. We played outside instead. I wonder if that’s better for kids."
                },
                {
                    "Person 2": "For sure! We had the freedom to explore. But my friend got a tablet for her kid—it has educational games but no browser."
                },
                {
                    "Person 1": "That sounds smart! So the kid wouldn’t accidentally stumble onto something inappropriate."
                },
                {
                    "Person 2": "Exactly! It’s all about keeping them safe, but there are also concerns about addiction. Kids can get glued to their screens."
                },
                {
                    "Person 1": "I see what you mean. I know kids who can spend hours on their phones. How can parents stop that?"
                },
                {
                    "Person 2": "It might help for parents to set limits, like only an hour a day or something. Just to get them outside more."
                },
                {
                    "Person 1": "Yeah! Reminding kids there’s a world beyond their devices is key."
                },
                {
                    "Person 2": "Exactly! I think some apps even notify you when you’ve been on your phone for too long."
                },
                {
                    "Person 1": "Oh, really? That’s cool! It’s like a little reminder to take a break."
                },
                {
                    "Person 2": "For sure! It’s all about balance, you know? A little screen time is okay as long as it’s not everything."
                },
                {
                    "Person 1": "Totally! Well, it sounds like there’s still hope for the next generation!"
                },
                {
                    "Person 2": "Definitely! Hopefully, they’ll find a good balance between tech and the real world."
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
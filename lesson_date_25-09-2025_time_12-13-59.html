<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 5,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "Does it mean that now you are a proud owner of the driver's license?",
                    "corrected": "Does it mean that now you are a proud owner of a driver's license?",
                    "explanation": "The article 'a' is needed before 'driver's license' as it is a singular countable noun.",
                    "context": "I was excited to hear from Violetta and asked her about her time in Moscow. Does it mean that now you are a proud owner of a driver's license? That's a significant accomplishment!"
                },
                {
                    "original": "You didn't lose even one point.",
                    "corrected": "You didn't lose a single point.",
                    "explanation": "'Even one' is less idiomatic; 'a single' is the preferred expression here.",
                    "context": "I was impressed with her performance during the driving test. You didn't lose a single point. That's quite a feat!"
                },
                {
                    "original": "And the minute I start the car they say okay so please stop it.",
                    "corrected": "And the minute I started the car they said okay so please stop it.",
                    "explanation": "The verb tenses are inconsistent; the past form 'started' and 'said' should be used for clarity.",
                    "context": "I was reflecting on my own driving test experience. And the minute I started the car they said okay so please stop it. I couldn't believe I failed so quickly!"
                },
                {
                    "original": "And that was on polygon, that wasn't even the town.",
                    "corrected": "And that was in the polygon, that wasn't even in town.",
                    "explanation": "'On polygon' is incorrect; 'in the polygon' is the correct prepositional phrase and 'in town' is more idiomatic.",
                    "context": "I recalled the frustrating regulations of the driving test. And that was in the polygon, that wasn't even in town. It felt so unfair to fail there."
                },
                {
                    "original": "And like the head of the service Yeah this road service instructed the instructors to not pass any anyone from the school.",
                    "corrected": "And the head of the service instructed the instructors not to pass anyone from the school.",
                    "explanation": "The phrase 'to not pass any anyone' is redundant; it should be 'not to pass anyone.'",
                    "context": "I shared the challenges I faced with the driving school. And the head of the service instructed the instructors not to pass anyone from the school. This rule really affected my chances."
                },
                {
                    "original": "That's an interesting story yeah okay what is your uh retake.",
                    "corrected": "That's an interesting story, yeah okay, what is your retake score?",
                    "explanation": "The sentence is missing punctuation for clarity, and 'retake' should be followed by 'score' for specificity.",
                    "context": "After sharing some of my story, I wanted to shift the focus back to Violetta. That's an interesting story, yeah okay, what is your retake score? I'm curious about your progress."
                },
                {
                    "original": "Have you ever have you ever hit the sidewalk while parking before?",
                    "corrected": "Have you ever hit the sidewalk while parking before?",
                    "explanation": "The phrase 'have you ever have you ever' is redundant; one instance is sufficient.",
                    "context": "I was checking in with Violetta about her driving skills. Have you ever hit the sidewalk while parking before? It's a common concern among new drivers."
                },
                {
                    "original": "So, let's do the... This is an interesting task, by the way.",
                    "corrected": "So, let's do this... This is an interesting task, by the way.",
                    "explanation": "The phrase 'let's do the...' incorrectly uses an article; it should just say 'let's do this.'",
                    "context": "As we moved to the reading part of the lesson, I was eager to engage her. So, let's do this... This is an interesting task, by the way."
                },
                {
                    "original": "Or one very specific grammar construction, that may be the case, but usually...",
                    "corrected": "Or one very specific grammar construction; that may be the case, but usually...",
                    "explanation": "A semicolon is needed instead of a comma to separate two independent clauses.",
                    "context": "I was explaining the complexities of the reading tasks. Or one very specific grammar construction; that may be the case, but usually... the context can help clarify."
                },
                {
                    "original": "Yeah, you just ignored them or didn't know what to look at.",
                    "corrected": "Yeah, you just ignored them or didn't know what to look for.",
                    "explanation": "'Look at' is incorrect here; 'look for' should be used to indicate searching for something.",
                    "context": "I wanted to emphasize the importance of recognizing cues in the text. Yeah, you just ignored them or didn't know what to look for. It can make a difference in understanding."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "You just need to let your brain to do the job.",
                    "corrected": "You just need to let your brain do the job.",
                    "explanation": "The use of 'to' before 'do' is unnecessary; 'let' is a causative verb and should be followed by the base form of the verb.",
                    "context": "When acquiring vocabulary, it's important to allow your brain to work naturally. You just need to let your brain do the job. It will gradually understand the meanings over time."
                },
                {
                    "original": "But that is usually very ineffective.",
                    "corrected": "But that is usually very ineffective.",
                    "explanation": "The sentence is actually correct; there is no mistake here; it appears here for examination.",
                    "context": "While studying vocabulary can be approached in various ways, memorizing lists is often not the best method. But that is usually very ineffective. So, we must find a more natural way to learn."
                },
                {
                    "original": "You have some idea.",
                    "corrected": "You have some idea.",
                    "explanation": "This sentence is grammatically correct; it serves as a transitional statement, but is often too vague.",
                    "context": "Understanding new vocabulary can take time. You have some idea. The goal is to enhance that understanding as we progress."
                },
                {
                    "original": "Look, you can see it by logic, right?",
                    "corrected": "Look, you can see it by logic, right?",
                    "explanation": "The phrase 'by logic' is not idiomatic; 'logically' would fit better.",
                    "context": "When we analyze the words, we need to rely on our reasoning skills. Look, you can see it logically, right? It should be clear which words fit based on their meanings."
                },
                {
                    "original": "To hold a meeting means to host a meeting.",
                    "corrected": "To hold a meeting means to have a meeting.",
                    "explanation": "While 'host' suggests organizing, 'have' is a more common collocation with 'meeting' in this context.",
                    "context": "In English, certain phrases are standard. To hold a meeting means to have a meeting. This is how we describe coming together for discussions."
                },
                {
                    "original": "Involved is a noun?",
                    "corrected": "Is 'involved' a noun?",
                    "explanation": "The structure of the question is incorrect; the verb should precede the subject.",
                    "context": "There was a discussion about the word 'involved.' Is 'involved' a noun? We need to clarify its grammatical role."
                },
                {
                    "original": "So, it turns out that even with your knowledge you don't know what appeal and intent are.",
                    "corrected": "So, it turns out that even with your knowledge, you don't know what 'appeal' and 'intent' are.",
                    "explanation": "Punctuation was missing before the quoted terms, which could confuse the reader.",
                    "context": "It's essential to understand the terms we encounter. So, it turns out that even with your knowledge, you don't know what 'appeal' and 'intent' are. This shows the need for deeper learning."
                },
                {
                    "original": "The choice will be between the two.",
                    "corrected": "The choice will be between the two options.",
                    "explanation": "The phrase is slightly unclear without specifying 'options' after 'two,' which can lead to ambiguity.",
                    "context": "When faced with decisions, it's important to make clear choices. The choice will be between the two options. Knowing your vocabulary helps narrow them down."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "It will give us something.",
                    "corrected": "It might give us something.",
                    "explanation": "'Will' is used for definite future events, while 'might' indicates possibility, which fits better here.",
                    "context": "When we are trying to analyze a word's meaning, we think about its root. It might give us something useful for understanding it better."
                },
                {
                    "original": "There are some words in Russian that are similar.",
                    "corrected": "There are some words in Russian that are similar to it.",
                    "explanation": "A preposition is needed to clarify the relationship; 'similar to' indicates the comparison being made.",
                    "context": "While discussing the root of the word, I noted that there are some words in Russian that are similar to it. This helps in understanding the term better."
                },
                {
                    "original": "The number of correct answers.",
                    "corrected": "The number of correct answers needed.",
                    "explanation": "The phrase is incomplete; 'needed' adds clarity regarding the context of evaluation.",
                    "context": "In our lesson, we talked about how scores are determined. The number of correct answers needed can significantly impact your overall score."
                },
                {
                    "original": "So what was the score there?",
                    "corrected": "So, what was the score there?",
                    "explanation": "A comma after 'so' helps to pause and clarify the question being asked.",
                    "context": "When reflecting on past experiences with tests, I asked my student about their scores. So, what was the score there?"
                },
                {
                    "original": "You want to hand out on paper?",
                    "corrected": "Do you want to hand it out on paper?",
                    "explanation": "The sentence lacks proper structure; it needs a subject and a pronoun to convey the action clearly.",
                    "context": "We were discussing the format of the test. So I asked, do you want to hand it out on paper?"
                },
                {
                    "original": "Therefore, someone says, I will hand out IDPs.",
                    "corrected": "Therefore, some say, I will hand out IDPs.",
                    "explanation": "'Someone' implies a specific individual, which is not precise in this context; 'some' is more appropriate and general here.",
                    "context": "In discussing the implications of the British Council's announcement, I explained that some people might say they will hand out IDPs."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "the audience was completely crowded.",
                    "corrected": "the audience was completely packed.",
                    "explanation": "\"Crowded\" is a less idiomatic term in this context; \"packed\" more clearly conveys the idea of being full of people.",
                    "context": "In Kazakhstan, I have students who come to Kazakhstan, here, to Astana. The audience was completely packed. Yes, I give up every year."
                },
                {
                    "original": "she first submitted here in Astana, then went to Turkey.",
                    "corrected": "she first took the test here in Astana, then went to Turkey.",
                    "explanation": "\"Submitted\" is incorrect in this context; \"took the test\" should be used instead.",
                    "context": "In Turkey, I have one girl, she first took the test here in Astana, then went to Turkey. She didn't get there first."
                },
                {
                    "original": "the moment with the writing, for example, when I was writing, I printed very quickly on the keyboard.",
                    "corrected": "the moment with the writing, for example, when I write, I type very quickly on the keyboard.",
                    "explanation": "\"Was writing\" implies a past action, while the correct structure is present tense for a habitual action.",
                    "context": "The only thing is that the moment with the writing, for example, when I write, I type very quickly on the keyboard. I need to write a lot."
                },
                {
                    "original": "That is, here, as if, too, balance.",
                    "corrected": "That is, here, there is also a balance.",
                    "explanation": "The phrase is unclear; \"there is also a balance\" clarifies the thought.",
                    "context": "When you write on paper, the handwriting becomes even more incomprehensible. That is, here, there is also a balance. I think that, well, here, of course, you need to go from personal features to what you like."
                },
                {
                    "original": "the difference between paper-based and computer-based is very fundamental.",
                    "corrected": "the difference between paper-based and computer-based tests is very fundamental.",
                    "explanation": "The phrase lacks clarity; specifying 'tests' makes the meaning clear.",
                    "context": "I always advise you to take a computer. The difference between paper-based and computer-based tests is very fundamental. I always want my students to be prepared."
                },
                {
                    "original": "I can reschedule to an hour.",
                    "corrected": "I can reschedule for an hour.",
                    "explanation": "\"To an hour\" is incorrect; \"for an hour\" is the correct preposition.",
                    "context": "On Monday you can. I can reschedule for an hour. On the twelfth, I will also do it on the third day."
                }
            ]
        },
        "mistakes_5": {
            "mistakes_list": []
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Cramped",
                    "definition": "Confined or limited in space; not spacious.",
                    "context": {
                        "Context 1": "The car felt very cramped when Violetta was learning to drive.",
                        "Context 2": "When we visited the tiny café, we found the seating area so cramped that we had to shuffle to move.",
                        "Context 3": "The storage room was so cramped that it was hard to find the tools I needed."
                    }
                },
                {
                    "word": "Polygon",
                    "definition": "A plane figure that is bounded by a finite chain of straight line segments closing in a loop to form a closed path.",
                    "context": {
                        "Context 1": "In the driving test, they practiced various maneuvers in a polygon area.",
                        "Context 2": "The artist used a polygon shape to frame her painting in the gallery.",
                        "Context 3": "In mathematics, students learn how to calculate the area of different polygons."
                    }
                },
                {
                    "word": "Blame",
                    "definition": "To hold responsible for a fault or wrong; to assign responsibility.",
                    "context": {
                        "Context 1": "Violetta was ready to blame her driving school for her failures during the test.",
                        "Context 2": "Don't blame the weather if your picnic gets canceled; it's just bad luck.",
                        "Context 3": "He didn't want to blame anyone for missing the deadline; it was a group project."
                    }
                },
                {
                    "word": "Commute",
                    "definition": "To travel some distance to work on a regular basis.",
                    "context": {
                        "Context 1": "Violetta preferred not to commute too far to her driver's school.",
                        "Context 2": "She enjoys listening to podcasts during her daily commute to the office.",
                        "Context 3": "In the summer, he likes to avoid the commute by working remotely from the beach."
                    }
                },
                {
                    "word": "Retake",
                    "definition": "To take an exam or test again.",
                    "context": {
                        "Context 1": "After failing the driving test, Violetta knew she would have to retake it.",
                        "Context 2": "He planned to retake the photo because the lighting was not right.",
                        "Context 3": "Students often have a chance to retake midterm exams if they apply early."
                    }
                },
                {
                    "word": "Respect",
                    "definition": "To show consideration or valuing someone or something.",
                    "context": {
                        "Context 1": "Violetta learned the importance of respecting traffic rules while driving.",
                        "Context 2": "In a workplace, mutual respect is crucial for effective teamwork.",
                        "Context 3": "He showed a lot of respect for his elderly neighbors by helping them with groceries."
                    }
                },
                {
                    "word": "Appeal",
                    "definition": "To make a serious or urgent request.",
                    "context": {
                        "Context 1": "Violetta didn't find the test questions very appealing during her exam.",
                        "Context 2": "The charity made an appeal for donations to help the homeless.",
                        "Context 3": "The movie failed to appeal to a younger audience, despite its high budget."
                    }
                },
                {
                    "word": "Determined",
                    "definition": "Having made a firm decision and not letting anything stop you.",
                    "context": {
                        "Context 1": "Despite the challenges, Violetta was determined to pass her driving test.",
                        "Context 2": "She was determined to learn how to play the guitar, practicing every day.",
                        "Context 3": "His determined attitude helped him to climb the mountain despite harsh weather."
                    }
                },
                {
                    "word": "Stressful",
                    "definition": "Causing mental or emotional stress; demanding.",
                    "context": {
                        "Context 1": "Taking the driving test was a very stressful experience for Violetta.",
                        "Context 2": "Planning a wedding can be surprisingly stressful for many couples.",
                        "Context 3": "The stressful situation at work made him consider changing his job."
                    }
                },
                {
                    "word": "Curb",
                    "definition": "The edge of a sidewalk or street; a raised border between the street and a sidewalk.",
                    "context": {
                        "Context 1": "Violetta nearly hit the curb during her driving lesson.",
                        "Context 2": "The dog always loves to sniff the curb when we walk down the street.",
                        "Context 3": "He spent the afternoon painting the curb around his driveway a bright red."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Commute",
                    "fact": "Did you know that some people spend more time commuting than they do on vacation each year?"
                },
                {
                    "word": "Polygon",
                    "fact": "The word polygon comes from the Greek 'polus,' meaning 'many' and 'gonia,' meaning 'angle.' So, a polygon is literally a shape with many angles!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the scarecrow win an award?",
                    "answer": "Because he was outstanding in his field!"
                },
                {
                    "question": "Why was the math book sad?",
                    "answer": "Because it had too many problems!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Acquire",
                    "definition": "To gain or obtain something.",
                    "context": {
                        "Context 1": "We acquire vocabulary in a very weird way.",
                        "Context 2": "He hopes to acquire enough points to win the game.",
                        "Context 3": "After years of practice, she finally acquired the skills to play the piano beautifully."
                    }
                },
                {
                    "word": "Memorize",
                    "definition": "To learn something so that you can remember it perfectly.",
                    "context": {
                        "Context 1": "People often try to memorize vocabulary lists.",
                        "Context 2": "She needed to memorize the dialogue for her role in the school play.",
                        "Context 3": "To prepare for the test, he had to memorize all the capitals of the countries."
                    }
                },
                {
                    "word": "Devoted",
                    "definition": "Very loving or loyal towards someone or something.",
                    "context": {
                        "Context 1": "He's a very devoted young man.",
                        "Context 2": "She is devoted to helping her community every weekend.",
                        "Context 3": "After years in the band, he remained devoted to his music career."
                    }
                },
                {
                    "word": "Intent",
                    "definition": "An aim or purpose.",
                    "context": {
                        "Context 1": "My intent is to teach you how to do the reading task effectively.",
                        "Context 2": "She had every intent to finish her project on time.",
                        "Context 3": "His intent to travel the world motivated him to save money."
                    }
                },
                {
                    "word": "Satisfaction",
                    "definition": "A feeling of pleasure or contentment.",
                    "context": {
                        "Context 1": "Achieving goals results in satisfaction.",
                        "Context 2": "He found great satisfaction in completing his puzzle.",
                        "Context 3": "After years of hard work, she finally experienced satisfaction from her accomplishments."
                    }
                },
                {
                    "word": "Grudge",
                    "definition": "A persistent feeling of ill will or resentment resulting from a past insult or injury.",
                    "context": {
                        "Context 1": "To hold a grudge means to be angry at someone or something.",
                        "Context 2": "He held a grudge against his colleague for stealing his idea.",
                        "Context 3": "Despite what happened at school, she decided to forgive and not hold a grudge."
                    }
                },
                {
                    "word": "Appeal",
                    "definition": "The quality of being attractive or interesting.",
                    "context": {
                        "Context 1": "Math held little appeal for him.",
                        "Context 2": "The appeal of the vacation destination attracted many tourists.",
                        "Context 3": "Her artwork has an appeal to children and adults alike."
                    }
                },
                {
                    "word": "Setback",
                    "definition": "A reversal or check in progress.",
                    "context": {
                        "Context 1": "In the face of setbacks, we learn to adapt.",
                        "Context 2": "He faced a setback when his car broke down before the trip.",
                        "Context 3": "Despite the setback in funding, the project was still on track."
                    }
                },
                {
                    "word": "Resilient",
                    "definition": "Able to withstand or recover quickly from difficult conditions.",
                    "context": {
                        "Context 1": "A resilient person can bounce back from failures.",
                        "Context 2": "After the storm, the resilient community came together to rebuild.",
                        "Context 3": "She remained resilient through all the challenges of her training."
                    }
                },
                {
                    "word": "Gradually",
                    "definition": "In a gradual manner; slowly and steadily.",
                    "context": {
                        "Context 1": "Your brain will gradually understand the word's meaning.",
                        "Context 2": "I gradually learned to swim after many lessons.",
                        "Context 3": "The seasons change gradually from winter to spring."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Acquisition",
                    "fact": "The largest acquisition in history was made by Vodafone, who acquired Mannesmann for $202 billion in 2000!"
                },
                {
                    "word": "Satisfaction",
                    "fact": "The infamous 'Satisfaction' song by the Rolling Stones is still one of the most played songs around the world, proving that sometimes satisfaction really is about the classics!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the vocabulary book look so sad?",
                    "answer": "Because it had too many problems with pronunciation!"
                },
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Resolute",
                    "definition": "Admirably purposeful, determined, and unwavering.",
                    "context": {
                        "Context 1": "She remained resolute even when faced with numerous challenges during her studies.",
                        "Context 2": "The resolute puppy refused to give up on fetching the ball despite the rain.",
                        "Context 3": "He had a resolute appetite for adventure, trying new foods in every country he visited."
                    }
                },
                {
                    "word": "Devoted",
                    "definition": "Very loving or loyal.",
                    "context": {
                        "Context 1": "He was devoted to his studies, spending countless hours in the library.",
                        "Context 2": "The devoted cat followed its owner everywhere, even to the bathroom.",
                        "Context 3": "She devoted her weekend to building a sandcastle at the beach."
                    }
                },
                {
                    "word": "Determined",
                    "definition": "Having made a firm decision and being resolved not to let anything prevent it.",
                    "context": {
                        "Context 1": "The student was determined to improve their English score before the exam.",
                        "Context 2": "She was determined to learn how to bake the perfect chocolate cake, despite several failures.",
                        "Context 3": "He felt determined to finish the marathon, even though he had never run such a long distance before."
                    }
                },
                {
                    "word": "Context",
                    "definition": "The circumstances that form the setting for an event, statement, or idea.",
                    "context": {
                        "Context 1": "Understanding the context of the lesson helped the students grasp the vocabulary better.",
                        "Context 2": "In the context of a busy city, the park felt like a peaceful oasis.",
                        "Context 3": "The context of the movie was a futuristic society where robots coexisted with humans."
                    }
                },
                {
                    "word": "Philosophical",
                    "definition": "Relating to the study of the fundamental nature of knowledge, reality, and existence.",
                    "context": {
                        "Context 1": "The philosophical discussion on determinism opened up new ways of thinking about choice.",
                        "Context 2": "She took a philosophical approach to gardening, believing plants have feelings.",
                        "Context 3": "He often made philosophical jokes about life, using humor to tackle serious subjects."
                    }
                },
                {
                    "word": "Deterministic",
                    "definition": "Relating to determinism, which is the philosophy that all events, including moral choices, are determined completely by previously existing causes.",
                    "context": {
                        "Context 1": "The deterministic view in the lesson suggested that certain outcomes are bound to happen based on prior actions.",
                        "Context 2": "In a deterministic video game, the result of a player's decision is always predetermined by the programming.",
                        "Context 3": "The scientist argued against a deterministic perspective, believing in randomness and free will."
                    }
                },
                {
                    "word": "Assumption",
                    "definition": "A thing that is accepted as true or as certain to happen, without proof.",
                    "context": {
                        "Context 1": "Based on the assumption that the test would be similar, she prepared by practicing old tests.",
                        "Context 2": "His assumption that everyone would like pineapple on pizza was quickly proven wrong.",
                        "Context 3": "The assumption that cats would always land on their feet was challenged when she saw her cat slip."
                    }
                },
                {
                    "word": "Significant",
                    "definition": "Sufficiently great or important to be worthy of attention.",
                    "context": {
                        "Context 1": "The significant increase in scores indicated that the study method was effective.",
                        "Context 2": "Finding the old family photos was a significant moment in her nostalgia journey.",
                        "Context 3": "The significant snail he found in his garden turned out to be a rare species."
                    }
                },
                {
                    "word": "Component",
                    "definition": "A part or element of a larger whole, especially in a machine or system.",
                    "context": {
                        "Context 1": "Each component of the exam contributes to the final score assessed by the teacher.",
                        "Context 2": "The main component of her smoothie was spinach, surprisingly adding a healthy touch.",
                        "Context 3": "He was fascinated by how each component of the clock worked in synergy."
                    }
                },
                {
                    "word": "Practice",
                    "definition": "Repeated exercise in or performance of an activity or skill to acquire or maintain proficiency in it.",
                    "context": {
                        "Context 1": "Consistent practice with reading led to noticeable improvements in vocabulary.",
                        "Context 2": "The magician's practice routines began with simple card tricks and evolved into complex illusions.",
                        "Context 3": "To improve his painting skills, he scheduled practice sessions every weekend."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Determined",
                    "fact": "Did you know that athletes like dogs, often have a 'determined' expression as they go for their goals?"
                },
                {
                    "word": "Component",
                    "fact": "In some board games, players can be a 'component' of the game itself, becoming part of the story!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                },
                {
                    "question": "Why did the English teacher go to jail?",
                    "answer": "Because she had too many run-on sentences!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Listening",
                    "definition": "The act of hearing something attentively.",
                    "context": {
                        "Context 1": "Listening to audio recordings can improve your comprehension skills.",
                        "Context 2": "He practiced his listening skills by attending concerts.",
                        "Context 3": "The dog was listening closely for its owner's voice."
                    }
                },
                {
                    "word": "Transfer",
                    "definition": "To move something from one place to another.",
                    "context": {
                        "Context 1": "You need to transfer your answers to the answer sheet carefully.",
                        "Context 2": "She decided to transfer her data to a new computer.",
                        "Context 3": "The freight company will transfer goods across the country."
                    }
                },
                {
                    "word": "Draft",
                    "definition": "A preliminary version of a piece of writing.",
                    "context": {
                        "Context 1": "It’s helpful to create a draft before finalizing your essay.",
                        "Context 2": "The architect showed us the draft of the new building design.",
                        "Context 3": "He made a draft for his comic book story before illustrating it."
                    }
                },
                {
                    "word": "Overriding",
                    "definition": "The act of replacing a previous setting or decision.",
                    "context": {
                        "Context 1": "Overriding your previous notes can help clarify your thoughts.",
                        "Context 2": "She was accused of overriding the company's regulations.",
                        "Context 3": "The manager decided to implement an overriding policy for customer complaints."
                    }
                },
                {
                    "word": "Handwriting",
                    "definition": "The form of writing made by hand.",
                    "context": {
                        "Context 1": "Improving your handwriting can help make your writing more legible.",
                        "Context 2": "He admired her elegant handwriting on the invitation.",
                        "Context 3": "The teacher was impressed by the children’s creative handwriting in their projects."
                    }
                },
                {
                    "word": "Audience",
                    "definition": "A group of people who gather to watch or listen to something.",
                    "context": {
                        "Context 1": "The audience was quiet as they listened to the lecture.",
                        "Context 2": "She performed her dance in front of a large audience.",
                        "Context 3": "The audience at the movie premiere was excited to see the film."
                    }
                },
                {
                    "word": "Restructure",
                    "definition": "To organize something in a new way.",
                    "context": {
                        "Context 1": "It’s important to restructure your essay for clarity.",
                        "Context 2": "The company plans to restructure its services to improve efficiency.",
                        "Context 3": "After several meetings, they decided to restructure the entire project timeline."
                    }
                },
                {
                    "word": "Correcting",
                    "definition": "The act of making something free from errors or mistakes.",
                    "context": {
                        "Context 1": "Correcting your mistakes will help you learn better.",
                        "Context 2": "She spent hours correcting the errors in the manuscript.",
                        "Context 3": "He enjoys correcting his friends' grammar in casual conversations."
                    }
                },
                {
                    "word": "Practice",
                    "definition": "Repetitive exercise in a skill to improve performance.",
                    "context": {
                        "Context 1": "Regular practice can significantly enhance your writing skills.",
                        "Context 2": "He made a habit of practice to become a better guitarist.",
                        "Context 3": "They decided to practice yoga every morning before work."
                    }
                },
                {
                    "word": "Reschedule",
                    "definition": "To change the time at which something is arranged to happen.",
                    "context": {
                        "Context 1": "We need to reschedule our meeting for next week.",
                        "Context 2": "The school had to reschedule the field trip due to bad weather.",
                        "Context 3": "He tried to reschedule his doctor's appointment on short notice."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Transfer",
                    "fact": "Did you know that the term 'transfer' comes from the Latin 'trans' meaning 'across' and 'ferre' meaning 'to carry'? So you’re really 'carrying across' something!"
                },
                {
                    "word": "Draft",
                    "fact": "In the past, the term 'draft' referred to drawing the water from a well! Now, it's all about writing drafts!"
                },
                {
                    "word": "Restructure",
                    "fact": "The word 'restructure' is often used in business, but did you know that many cats decide to 'restructure' their owner's lap time whenever they feel like it?"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the computer break up with the printer?",
                    "answer": "Because it couldn’t handle the paper jams!"
                },
                {
                    "question": "Why was the math book sad?",
                    "answer": "Because it had too many problems!"
                }
            ]
        },
        "vocabulary_5": {
            "vocabulary_list": [
                {
                    "word": "Consistency",
                    "definition": "The quality of always behaving in a similar way, or of always happening in a similar way.",
                    "context": {
                        "Context 1": "Her consistency in studying led to improved grades.",
                        "Context 2": "The weather in spring often shows consistency with warm days following cold nights.",
                        "Context 3": "He admired the consistency of the coffee shop's opening hours."
                    }
                },
                {
                    "word": "Repetition",
                    "definition": "The action of repeating something that has already been said or written.",
                    "context": {
                        "Context 1": "The teacher emphasized the importance of repetition to master a new language.",
                        "Context 2": "Repetition of the same song can make it popular and catchy.",
                        "Context 3": "In exercise, repetition of movements helps build muscle memory."
                    }
                },
                {
                    "word": "Schedule",
                    "definition": "A plan for carrying out a process or procedure, giving lists of intended events and times.",
                    "context": {
                        "Context 1": "I always keep my schedule organized so I don’t forget important tasks.",
                        "Context 2": "Their vacation schedule included a visit to three different cities.",
                        "Context 3": "A well-structured school schedule can help students manage their time effectively."
                    }
                },
                {
                    "word": "Routine",
                    "definition": "A sequence of actions regularly followed; a fixed program.",
                    "context": {
                        "Context 1": "Following a morning routine can improve productivity throughout the day.",
                        "Context 2": "Her dance routine received a standing ovation at the recital.",
                        "Context 3": "Many people have a bedtime routine to prepare for sleep."
                    }
                },
                {
                    "word": "Reinforce",
                    "definition": "To strengthen or support, especially with additional personnel or material.",
                    "context": {
                        "Context 1": "The teacher used games to reinforce the vocabulary lessons.",
                        "Context 2": "The soldiers were sent to reinforce the front lines during the battle.",
                        "Context 3": "Ice cream is often used to reinforce good behavior in children."
                    }
                },
                {
                    "word": "Prioritize",
                    "definition": "To designate or treat something as more important than other things.",
                    "context": {
                        "Context 1": "Students must learn to prioritize their assignments to manage their workload effectively.",
                        "Context 2": "When planning a party, it's wise to prioritize the guest list over decoration.",
                        "Context 3": "She prioritized her health by choosing to eat healthier meals."
                    }
                },
                {
                    "word": "Engage",
                    "definition": "To attract and hold someone’s attention or interest.",
                    "context": {
                        "Context 1": "Teachers should engage students with interactive lessons.",
                        "Context 2": "The movie aims to engage viewers with its exciting plot.",
                        "Context 3": "He loves to engage with his friends through video games."
                    }
                },
                {
                    "word": "Feedback",
                    "definition": "Information about reactions to a product, a person's performance, or a process, used as a basis for improvement.",
                    "context": {
                        "Context 1": "Receiving constructive feedback can help students improve their work.",
                        "Context 2": "The feedback from their pets always is affectionate.",
                        "Context 3": "Many companies send feedback surveys to customers after their purchases."
                    }
                },
                {
                    "word": "Flexibility",
                    "definition": "The quality of bending easily without breaking; adaptability to change.",
                    "context": {
                        "Context 1": "Flexibility in her schedule allowed her to take up new opportunities.",
                        "Context 2": "Yoga is a great exercise for improving flexibility.",
                        "Context 3": "A flexible work environment can lead to happier employees."
                    }
                },
                {
                    "word": "Productivity",
                    "definition": "The state or quality of producing something, especially in large amounts.",
                    "context": {
                        "Context 1": "Setting goals can increase your productivity during study sessions.",
                        "Context 2": "Farmers aim for high productivity to meet the demands of the market.",
                        "Context 3": "A clean workspace often boosts productivity significantly."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Repetition",
                    "fact": "In science, if a theory is proven wrong repeatedly, it’s still valid if it causes laughter each time!"
                },
                {
                    "word": "Engage",
                    "fact": "Some zoos engage animals in games, proving that fun at work isn’t limited to humans!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the teacher go to the beach?",
                    "answer": "To test the waters!"
                },
                {
                    "question": "How does a penguin build its house?",
                    "answer": "Igloos it together!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey there! Good morning! How’s it going?"
                },
                {
                    "Person 2": "Good morning! I’m doing well, just trying to wake up. How about you?"
                },
                {
                    "Person 1": "I’m good, thanks! I heard you finally got your driver’s license. Congrats!"
                },
                {
                    "Person 2": "Thanks! I can’t believe I actually passed. It took me a few tries, though."
                },
                {
                    "Person 1": "Yeah, everyone says the driving test is super stressful. Was it as bad as they say?"
                },
                {
                    "Person 2": "Definitely. I almost hit the curb while parallel parking. My heart was racing!"
                },
                {
                    "Person 1": "Yikes! That sounds intense! I remember almost failing mine too."
                },
                {
                    "Person 2": "What happened? Did you have a similar story?"
                },
                {
                    "Person 1": "Sort of! I backed up too fast and nearly hit a cone. They told me that was an automatic fail."
                },
                {
                    "Person 2": "Oh wow! That’s terrifying! It’s like they’re waiting for you to mess up."
                },
                {
                    "Person 1": "Exactly! I think I was so nervous that I forgot all the rules they taught us."
                },
                {
                    "Person 2": "Same! But once you actually get on the road, it gets easier, right?"
                },
                {
                    "Person 1": "Yeah, I feel so much more confident driving now. It's like a whole new world!"
                },
                {
                    "Person 2": "Right? Just don’t think about the rules too much while driving, or you'll panic!"
                },
                {
                    "Person 1": "Haha, true! So, what’s your plan now that you can drive?"
                },
                {
                    "Person 2": "I want to hit the road and explore! Maybe a weekend trip somewhere?"
                },
                {
                    "Person 1": "That sounds awesome! Let’s plan a little road trip soon!"
                },
                {
                    "Person 2": "Absolutely! Just let me know when you’re free!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just got back from the gym. How about you?"
                },
                {
                    "Person 1": "Nice! I’ve been meaning to go. I just keep procrastinating."
                },
                {
                    "Person 2": "I totally get that. Sometimes it's tough to find the motivation, you know?"
                },
                {
                    "Person 1": "Right? I start thinking about how much I'd rather be on the couch watching TV."
                },
                {
                    "Person 2": "Exactly! But I always feel better afterward. It’s like a mood booster."
                },
                {
                    "Person 1": "True! I should probably just get a workout buddy to keep me accountable."
                },
                {
                    "Person 2": "That’s a great idea! It's always more fun with a friend. Plus, you can motivate each other!"
                },
                {
                    "Person 1": "Yeah, and maybe I won’t skip as many workouts then."
                },
                {
                    "Person 2": "For sure! What kind of workouts do you like?"
                },
                {
                    "Person 1": "I used to enjoy running, but lately, I've been into yoga."
                },
                {
                    "Person 2": "Yoga is awesome! It's so relaxing. I should try that sometime."
                },
                {
                    "Person 1": "You definitely should! It can really help with stress."
                },
                {
                    "Person 2": "That's what I need. I'm thinking about signing up for a class this week."
                },
                {
                    "Person 1": "Do it! Let me know how it goes!"
                },
                {
                    "Person 2": "Will do! And maybe we can hit the gym together too."
                },
                {
                    "Person 1": "Absolutely! Looking forward to it!"
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you see that new coffee shop that just opened down the street?"
                },
                {
                    "Person 2": "Yeah! I walked by it yesterday. It looks super cute! Have you been in yet?"
                },
                {
                    "Person 1": "Not yet, but I heard they have some amazing lattes. We should totally check it out this weekend!"
                },
                {
                    "Person 2": "Definitely! I could go for a good cappuccino. Plus, I heard they have delicious pastries."
                },
                {
                    "Person 1": "Ooh, pastries sound nice! I could use some sugar to start my day."
                },
                {
                    "Person 2": "Same here! What time are you thinking of going?"
                },
                {
                    "Person 1": "How about Saturday around 10? We can grab a bite and catch up."
                },
                {
                    "Person 2": "Perfect! I’ll bring my book too, just in case we want to chill for a bit."
                },
                {
                    "Person 1": "Sounds like a plan! I’ve been meaning to finish that novel."
                },
                {
                    "Person 2": "Oh nice! I just started a new one. We can exchange recommendations."
                },
                {
                    "Person 1": "For sure! I love finding new books to read."
                },
                {
                    "Person 2": "Me too! Alright, Saturday at 10 it is. Can’t wait!"
                },
                {
                    "Person 1": "Same here! See you then!"
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you check out that new coffee shop downtown?"
                },
                {
                    "Person 2": "Not yet! I’ve heard good things about it though. Is it worth a visit?"
                },
                {
                    "Person 1": "Definitely! Their lattes are amazing, and the vibe is super cozy."
                },
                {
                    "Person 2": "Nice! I love a good coffee shop. Do they have outdoor seating?"
                },
                {
                    "Person 1": "Yep, they’ve got a nice patio. Perfect for people-watching."
                },
                {
                    "Person 2": "Awesome! I’m always down for some people-watching. Should we go this weekend?"
                },
                {
                    "Person 1": "Sounds great! Do you want to go Saturday or Sunday?"
                },
                {
                    "Person 2": "How about Saturday morning? We could grab breakfast there too."
                },
                {
                    "Person 1": "That’s a plan! I’ll bring my laptop and maybe we can get some work done too."
                },
                {
                    "Person 2": "Perfect! I’ve been meaning to catch up on some stuff. Plus, coffee and productivity go hand in hand!"
                },
                {
                    "Person 1": "Exactly! I’m looking forward to it. What time should we meet?"
                },
                {
                    "Person 2": "How about 10? It shouldn’t be too crowded then."
                },
                {
                    "Person 1": "10 works for me! Can’t wait to check it out."
                },
                {
                    "Person 2": "Same here! It’ll be nice to hang out and grab some caffeine."
                },
                {
                    "Person 1": "For sure! It’ll be a good break from the usual routine."
                },
                {
                    "Person 2": "Absolutely! See you Saturday at 10 then!"
                }
            ]
        },
        "dialogue_5": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you catch that game last night?"
                },
                {
                    "Person 2": "Oh yeah! It was a nail-biter! I thought they were going to lose for sure."
                },
                {
                    "Person 1": "Same here! That last-minute goal was insane!"
                },
                {
                    "Person 2": "I know, right? I was jumping up and down in my living room!"
                },
                {
                    "Person 1": "Haha, I can imagine! What do you think about the team's chances this season?"
                },
                {
                    "Person 2": "I think they have a solid shot if they can keep playing like that. Defense needs a bit of work, though."
                },
                {
                    "Person 1": "True, but their offense is on fire! They've really stepped it up this year."
                },
                {
                    "Person 2": "Exactly! Plus, it's nice to see all the new players fitting in so well."
                },
                {
                    "Person 1": "For sure! You going to the next game?"
                },
                {
                    "Person 2": "Absolutely! I wouldn’t miss it. Got my tickets already!"
                },
                {
                    "Person 1": "Awesome! Let’s grab some snacks before the game!"
                },
                {
                    "Person 2": "Definitely, nothing like game day snacks! What’s your go-to?"
                },
                {
                    "Person 1": "I’m all about the nachos and cheese. How about you?"
                },
                {
                    "Person 2": "Can’t go wrong with hot dogs! Can’t wait!"
                },
                {
                    "Person 1": "Same here! It’s going to be great!"
                },
                {
                    "Person 2": "Enjoy the game, buddy! Later!"
                },
                {
                    "Person 1": "You too! Catch you later!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
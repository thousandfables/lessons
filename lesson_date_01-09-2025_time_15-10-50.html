<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I'm started in English school.",
                    "corrected": "I started in English school.",
                    "explanation": "The verb 'started' should be in the past tense without 'am' for correct sentence structure.",
                    "context": "I began my journey in English school when I was younger. I started in English school and had lessons with a native speaker once a week."
                },
                {
                    "original": "I wrote this many videos or character animations.",
                    "corrected": "I create many videos or character animations.",
                    "explanation": "'Wrote' is incorrect here; 'create' is more appropriate for producing videos and animations.",
                    "context": "In my studies, I focus on creating visual content. I create many videos or character animations, particularly using Blender and After Effects."
                },
                {
                    "original": "I want to pass it just for myself to prove that I know English.",
                    "corrected": "I want to pass it just for myself to prove to myself that I know English.",
                    "explanation": "The phrase 'prove that I know English' should specify 'to myself' for clarity.",
                    "context": "I have personal goals for my English proficiency. I want to pass it just for myself to prove to myself that I know English."
                },
                {
                    "original": "I think I speak in American English.",
                    "corrected": "I think I speak American English.",
                    "explanation": "The preposition 'in' is unnecessary; 'speak American English' is the correct form.",
                    "context": "I've had lessons with native speakers from America. I think I speak American English, although I studied British English at school."
                },
                {
                    "original": "I made a half of all of the...",
                    "corrected": "I got half of all of the...",
                    "explanation": "'Made a half' is not idiomatic; 'got half' is the correct expression.",
                    "context": "When discussing my reading score, I mentioned my performance. I got half of all of the answers correct."
                },
                {
                    "original": "I tried to make tests on any sites.",
                    "corrected": "I tried to take tests on various sites.",
                    "explanation": "'Make tests' is incorrect; 'take tests' is the appropriate phrase.",
                    "context": "To improve my reading skills, I sought additional practice. I tried to take tests on various sites, but faced similar challenges."
                },
                {
                    "original": "I understand that there are an introduction, the main point, and the ending conclusion.",
                    "corrected": "I understand that there is an introduction, the main point, and a concluding section.",
                    "explanation": "The subject 'there' should be followed by 'is' instead of 'are' for singular items.",
                    "context": "When discussing essay writing, I recognized the structure. I understand that there is an introduction, the main point, and a concluding section."
                },
                {
                    "original": "I wrote it on my English exam.",
                    "corrected": "I wrote an essay for my English exam.",
                    "explanation": "The phrase 'it' is vague; specifying 'an essay' clarifies the context.",
                    "context": "I have some experience with writing essays. I wrote an essay for my English exam, but that was my only experience."
                },
                {
                    "original": "I don't know how to say beautiful.",
                    "corrected": "I don't know how to express 'beautiful' formally.",
                    "explanation": "'Say beautiful' is informal; 'express' is more appropriate for formal contexts.",
                    "context": "When discussing vocabulary, I expressed my concerns. I don't know how to express 'beautiful' formally in my writing."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "Because there are a lot of... In social media, you can say whatever you want without approving this information.",
                    "corrected": "Because there are a lot of instances where, in social media, you can say whatever you want without verifying this information.",
                    "explanation": "The phrase 'approving this information' is incorrect; 'verifying' is the appropriate term when discussing the accuracy of information.",
                    "context": "I believe that social media spreads more misinformation than useful information. Because there are a lot of instances where, in social media, you can say whatever you want without verifying this information. People often accept it without question."
                },
                {
                    "original": "Because most people don't like to Google it or to watch, is it true, is it real or not.",
                    "corrected": "Because most people don't like to Google it or to check if it's true or real.",
                    "explanation": "The phrase 'to watch, is it true, is it real or not' is awkward; 'to check if it's true or real' is clearer and more idiomatic.",
                    "context": "People just believe in that. Because most people don't like to Google it or to check if it's true or real. They often take information at face value."
                },
                {
                    "original": "And maybe it's not too important for them to concentrate on this information.",
                    "corrected": "And maybe it's not very important for them to focus on this information.",
                    "explanation": "'Not too important' is less idiomatic; 'not very important' is the correct expression. Additionally, 'concentrate on' is often replaced with 'focus on' in this context.",
                    "context": "They just believe in that. And maybe it's not very important for them to focus on this information. They often prioritize other things over verifying facts."
                },
                {
                    "original": "But they should be about different aspects or two completely different things.",
                    "corrected": "But they should be about different aspects or two completely different topics.",
                    "explanation": "'Things' is too vague; 'topics' is more precise and appropriate for academic writing.",
                    "context": "We need two ideas, two separate reasons, because we need two body paragraphs. But they should be about different aspects or two completely different topics."
                },
                {
                    "original": "So if our idea one, everybody posts everything and nobody fact checks nothing, what would our second idea be?",
                    "corrected": "So if our first idea is that everybody posts everything and nobody fact-checks anything, what would our second idea be?",
                    "explanation": "The phrase 'idea one' should be 'first idea,' and 'nobody fact checks nothing' is a double negative; it should be 'nobody fact-checks anything.'",
                    "context": "We need to come up with two ideas for our essay. So if our first idea is that everybody posts everything and nobody fact-checks anything, what would our second idea be?"
                },
                {
                    "original": "Maybe to hide something important, for example, when a lot of people post misinformation, something really important, people wouldn't think that it's real.",
                    "corrected": "Maybe to hide something important; for example, when many people post misinformation, something really important, people won't think that it's real.",
                    "explanation": "The phrase 'a lot of' is informal; 'many' is more appropriate in this context. Additionally, 'wouldn't' should be 'won't' to indicate a general truth.",
                    "context": "There might be motivations behind misinformation. Maybe to hide something important; for example, when many people post misinformation, something really important, people won't think that it's real."
                },
                {
                    "original": "To protect, in your case.",
                    "corrected": "To protect, for example, in your case.",
                    "explanation": "'In your case' is vague; 'for example, in your case' clarifies the reference.",
                    "context": "When discussing motivations for media behavior, we might consider various reasons. To protect, for example, in your case."
                },
                {
                    "original": "It's an example itself.",
                    "corrected": "It's an example in itself.",
                    "explanation": "The phrase 'an example itself' is awkward; 'an example in itself' is the correct idiomatic expression.",
                    "context": "When we develop our ideas, we can find supporting evidence. It's an example in itself."
                },
                {
                    "original": "And the other is to get more views, likes, to be more popular.",
                    "corrected": "And the other is to gain more views, likes, and to become more popular.",
                    "explanation": "'Get' is too informal; 'gain' is more appropriate in this context. Additionally, 'to be more popular' should be 'to become more popular.'",
                    "context": "I can see your two ideas clearly now. And the other is to gain more views, likes, and to become more popular."
                },
                {
                    "original": "Or the person who doesn't get us very well.",
                    "corrected": "Or the person who doesn't understand us very well.",
                    "explanation": "'Get' is informal; 'understand' is more appropriate in this context.",
                    "context": "When writing our explanation, we should consider the audience. Or the person who doesn't understand us very well."
                },
                {
                    "original": "And government don't punish them because there's too much of them, too many?",
                    "corrected": "And the government doesn't punish them because there are too many of them?",
                    "explanation": "'Government' should be preceded by 'the' for specificity, and 'don't' should be 'doesn't' to match the singular subject. 'There's too much of them' should be 'there are too many of them.'",
                    "context": "We should also consider why misinformation continues. And the government doesn't punish them because there are too many of them?"
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "I would more focus on why, for example, producing deepfakes is more profitable than reporting true news.",
                    "corrected": "I would focus more on why, for example, producing deepfakes is more profitable than reporting true news.",
                    "explanation": "The phrase 'I would more focus' is incorrect; the correct structure is 'I would focus more.'",
                    "context": "When discussing the topic, I realized that it's crucial to understand the motivations behind certain actions. I would focus more on why, for example, producing deepfakes is more profitable than reporting true news. This perspective sheds light on the issue."
                },
                {
                    "original": "It's easy to make a deepfake than making real information with proofs.",
                    "corrected": "It's easier to make a deepfake than to make real information with proof.",
                    "explanation": "'Easy' should be 'easier' for comparison, and 'with proofs' should be 'with proof' for correct usage.",
                    "context": "In my analysis, I noted the challenges of creating authentic content. It's easier to make a deepfake than to make real information with proof. This highlights the issues we face with misinformation."
                },
                {
                    "original": "If you would say, well, my friend had this bad experience.",
                    "corrected": "If you say, well, my friend had this bad experience.",
                    "explanation": "'If you would say' is incorrect; it should be 'If you say' for proper conditional structure.",
                    "context": "When providing examples, clarity is essential. If you say, well, my friend had this bad experience, it illustrates a point. However, it should be more representative."
                },
                {
                    "original": "It should be more representative.",
                    "corrected": "It should be more representative.",
                    "explanation": "This sentence is correct but lacks context; it could be expanded for clarity.",
                    "context": "In discussing examples, I emphasized the need for broader representation. It should be more representative of the general population. This way, the argument gains more weight."
                },
                {
                    "original": "An example. Can I say because it's not and use platform and then people hear something there.",
                    "corrected": "Can I say it’s not just any platform and then people hear something there?",
                    "explanation": "The original sentence is fragmented and unclear; it needs restructuring for clarity.",
                    "context": "When discussing examples, I wanted to clarify my point. Can I say it’s not just any platform and then people hear something there? This distinction is important for understanding."
                },
                {
                    "original": "It's great for explanation because explanations are general description example should be specific.",
                    "corrected": "It's great for explanation because explanations are general, but examples should be specific.",
                    "explanation": "The sentence lacks proper punctuation and conjunctions, making it confusing; it should be clearer.",
                    "context": "In my explanation, I highlighted the difference between general and specific. It's great for explanation because explanations are general, but examples should be specific. This helps in making the argument stronger."
                },
                {
                    "original": "TikTok, it's the name of the platform.",
                    "corrected": "TikTok is the name of the platform.",
                    "explanation": "The contraction 'it's' is incorrect here; 'is' should be used for clarity.",
                    "context": "While discussing platforms, I pointed out the importance of proper naming. TikTok is the name of the platform. This ensures accurate communication."
                },
                {
                    "original": "Digger is popular platforms.",
                    "corrected": "There are popular platforms.",
                    "explanation": "'Digger' is incorrect; it should be 'there are' to indicate existence.",
                    "context": "When talking about social media, I wanted to emphasize variety. There are popular platforms that influence our daily lives. This is crucial for understanding the landscape."
                },
                {
                    "original": "The word news, though it has S at the end, it is uncountable.",
                    "corrected": "The word 'news,' though it has an 's' at the end, is uncountable.",
                    "explanation": "The sentence structure is awkward; it should be rephrased for better flow.",
                    "context": "In discussing language nuances, I explained a common misconception. The word 'news,' though it has an 's' at the end, is uncountable. This is a key point in understanding English grammar."
                },
                {
                    "original": "Saying advices is the same as saying informations.",
                    "corrected": "Saying 'advices' is the same as saying 'informations.'",
                    "explanation": "The original sentence lacks quotation marks around the words for clarity.",
                    "context": "While clarifying grammar rules, I made a comparison. Saying 'advices' is the same as saying 'informations.' This highlights common mistakes in English usage."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "They do not take it seriously.",
                    "corrected": "They do not take it seriously.",
                    "explanation": "No mistake; this sentence is correct.",
                    "context": "Some people disregard important information. They do not take it seriously. This can lead to misinformation."
                },
                {
                    "original": "Do not watch if it is true or not.",
                    "corrected": "Do not watch if it's true or not.",
                    "explanation": "The contraction 'it's' is more appropriate here than 'it is' for a conversational tone.",
                    "context": "When discussing misinformation, I advised caution. Do not watch if it's true or not. It's better to verify information first."
                },
                {
                    "original": "A lot of proof.",
                    "corrected": "A lot of proof.",
                    "explanation": "No mistake; this sentence is correct.",
                    "context": "In discussing evidence, I mentioned the term. A lot of proof is necessary to support claims. It's important to have solid evidence."
                },
                {
                    "original": "Any proof?",
                    "corrected": "Do you have any proof?",
                    "explanation": "The original sentence lacks a subject and verb, making it incomplete.",
                    "context": "During our discussion about misinformation, I asked for evidence. Do you have any proof? It's crucial to back up statements."
                },
                {
                    "original": "You don't have.",
                    "corrected": "You don't have any proof.",
                    "explanation": "The original sentence is incomplete; it needs an object to clarify what is lacking.",
                    "context": "In our conversation about evidence, I pointed out a lack of support. You don't have any proof. This makes it hard to trust the information."
                },
                {
                    "original": "We for... Any proof?",
                    "corrected": "What about any proof?",
                    "explanation": "The original phrase is unclear and fragmented; it needs restructuring for clarity.",
                    "context": "I was trying to clarify a point about evidence. What about any proof? It's essential to have something concrete."
                },
                {
                    "original": "It's a much simpler process.",
                    "corrected": "It's a much simpler process.",
                    "explanation": "No mistake; this sentence is correct.",
                    "context": "While discussing writing techniques, I emphasized simplicity. It's a much simpler process to follow clear guidelines."
                },
                {
                    "original": "Making less fewer error mistakes, grammar mistakes.",
                    "corrected": "Making fewer grammatical mistakes.",
                    "explanation": "'Less' is used for uncountable nouns, while 'fewer' is used for countable nouns. 'Error mistakes' is redundant.",
                    "context": "In our writing session, I highlighted areas for improvement. Making fewer grammatical mistakes is essential for clarity."
                },
                {
                    "original": "Spend time there for fun.",
                    "corrected": "Spend time there to have fun.",
                    "explanation": "The phrase 'for fun' is less idiomatic; 'to have fun' is more natural in this context.",
                    "context": "I encouraged students to enjoy their learning experience. Spend time there to have fun. It makes the process more enjoyable."
                },
                {
                    "original": "This part.",
                    "corrected": "This part is redundant.",
                    "explanation": "The original phrase is incomplete; it needs a verb to clarify the statement.",
                    "context": "While reviewing the lesson, I pointed out unnecessary information. This part is redundant and can be removed for clarity."
                },
                {
                    "original": "I will throw more grammar.",
                    "corrected": "I will cover more grammar.",
                    "explanation": "'Throw' is not appropriate in this context; 'cover' is more suitable for discussing topics.",
                    "context": "I planned future lessons to enhance understanding. I will cover more grammar to help with your writing skills."
                },
                {
                    "original": "I don't have a specific goal for the exam.",
                    "corrected": "I don't have a specific goal for the exam.",
                    "explanation": "No mistake; this sentence is correct.",
                    "context": "When discussing my study plans, I mentioned my lack of urgency. I don't have a specific goal for the exam, which allows me to learn at my own pace."
                },
                {
                    "original": "You can do it in such a comfortable mode.",
                    "corrected": "You can do it at a comfortable pace.",
                    "explanation": "'In such a comfortable mode' is awkward; 'at a comfortable pace' is more idiomatic.",
                    "context": "I reassured my student about their study approach. You can do it at a comfortable pace, ensuring you grasp the material."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Context",
                    "definition": "The circumstances or setting surrounding an event, statement, or idea that help to clarify its meaning.",
                    "context": {
                        "Context 1": "In the lesson, understanding the context of the reading material helped the student with comprehension.",
                        "Context 2": "The historical context of the novel is crucial to understanding its themes.",
                        "Context 3": "Without proper context, jokes can often be misunderstood."
                    }
                },
                {
                    "word": "Dialect",
                    "definition": "A particular form of a language that is peculiar to a specific region or social group.",
                    "context": {
                        "Context 1": "The student preferred American dialect over British dialect for its clarity.",
                        "Context 2": "In the southern United States, the dialect includes unique phrases and pronunciations.",
                        "Context 3": "Some dialects can be so different that they sound like entirely different languages."
                    }
                },
                {
                    "word": "Prove",
                    "definition": "To demonstrate the truth or existence of something by evidence or argument.",
                    "context": {
                        "Context 1": "The student wanted to prove to himself that he could pass the IELTS test.",
                        "Context 2": "The scientist aimed to prove his hypothesis through rigorous experimentation.",
                        "Context 3": "She wanted to prove her cooking skills by preparing a gourmet meal."
                    }
                },
                {
                    "word": "Comprehension",
                    "definition": "The ability to understand something.",
                    "context": {
                        "Context 1": "Improving reading comprehension is essential for success in the IELTS test.",
                        "Context 2": "His comprehension of the complex topic impressed his teachers.",
                        "Context 3": "Comprehension of the instructions was crucial for completing the project correctly."
                    }
                },
                {
                    "word": "Structure",
                    "definition": "The arrangement or framework of something.",
                    "context": {
                        "Context 1": "Understanding the structure of an essay is vital for effective writing.",
                        "Context 2": "The structure of the building was designed to withstand earthquakes.",
                        "Context 3": "In music, the structure of a song often includes verses, choruses, and bridges."
                    }
                },
                {
                    "word": "Register",
                    "definition": "The level of formality or informality in language used in a particular context.",
                    "context": {
                        "Context 1": "Switching between formal and informal register can enhance communication skills.",
                        "Context 2": "In a job interview, it's important to use a formal register.",
                        "Context 3": "Children often use a different register when talking to their friends compared to adults."
                    }
                },
                {
                    "word": "Essay",
                    "definition": "A short piece of writing on a particular subject.",
                    "context": {
                        "Context 1": "The student was unsure about the essay structure for the IELTS exam.",
                        "Context 2": "She wrote an essay about her summer vacation for her English class.",
                        "Context 3": "Essays can be a great way to express personal opinions and arguments."
                    }
                },
                {
                    "word": "Comprehend",
                    "definition": "To grasp mentally; understand.",
                    "context": {
                        "Context 1": "The student struggled to comprehend the academic texts in the reading section.",
                        "Context 2": "He could not comprehend the complexity of the scientific theory.",
                        "Context 3": "Children often find it easier to comprehend stories with pictures."
                    }
                },
                {
                    "word": "Character Animation",
                    "definition": "The process of creating moving images of characters for films, games, or other media.",
                    "context": {
                        "Context 1": "The student is studying character animation as part of his motion design course.",
                        "Context 2": "Character animation requires a deep understanding of movement and personality.",
                        "Context 3": "Many video games rely heavily on character animation to engage players."
                    }
                },
                {
                    "word": "Motivation",
                    "definition": "The reason or reasons one has for acting or behaving in a particular way.",
                    "context": {
                        "Context 1": "The student's motivation to pass the IELTS test was to prove his English skills.",
                        "Context 2": "Her motivation to exercise comes from wanting to lead a healthier lifestyle.",
                        "Context 3": "Finding motivation can be challenging when working on long-term projects."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Dialect",
                    "fact": "Did you know that there are over 160 different dialects of English spoken around the world?"
                },
                {
                    "word": "Essay",
                    "fact": "The longest essay ever written was over 1,000 pages long! It was about the history of the world."
                }
            ],
            "jokes": [
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                },
                {
                    "question": "Why did the teacher wear sunglasses?",
                    "answer": "Because her students were so bright!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Formal Essay",
                    "definition": "A structured piece of writing that presents an argument or a point of view, typically following a specific format.",
                    "context": {
                        "Context 1": "We need to write a formal essay of at least 250 words.",
                        "Context 2": "The teacher assigned a formal essay on the impact of climate change.",
                        "Context 3": "In college, students often have to submit a formal essay for their literature class."
                    }
                },
                {
                    "word": "Opinion",
                    "definition": "A personal belief or judgment about a particular topic.",
                    "context": {
                        "Context 1": "What is your opinion on the use of social media?",
                        "Context 2": "Her opinion on the movie was very different from mine.",
                        "Context 3": "In a debate, everyone must express their opinion clearly."
                    }
                },
                {
                    "word": "Misinformation",
                    "definition": "False or misleading information spread regardless of intent.",
                    "context": {
                        "Context 1": "Social media spreads more misinformation than useful information.",
                        "Context 2": "The article was criticized for containing misinformation about the vaccine.",
                        "Context 3": "Misinformation can lead to public panic during a crisis."
                    }
                },
                {
                    "word": "Fact-checking",
                    "definition": "The process of verifying the accuracy of information.",
                    "context": {
                        "Context 1": "People often do not engage in fact-checking before believing what they see online.",
                        "Context 2": "Journalists are expected to perform thorough fact-checking before publishing articles.",
                        "Context 3": "Fact-checking is essential in academic writing to ensure credibility."
                    }
                },
                {
                    "word": "Body Paragraph",
                    "definition": "A section of an essay that develops a specific point related to the thesis.",
                    "context": {
                        "Context 1": "We need two body paragraphs for our essay.",
                        "Context 2": "Each body paragraph should contain a clear topic sentence.",
                        "Context 3": "The body paragraphs of her essay were well-organized and persuasive."
                    }
                },
                {
                    "word": "Motivation",
                    "definition": "The reason or reasons one has for acting or behaving in a particular way.",
                    "context": {
                        "Context 1": "One motivation for posting misinformation is to gain views and likes.",
                        "Context 2": "His motivation for studying hard was to get into a good university.",
                        "Context 3": "Understanding the motivation behind people's actions can help in resolving conflicts."
                    }
                },
                {
                    "word": "Example",
                    "definition": "A representative form or instance that illustrates a point.",
                    "context": {
                        "Context 1": "We should include an example in every body paragraph.",
                        "Context 2": "For example, many people enjoy hiking in the mountains.",
                        "Context 3": "An example of teamwork can be seen in successful sports teams."
                    }
                },
                {
                    "word": "Relevant",
                    "definition": "Closely connected or appropriate to what is being done or considered.",
                    "context": {
                        "Context 1": "The full essay will only generate relevant ideas.",
                        "Context 2": "Her comments were not relevant to the discussion at hand.",
                        "Context 3": "In a job interview, it's important to provide relevant experience."
                    }
                },
                {
                    "word": "Alter",
                    "definition": "To change or modify something.",
                    "context": {
                        "Context 1": "We can alter our ideas a little bit to make them better.",
                        "Context 2": "He decided to alter his plans after hearing the weather forecast.",
                        "Context 3": "The artist chose to alter the colors in her painting for a more vibrant effect."
                    }
                },
                {
                    "word": "Declaration",
                    "definition": "An official statement or announcement.",
                    "context": {
                        "Context 1": "In our essay, we will write a declaration for each idea.",
                        "Context 2": "The declaration of independence was a significant moment in history.",
                        "Context 3": "Her declaration of love surprised everyone at the party."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Misinformation",
                    "fact": "Did you know that misinformation can spread faster than the truth? It's like a rumor on steroids!"
                },
                {
                    "word": "Fact-checking",
                    "fact": "In the age of the internet, fact-checking is like a treasure hunt, except the treasure is truth and the map is often wrong!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the essay go to therapy?",
                    "answer": "Because it had too many unresolved issues!"
                },
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to reach new heights in their essays!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Deepfake",
                    "definition": "A synthetic media in which a person in an existing image or video is replaced with someone else's likeness.",
                    "context": {
                        "Context 1": "Deepfakes can be used to create misleading videos that appear to show someone saying or doing something they never did.",
                        "Context 2": "The movie industry is exploring deepfake technology to bring deceased actors back to the screen.",
                        "Context 3": "Some artists use deepfake technology to create unique art pieces that challenge perceptions of reality."
                    }
                },
                {
                    "word": "Influencer",
                    "definition": "A person who has the power to affect the purchasing decisions of others because of their authority, knowledge, position, or relationship with their audience.",
                    "context": {
                        "Context 1": "Many influencers on TikTok promote products to their followers, often leading to increased sales.",
                        "Context 2": "The influencer's post about healthy eating inspired many of her followers to change their diets.",
                        "Context 3": "In a world where influencers reign, even pets can become famous on social media."
                    }
                },
                {
                    "word": "Fact-checking",
                    "definition": "The process of verifying information to determine its accuracy.",
                    "context": {
                        "Context 1": "Fact-checking is essential to combat misinformation spread on social media platforms.",
                        "Context 2": "Before publishing his article, he spent hours fact-checking to ensure all claims were accurate.",
                        "Context 3": "The detective's job often involves fact-checking alibis to solve cases."
                    }
                },
                {
                    "word": "Platform",
                    "definition": "A digital space or service where users can interact, share content, or communicate.",
                    "context": {
                        "Context 1": "TikTok is a popular platform for sharing short videos and engaging with a wide audience.",
                        "Context 2": "The new educational platform offers courses on various subjects for free.",
                        "Context 3": "At the conference, they discussed the future of social media platforms and their impact on society."
                    }
                },
                {
                    "word": "Misinformation",
                    "definition": "False or misleading information spread regardless of intent to deceive.",
                    "context": {
                        "Context 1": "Misinformation can spread rapidly on social media, making it difficult for users to discern the truth.",
                        "Context 2": "The campaign aimed to reduce misinformation about vaccines through educational outreach.",
                        "Context 3": "In a world full of misinformation, it's crucial to verify facts before sharing them."
                    }
                },
                {
                    "word": "Representative",
                    "definition": "Serving as a typical example or a symbol of a larger group.",
                    "context": {
                        "Context 1": "The survey results should be representative of the entire population to be valid.",
                        "Context 2": "She chose a representative sample of students to participate in the study.",
                        "Context 3": "The painting is representative of the artist's style during that period."
                    }
                },
                {
                    "word": "Engage",
                    "definition": "To participate or become involved in an activity.",
                    "context": {
                        "Context 1": "It’s important to engage with your audience to build a loyal following on social media.",
                        "Context 2": "The teacher encouraged students to engage in discussions about the book.",
                        "Context 3": "He decided to engage in volunteer work to give back to the community."
                    }
                },
                {
                    "word": "Rumor",
                    "definition": "A currently circulating story or report of uncertain or doubtful truth.",
                    "context": {
                        "Context 1": "The rumor about the celebrity's breakup spread quickly on social media.",
                        "Context 2": "She heard a rumor that the school would be closing next year, but it was never confirmed.",
                        "Context 3": "In the office, rumors about the new project circulated before any official announcement."
                    }
                },
                {
                    "word": "Correlate",
                    "definition": "To show or establish a relationship between two or more things.",
                    "context": {
                        "Context 1": "Studies have shown that increased screen time can correlate with sleep disturbances in teenagers.",
                        "Context 2": "The researchers aimed to correlate exercise levels with mental health outcomes.",
                        "Context 3": "In economics, inflation often correlates with changes in interest rates."
                    }
                },
                {
                    "word": "Uncountable",
                    "definition": "Referring to nouns that cannot be counted individually and do not have a plural form.",
                    "context": {
                        "Context 1": "Words like 'information' and 'advice' are uncountable, meaning they cannot be made plural.",
                        "Context 2": "In English, 'water' is an uncountable noun, so we say 'a glass of water' instead of 'waters.'",
                        "Context 3": "Understanding uncountable nouns is crucial for mastering English grammar."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Deepfake",
                    "fact": "The term 'deepfake' combines 'deep learning' and 'fake,' but it sounds like a superhero's secret identity!"
                },
                {
                    "word": "Influencer",
                    "fact": "The first influencer was probably a caveman who convinced others to try his new stone tool!"
                },
                {
                    "word": "Misinformation",
                    "fact": "Misinformation spreads faster than a rumor about free pizza in the break room!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the influencer bring a ladder to the bar?",
                    "answer": "Because they heard the drinks were on the house!"
                },
                {
                    "question": "Why did the deepfake get kicked out of the party?",
                    "answer": "Because it was too fake for everyone to handle!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Seriously",
                    "definition": "In a serious manner; not joking.",
                    "context": {
                        "Context 1": "They do not take it seriously when discussing important issues.",
                        "Context 2": "He seriously considered moving to another country for work.",
                        "Context 3": "She was seriously thinking about adopting a pet."
                    }
                },
                {
                    "word": "Proof",
                    "definition": "Evidence or argument establishing a fact or the truth of a statement.",
                    "context": {
                        "Context 1": "Do you have any proof to support your claim?",
                        "Context 2": "The detective found proof that led to the arrest.",
                        "Context 3": "In court, proof is essential for winning a case."
                    }
                },
                {
                    "word": "Misinformation",
                    "definition": "False or misleading information.",
                    "context": {
                        "Context 1": "Misinformation can spread quickly on social media.",
                        "Context 2": "The teacher corrected the misinformation in the textbook.",
                        "Context 3": "He realized the misinformation had caused a lot of confusion."
                    }
                },
                {
                    "word": "Countable",
                    "definition": "Able to be counted; having a plural form.",
                    "context": {
                        "Context 1": "Apples are countable nouns, while water is not.",
                        "Context 2": "She had a countable number of friends at the party.",
                        "Context 3": "In math class, we learned about countable sets."
                    }
                },
                {
                    "word": "Uncountable",
                    "definition": "Not able to be counted; does not have a plural form.",
                    "context": {
                        "Context 1": "Information is an uncountable noun in English.",
                        "Context 2": "He poured an uncountable amount of sugar into the bowl.",
                        "Context 3": "Love is often described as an uncountable feeling."
                    }
                },
                {
                    "word": "Grammar",
                    "definition": "The system and structure of a language.",
                    "context": {
                        "Context 1": "We need to focus on grammar to improve our writing skills.",
                        "Context 2": "She studied grammar rules to prepare for the exam.",
                        "Context 3": "The grammar of ancient languages can be quite complex."
                    }
                },
                {
                    "word": "Resource",
                    "definition": "A source of supply or support.",
                    "context": {
                        "Context 1": "Choosing the right resource is important for effective learning.",
                        "Context 2": "The library is a valuable resource for students.",
                        "Context 3": "Natural resources are essential for economic growth."
                    }
                },
                {
                    "word": "Homework",
                    "definition": "Assignments given to students to be completed outside of class.",
                    "context": {
                        "Context 1": "You still need to do homework to reinforce what you learned.",
                        "Context 2": "She forgot to submit her homework on time.",
                        "Context 3": "Many students dread doing their homework after school."
                    }
                },
                {
                    "word": "Goal",
                    "definition": "An aim or desired result.",
                    "context": {
                        "Context 1": "Setting a specific goal can help you stay motivated.",
                        "Context 2": "His goal is to travel to every continent.",
                        "Context 3": "She achieved her goal of running a marathon."
                    }
                },
                {
                    "word": "Comfortable",
                    "definition": "Providing physical ease and relaxation.",
                    "context": {
                        "Context 1": "You can study in a comfortable environment to focus better.",
                        "Context 2": "He felt comfortable in his new shoes.",
                        "Context 3": "The couch is so comfortable that I could nap all day."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Misinformation",
                    "fact": "The term 'misinformation' can be traced back to the 16th century, long before social media made it popular!"
                },
                {
                    "word": "Grammar",
                    "fact": "The longest word in English, 'pneumonoultramicroscopicsilicovolcanoconiosis,' is a type of lung disease and has 45 letters!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the grammar teacher break up with the math teacher?",
                    "answer": "Because she felt he was too irrational!"
                },
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going this afternoon?"
                },
                {
                    "Person 2": "Pretty good! Just trying to get through this busy Monday. How about you?"
                },
                {
                    "Person 1": "Same here! I feel like Mondays are always packed. Did you have a good weekend?"
                },
                {
                    "Person 2": "Yeah, it was nice! I went hiking with some friends. The weather was perfect."
                },
                {
                    "Person 1": "That sounds awesome! Where did you go?"
                },
                {
                    "Person 2": "We went to the state park nearby. There’s this great trail with a waterfall."
                },
                {
                    "Person 1": "Wow, I love waterfalls! Did you take any pictures?"
                },
                {
                    "Person 2": "Of course! I took a ton. I’ll have to show you some later."
                },
                {
                    "Person 1": "Definitely! I could use some nature inspiration. I mostly just stayed home and binge-watched a new series."
                },
                {
                    "Person 2": "What series? I’m always looking for recommendations."
                },
                {
                    "Person 1": "It’s called 'The Midnight Club.' It’s a bit spooky but really good!"
                },
                {
                    "Person 2": "Nice! I’ve heard about that one. I might check it out."
                },
                {
                    "Person 1": "You should! Just be ready for some twists."
                },
                {
                    "Person 2": "I love twists! So, what’s on your agenda for the week?"
                },
                {
                    "Person 1": "Just work and maybe some gym time. How about you?"
                },
                {
                    "Person 2": "Same here, plus I have a couple of meetings. But I’m hoping to squeeze in some more hiking this weekend."
                },
                {
                    "Person 1": "Sounds like a plan! Let me know if you want company."
                },
                {
                    "Person 2": "For sure! It’d be great to hike together."
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you started working on that essay for class yet?"
                },
                {
                    "Person 2": "Not yet! I’m still trying to figure out what to write about. It’s supposed to be 250 words, right?"
                },
                {
                    "Person 1": "Yeah, and we have to spend at least 40 minutes on it. I think the hardest part is coming up with a good topic."
                },
                {
                    "Person 2": "Totally! I heard we can choose between discussing opinions or advantages and disadvantages. What do you think?"
                },
                {
                    "Person 1": "I think an opinion essay might be easier. We just need to state our view and support it."
                },
                {
                    "Person 2": "That makes sense. I mean, we can just pick a side and back it up with reasons."
                },
                {
                    "Person 1": "Exactly! I was thinking about writing how social media spreads misinformation. What do you think?"
                },
                {
                    "Person 2": "That’s a great idea! There are so many examples of that. Like, people just believe anything they see online."
                },
                {
                    "Person 1": "Right? And it’s crazy how many people don’t even fact-check. They just share whatever they see."
                },
                {
                    "Person 2": "For sure! Maybe we could mention how influencers sometimes post fake news just to get more views."
                },
                {
                    "Person 1": "Yes! And we could also talk about how the government sometimes hides important information to protect people."
                },
                {
                    "Person 2": "That’s a solid point. It’s like a double-edged sword—people want the truth, but sometimes it’s better not to know."
                },
                {
                    "Person 1": "Exactly! So, should we brainstorm some examples to back up our ideas?"
                },
                {
                    "Person 2": "Definitely! Let’s make a list of points we want to cover before we start writing."
                },
                {
                    "Person 1": "Sounds like a plan! I feel better about this essay already."
                },
                {
                    "Person 2": "Me too! Let’s tackle this together."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you see that video going around about deepfakes?"
                },
                {
                    "Person 2": "Yeah, I did! It's crazy how easy it is to make one. I mean, why would anyone trust what they see online anymore?"
                },
                {
                    "Person 1": "Exactly! It's like, how do we even know what's real anymore? I feel like people just believe whatever they see."
                },
                {
                    "Person 2": "Right? I was reading that some influencers use deepfakes to get more views. It's wild!"
                },
                {
                    "Person 1": "That’s so true! I think a lot of people don’t even realize they’re being misled. They just scroll through TikTok for fun."
                },
                {
                    "Person 2": "Totally! And then they hear something and think it’s true without checking the facts."
                },
                {
                    "Person 1": "Yeah, like during the pandemic, there were so many fake news stories on social media. It made people panic."
                },
                {
                    "Person 2": "I know! It’s scary how misinformation spreads. It’s like a game of telephone but on a massive scale."
                },
                {
                    "Person 1": "Exactly! And the problem is, it’s often easier to create a sensational story than to report the truth."
                },
                {
                    "Person 2": "For sure! And people love drama, so they’re more likely to share the wild stuff."
                },
                {
                    "Person 1": "So, what do you think we should do about it? Just be more careful with what we share?"
                },
                {
                    "Person 2": "Yeah, I think that’s a good start. Maybe we should also encourage others to fact-check before sharing."
                },
                {
                    "Person 1": "Definitely! It’s all about spreading awareness, right?"
                },
                {
                    "Person 2": "Exactly! Let’s make sure we’re part of the solution."
                },
                {
                    "Person 1": "Agreed! Now, let’s go grab some coffee and talk more about this."
                },
                {
                    "Person 2": "Sounds perfect! I could use a caffeine boost."
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you catch that game last night?"
                },
                {
                    "Person 2": "Oh, totally! What a finish! I can't believe they pulled off that last-minute goal."
                },
                {
                    "Person 1": "Right? I was on the edge of my seat! I thought they were done for."
                },
                {
                    "Person 2": "Same here! And that player who scored? He's been on fire this season."
                },
                {
                    "Person 1": "Absolutely! I heard he’s up for MVP this year. Do you think he’ll get it?"
                },
                {
                    "Person 2": "I think so! If he keeps playing like this, it’s hard to argue against it."
                },
                {
                    "Person 1": "For sure. So, are you planning to watch the next game together?"
                },
                {
                    "Person 2": "Definitely! We should make it a game night. Snacks and all!"
                },
                {
                    "Person 1": "Sounds perfect! I’ll bring the chips and dip."
                },
                {
                    "Person 2": "And I’ll grab some drinks. It’ll be a blast!"
                },
                {
                    "Person 1": "Can’t wait! It’s always more fun watching with friends."
                },
                {
                    "Person 2": "Absolutely! Plus, we can cheer and groan together."
                },
                {
                    "Person 1": "Exactly! Let’s make sure to set a date."
                },
                {
                    "Person 2": "For sure! I’ll check the schedule and let you know."
                },
                {
                    "Person 1": "Awesome! Looking forward to it!"
                },
                {
                    "Person 2": "Me too! See you soon!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
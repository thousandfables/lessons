<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I will use this one. And it's called a placeholder.",
                    "corrected": "I will use this one, and it's called a placeholder.",
                    "explanation": "There should be a comma before 'and' to connect two independent clauses.",
                    "context": "I have a temporary microphone for now. I will use this one, and it's called a placeholder. I am waiting for my new microphone to arrive."
                },
                {
                    "original": "I sleep well, but not enough for me.",
                    "corrected": "I slept well, but it wasn't enough for me.",
                    "explanation": "The verb 'sleep' should be in the past tense 'slept' to match the context of the conversation.",
                    "context": "I was asked about my sleep last night. I slept well, but it wasn't enough for me. I usually need more hours to feel rested."
                },
                {
                    "original": "I can go away from work.",
                    "corrected": "I can take time off from work.",
                    "explanation": "'Go away from work' is awkward; 'take time off' is the correct phrase to indicate absence from work.",
                    "context": "I need to leave work for a while. I can take time off from work. I have some personal matters to attend to."
                },
                {
                    "original": "I just stayed. I'm working very hard like snails.",
                    "corrected": "I just stated that I'm working very hard, like a snail.",
                    "explanation": "The word 'stayed' is incorrect; it should be 'stated.' Also, 'like snails' should be 'like a snail' for clarity.",
                    "context": "I wanted to convey my work status. I just stated that I'm working very hard, like a snail. It feels slow, but I'm putting in the effort."
                },
                {
                    "original": "There are correctly description about head of wolf and group groups of this status.",
                    "corrected": "There is a correct description of the head of the wolf and the groups of this pack.",
                    "explanation": "The subject 'description' is singular, so 'are' should be 'is.' Also, 'correctly' should be 'correct' and 'group groups' is redundant.",
                    "context": "I was explaining a picture I saw. There is a correct description of the head of the wolf and the groups of this pack. It highlights their social structure."
                },
                {
                    "original": "It's a we we are still going to go back to shit.",
                    "corrected": "We are still going to go back to that.",
                    "explanation": "The phrase 'go back to shit' is informal and unclear; it should be replaced with something more appropriate.",
                    "context": "I was trying to change the topic. We are still going to go back to that. It's important to clarify the situation."
                },
                {
                    "original": "She asked asking about my mommy.",
                    "corrected": "She was asking about my mom.",
                    "explanation": "The phrase 'asked asking' is incorrect; it should be 'was asking.' Also, 'mommy' is informal; 'mom' is more appropriate.",
                    "context": "My friend reached out to me. She was asking about my mom. I think she is concerned about her health."
                },
                {
                    "original": "The food floating heat, floating heat.",
                    "corrected": "The food was floating in the heat.",
                    "explanation": "The phrase is unclear; it should be 'floating in the heat' to describe the situation accurately.",
                    "context": "I was describing the aftermath of the flood. The food was floating in the heat. It was a chaotic scene."
                },
                {
                    "original": "She couldn't get. To. Go with your dog.",
                    "corrected": "She couldn't take her dog out.",
                    "explanation": "The phrase is fragmented and unclear; it should be 'take her dog out' for clarity.",
                    "context": "My friend had a hard time due to the flood. She couldn't take her dog out. Everything was in disarray."
                },
                {
                    "original": "But if he see any boy with tail, he like my Amanda decided to kill them.",
                    "corrected": "But if he sees any boy with a tail, he, like my Amanda, decides to attack them.",
                    "explanation": "The verb 'see' should be 'sees' for subject-verb agreement. The phrase is also awkward and needs restructuring.",
                    "context": "I was explaining my dog's behavior. But if he sees any boy with a tail, he, like my Amanda, decides to attack them. It's a territorial thing."
                },
                {
                    "original": "I have doubts. Ah, right. My favorite group in... No doubt.",
                    "corrected": "I have doubts. Ah, right. My favorite group is... No doubt.",
                    "explanation": "The sentence is missing the verb 'is' to complete the thought.",
                    "context": "I was reflecting on my opinions. I have doubts. Ah, right. My favorite group is... No doubt. I really enjoy their music."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "If someone floods you from above, you get insurance to cover the flood?",
                    "corrected": "If someone floods you from above, you get insurance to cover the damages?",
                    "explanation": "The term 'flood' refers to the event itself, while 'damages' refers to the financial compensation for losses.",
                    "context": "I was thinking about insurance for my flat. If someone floods you from above, you get insurance to cover the damages? It’s important to understand what is covered."
                },
                {
                    "original": "He tried to... Sell me... Any insurers.",
                    "corrected": "He tried to sell me insurance.",
                    "explanation": "'Any insurers' is incorrect; it should be 'insurance' as it refers to the product, not the companies.",
                    "context": "I have two different insurers for my mortgage. He tried to sell me insurance. It’s a good idea to have options."
                },
                {
                    "original": "But I think that I have a good pronunciation.",
                    "corrected": "But I think I have good pronunciation.",
                    "explanation": "The phrase 'that I have' is unnecessary; 'I have good pronunciation' is more direct.",
                    "context": "I was discussing my language skills. But I think I have good pronunciation. It's important to be clear when speaking."
                },
                {
                    "original": "I learned a new word like very... Like a word.",
                    "corrected": "I learned a new word, a warrior.",
                    "explanation": "The phrase is unclear; it should directly state the new word learned.",
                    "context": "I was sharing my recent vocabulary acquisition. I learned a new word, a warrior. It was interesting to hear it used in context."
                },
                {
                    "original": "My granny couldn't lift up her body.",
                    "corrected": "My granny couldn't lift herself up.",
                    "explanation": "'Lift up her body' is awkward; 'lift herself up' is more idiomatic.",
                    "context": "I was explaining my granny's situation. My granny couldn't lift herself up. It made things difficult for her."
                },
                {
                    "original": "I rent this bed... For 60... Not 60... For years.",
                    "corrected": "I have rented this bed for years.",
                    "explanation": "The phrase 'rent this bed for 60... Not 60... For years' is confusing; it should be clear and concise.",
                    "context": "I was discussing my granny's bed situation. I have rented this bed for years. It’s been a challenge to find a solution."
                },
                {
                    "original": "Limit of my... Passion. Is the absence... Age of two... Age of two limit.",
                    "corrected": "The limit of my patience is running low.",
                    "explanation": "The original phrase is unclear and jumbled; it should express the idea of patience running out.",
                    "context": "I was expressing my frustration. The limit of my patience is running low. I need a solution soon."
                },
                {
                    "original": "I... I realized that... The machine what I want... This type of machine.",
                    "corrected": "I realized that the machine I want is this type of machine.",
                    "explanation": "The phrase 'the machine what I want' is incorrect; it should be 'the machine I want.'",
                    "context": "I was contemplating my coffee machine choice. I realized that the machine I want is this type of machine. It fits my needs."
                },
                {
                    "original": "It's very... Hlopotno.",
                    "corrected": "It's very troublesome.",
                    "explanation": "'Hlopotno' is a Russian word; 'troublesome' is the correct English equivalent.",
                    "context": "I was discussing my coffee-making process. It's very troublesome. I want something simpler."
                },
                {
                    "original": "I didn't use... Sugar or... Editing... Any... With coffee.",
                    "corrected": "I don't use sugar or anything with my coffee.",
                    "explanation": "The phrase is awkward and unclear; it should be more straightforward.",
                    "context": "I was explaining my coffee preferences. I don't use sugar or anything with my coffee. I prefer it plain."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "I'm addicted... Addict of...",
                    "corrected": "I'm addicted... Addicted to...",
                    "explanation": "The correct phrase is 'addicted to' rather than 'addict of' which is not idiomatic.",
                    "context": "I feel that I'm addicted to coffee. I enjoy it so much that I can't imagine my day without it."
                },
                {
                    "original": "Three times in half year.",
                    "corrected": "Three times in half a year.",
                    "explanation": "The phrase 'half year' should be 'half a year' to be grammatically correct.",
                    "context": "I like cappuccino three times in half a year. It's a special treat when I visit a nice café."
                },
                {
                    "original": "Go out of home and go to...",
                    "corrected": "Go out and go to...",
                    "explanation": "'Out of home' is not idiomatic; simply saying 'go out' is sufficient.",
                    "context": "When I go out and visit Moscow, I like to sit in beautiful cafés. It's a nice experience."
                },
                {
                    "original": "Cooking coffee beans.",
                    "corrected": "Roasting coffee beans.",
                    "explanation": "The term 'cooking' is not appropriate; 'roasting' is the correct term for preparing coffee beans.",
                    "context": "My mommy began mixing coffee beans and roasting coffee beans. It made the coffee taste much better."
                },
                {
                    "original": "Not enough strong coffee.",
                    "corrected": "Not strong enough coffee.",
                    "explanation": "The correct order is 'not strong enough' rather than 'not enough strong'.",
                    "context": "I couldn't drink not strong enough coffee. I prefer my coffee to be bold and rich in flavor."
                },
                {
                    "original": "The count of tasks was increased maybe.",
                    "corrected": "The number of tasks increased.",
                    "explanation": "'Count of tasks' is awkward; 'number of tasks' is more natural. Also, 'was increased' is unnecessary.",
                    "context": "The number of tasks increased recently. I've had to stay late at work to keep up with everything."
                },
                {
                    "original": "And since then? Ah. And since then...",
                    "corrected": "And since then...",
                    "explanation": "The phrase 'Ah. And since then...' is redundant; 'And since then...' is sufficient.",
                    "context": "My mommy began making coffee herself. And since then, I can't drink weak coffee anymore."
                },
                {
                    "original": "I could never understand the difference between...",
                    "corrected": "I can never understand the difference between...",
                    "explanation": "The present tense 'can' is more appropriate here than 'could', which implies past ability.",
                    "context": "I can never understand the difference between Americano and espresso. They both seem similar to me."
                },
                {
                    "original": "I think about uh... Change... Change my...",
                    "corrected": "I think about changing my...",
                    "explanation": "The gerund form 'changing' should be used instead of 'change' after 'think about'.",
                    "context": "I think about changing my work situation. I want to find something that suits me better."
                },
                {
                    "original": "I... I remember that... Nineteen... Years.",
                    "corrected": "I... I remember that... for nineteen years.",
                    "explanation": "The phrase 'Nineteen years' needs a preposition for clarity; 'for' indicates duration.",
                    "context": "I remember that for nineteen years, my mother made coffee for me. It was a big part of my childhood."
                },
                {
                    "original": "I could immediately see the change.",
                    "corrected": "I can immediately see the change.",
                    "explanation": "The present tense 'can' is more appropriate here than 'could', which implies past ability.",
                    "context": "I can immediately see the change in my English skills. It's exciting to notice my progress."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "I doubt that before you would say I totally agree with you and put all these words correctly in the sentence.",
                    "corrected": "I doubt that you would have said I totally agree with you and put all these words correctly in the sentence.",
                    "explanation": "The use of 'would say' is incorrect here; 'would have said' is needed to indicate a past hypothetical situation.",
                    "context": "I believe that your English has improved significantly. I doubt that you would have said I totally agree with you and put all these words correctly in the sentence. It shows how far you've come."
                },
                {
                    "original": "You might remember, you might have remembered the word agree, you might have remembered the word, for example, fully, or like you could say I agree with you very much.",
                    "corrected": "You might remember the word agree, you might have remembered the word fully, or you could say I agree with you very much.",
                    "explanation": "The repetition of 'might remember' and 'might have remembered' is unnecessary; it can be streamlined for clarity.",
                    "context": "When learning a new language, it's common to recall certain words. You might remember the word agree, you might have remembered the word fully, or you could say I agree with you very much. However, some phrases are not idiomatic."
                },
                {
                    "original": "Like before, I doubt that before you would say I totally agree with you and put all these words correctly in the sentence.",
                    "corrected": "Like before, I doubt that you would have said I totally agree with you and put all these words correctly in the sentence.",
                    "explanation": "The phrase 'I doubt that before you would say' is awkward; it should be rephrased for better flow.",
                    "context": "Reflecting on your progress, I can see the changes in your speaking. Like before, I doubt that you would have said I totally agree with you and put all these words correctly in the sentence. It's impressive how much you've improved."
                },
                {
                    "original": "You could have said something like that. It is understandable. But it's not idiomatic.",
                    "corrected": "You could have said something like that. It is understandable, but it's not idiomatic.",
                    "explanation": "The sentence lacks a comma before 'but'; it should separate two independent clauses.",
                    "context": "When discussing language use, I often point out common phrases. You could have said something like that. It is understandable, but it's not idiomatic. This distinction is important for fluency."
                },
                {
                    "original": "This is... This is... some progress.",
                    "corrected": "This is some progress.",
                    "explanation": "The repetition of 'This is' is unnecessary; it can be stated more concisely.",
                    "context": "As I observe your development, I feel encouraged. This is some progress. It's exciting to see you using the language more effectively."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Placeholder",
                    "definition": "An object or symbol used to represent something that is not yet available or is temporary.",
                    "context": {
                        "Context 1": "I am using a placeholder microphone until my new one arrives on Saturday.",
                        "Context 2": "The placeholder text in the document was replaced with actual content later.",
                        "Context 3": "In programming, a placeholder can be used in a function to indicate where a value will go."
                    }
                },
                {
                    "word": "Flood",
                    "definition": "An overflow of water that submerges land which is normally dry.",
                    "context": {
                        "Context 1": "The heavy rain caused a flood that affected several apartments in the building.",
                        "Context 2": "After the flood, the community came together to help those who lost their homes.",
                        "Context 3": "The flood of emotions overwhelmed her when she heard the news."
                    }
                },
                {
                    "word": "Remotely",
                    "definition": "In a manner that is not physically present; from a distance.",
                    "context": {
                        "Context 1": "I work remotely, so my boss cannot see if I am at my desk.",
                        "Context 2": "She managed to control the drone remotely from her phone.",
                        "Context 3": "They held the meeting remotely due to the pandemic restrictions."
                    }
                },
                {
                    "word": "Status",
                    "definition": "A person's social or professional position; also, a message indicating one's current situation.",
                    "context": {
                        "Context 1": "I updated my status to show that I am working hard, even if it’s from home.",
                        "Context 2": "His status as a celebrity often brings him unwanted attention.",
                        "Context 3": "She checked her social media status to see how many likes her post received."
                    }
                },
                {
                    "word": "Accident",
                    "definition": "An unexpected event that results in damage or injury.",
                    "context": {
                        "Context 1": "The flood was caused by an accident when the cat turned on the faucet.",
                        "Context 2": "He had a minor accident while riding his bike but was not hurt.",
                        "Context 3": "The accident on the highway caused a major traffic jam."
                    }
                },
                {
                    "word": "Jealous",
                    "definition": "Feeling or showing envy of someone or their achievements and advantages.",
                    "context": {
                        "Context 1": "My dog gets jealous when I take another dog for a walk.",
                        "Context 2": "She was jealous of her friend's new car and the attention it received.",
                        "Context 3": "The jealous cat watched as the dog played with its owner."
                    }
                },
                {
                    "word": "Colleague",
                    "definition": "A person with whom one works, especially in a profession or business.",
                    "context": {
                        "Context 1": "I need to ask my colleague for help with this project.",
                        "Context 2": "She invited her colleagues to a dinner party to celebrate their success.",
                        "Context 3": "His colleague from another department shared valuable insights during the meeting."
                    }
                },
                {
                    "word": "Delivery",
                    "definition": "The action of delivering letters, packages, or goods.",
                    "context": {
                        "Context 1": "My new microphone is scheduled for delivery on Saturday.",
                        "Context 2": "The delivery of the pizza took longer than expected.",
                        "Context 3": "She was excited about the delivery of her new furniture."
                    }
                },
                {
                    "word": "Rehabilitation",
                    "definition": "The process of restoring someone to health or normal life through training and therapy.",
                    "context": {
                        "Context 1": "I will go to rehabilitation to recover from my injury.",
                        "Context 2": "The rehabilitation of the old building took several years.",
                        "Context 3": "He volunteered at a center for the rehabilitation of injured animals."
                    }
                },
                {
                    "word": "Affect",
                    "definition": "To have an influence on or make a change to something.",
                    "context": {
                        "Context 1": "The flood affected several floors in the apartment building.",
                        "Context 2": "Weather can significantly affect our mood and energy levels.",
                        "Context 3": "The new policy will affect how employees are evaluated."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Flood",
                    "fact": "Did you know that the largest flood ever recorded occurred in 1931 in China, affecting over 50 million people?"
                },
                {
                    "word": "Jealous",
                    "fact": "Cats can be so jealous that they sometimes act like they own their humans!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the cat sit on the computer?",
                    "answer": "Because it wanted to keep an eye on the mouse!"
                },
                {
                    "question": "What do you call a dog that can do magic?",
                    "answer": "A labracadabrador!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Insurance",
                    "definition": "A contract that provides financial protection against specific risks or damages.",
                    "context": {
                        "Context 1": "I thought about getting insurance for my flat against floods and other accidents.",
                        "Context 2": "The car insurance covered all the damages after the accident.",
                        "Context 3": "He decided to invest in health insurance to cover medical expenses."
                    }
                },
                {
                    "word": "Mortgage",
                    "definition": "A loan specifically for purchasing property, where the property serves as collateral.",
                    "context": {
                        "Context 1": "I have two different insurers for my mortgage.",
                        "Context 2": "After years of saving, they finally paid off their mortgage.",
                        "Context 3": "She was excited to get a mortgage for her first home."
                    }
                },
                {
                    "word": "Accident",
                    "definition": "An unexpected event that causes damage or injury.",
                    "context": {
                        "Context 1": "My agent told me about insurance for accidents like fire or drone attacks.",
                        "Context 2": "He had a minor accident while riding his bike.",
                        "Context 3": "The accident on the highway caused a major traffic jam."
                    }
                },
                {
                    "word": "Agent",
                    "definition": "A person who acts on behalf of another, especially in business or insurance.",
                    "context": {
                        "Context 1": "My agent was very helpful in explaining the insurance options.",
                        "Context 2": "The travel agent booked our flights and accommodations.",
                        "Context 3": "She works as a real estate agent helping people buy homes."
                    }
                },
                {
                    "word": "Guarantee",
                    "definition": "A promise or assurance that something will be done or will happen.",
                    "context": {
                        "Context 1": "My agent can get me insurance with a guarantee for accidents.",
                        "Context 2": "The store offers a money-back guarantee on all products.",
                        "Context 3": "He gave her a guarantee that he would finish the project on time."
                    }
                },
                {
                    "word": "Cappuccino",
                    "definition": "A coffee drink made with espresso and steamed milk, often topped with foam.",
                    "context": {
                        "Context 1": "I want a coffee machine that can make cappuccino.",
                        "Context 2": "She ordered a cappuccino with extra foam at the café.",
                        "Context 3": "He learned how to make the perfect cappuccino at home."
                    }
                },
                {
                    "word": "Grind",
                    "definition": "To crush or break something into smaller pieces, often referring to coffee beans.",
                    "context": {
                        "Context 1": "I have a machine for grinding coffee beans.",
                        "Context 2": "She likes to grind her own spices for better flavor.",
                        "Context 3": "He had to grind the grains to make flour."
                    }
                },
                {
                    "word": "Troublesome",
                    "definition": "Causing difficulty or problems.",
                    "context": {
                        "Context 1": "I find it troublesome to use a coffee machine with too many functions.",
                        "Context 2": "The troublesome child kept interrupting the class.",
                        "Context 3": "Fixing the old car turned out to be quite troublesome."
                    }
                },
                {
                    "word": "Function",
                    "definition": "The specific purpose or role that something is designed to perform.",
                    "context": {
                        "Context 1": "I prefer a coffee machine with just one or two functions.",
                        "Context 2": "The main function of the app is to help users track their expenses.",
                        "Context 3": "The function of the heart is to pump blood throughout the body."
                    }
                },
                {
                    "word": "Limit",
                    "definition": "A point or level beyond which something does not or may not extend or pass.",
                    "context": {
                        "Context 1": "There is a limit to how much insurance will cover for accidents.",
                        "Context 2": "He reached the limit of his patience with the constant delays.",
                        "Context 3": "The speed limit on the highway is 65 miles per hour."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Cappuccino",
                    "fact": "In Italy, it's considered a faux pas to order a cappuccino after 11 AM!"
                },
                {
                    "word": "Mortgage",
                    "fact": "The word 'mortgage' comes from the French term meaning 'death pledge'—yikes!"
                },
                {
                    "word": "Insurance",
                    "fact": "The first insurance policy was taken out in ancient Babylon, where merchants would pay a fee to ensure their goods were protected!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the coffee file a police report?",
                    "answer": "It got mugged!"
                },
                {
                    "question": "Why did the banker switch careers?",
                    "answer": "He lost interest!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Addicted",
                    "definition": "Physically or mentally dependent on a particular substance or activity.",
                    "context": {
                        "Context 1": "I realized I was addicted to coffee after I couldn't function without it in the morning.",
                        "Context 2": "He was addicted to video games and spent all his free time playing.",
                        "Context 3": "Many people are addicted to social media, checking their phones constantly."
                    }
                },
                {
                    "word": "Cappuccino",
                    "definition": "A type of coffee made with equal parts espresso, steamed milk, and milk foam.",
                    "context": {
                        "Context 1": "I enjoy a cappuccino when I visit my favorite café in the city.",
                        "Context 2": "She ordered a cappuccino topped with chocolate sprinkles.",
                        "Context 3": "In Italy, a cappuccino is traditionally enjoyed only in the morning."
                    }
                },
                {
                    "word": "Americano",
                    "definition": "A type of coffee made by diluting espresso with hot water.",
                    "context": {
                        "Context 1": "An Americano is my go-to choice when I want a lighter coffee flavor.",
                        "Context 2": "He made himself an Americano to enjoy while reading the newspaper.",
                        "Context 3": "The barista explained that an Americano has a different taste than a regular brewed coffee."
                    }
                },
                {
                    "word": "Barista",
                    "definition": "A person who prepares and serves coffee drinks in a café.",
                    "context": {
                        "Context 1": "The barista at my local coffee shop knows exactly how I like my drinks.",
                        "Context 2": "She trained to become a barista to learn the art of coffee making.",
                        "Context 3": "The barista created a beautiful latte art design on top of my drink."
                    }
                },
                {
                    "word": "Granulated",
                    "definition": "Formed into small grains or particles.",
                    "context": {
                        "Context 1": "We used granulated sugar to sweeten our coffee.",
                        "Context 2": "The recipe called for granulated garlic, not fresh.",
                        "Context 3": "Granulated salt is often used in cooking for its quick dissolving properties."
                    }
                },
                {
                    "word": "Portion",
                    "definition": "A part of a whole; a serving size.",
                    "context": {
                        "Context 1": "I usually have a small portion of cake after dinner.",
                        "Context 2": "The restaurant served a generous portion of pasta.",
                        "Context 3": "He divided the pizza into equal portions for everyone."
                    }
                },
                {
                    "word": "Volume",
                    "definition": "The amount of space that a substance or object occupies.",
                    "context": {
                        "Context 1": "The volume of the coffee cup is 300 milliliters.",
                        "Context 2": "He adjusted the volume of the music to make it softer.",
                        "Context 3": "The volume of water in the tank needs to be monitored regularly."
                    }
                },
                {
                    "word": "Tasty",
                    "definition": "Having a pleasant flavor; delicious.",
                    "context": {
                        "Context 1": "The coffee my mom makes is always tasty and strong.",
                        "Context 2": "She prepared a tasty meal that everyone enjoyed.",
                        "Context 3": "The dessert was so tasty that I couldn't resist having a second piece."
                    }
                },
                {
                    "word": "Disgusting",
                    "definition": "Causing a strong feeling of dislike or repulsion.",
                    "context": {
                        "Context 1": "He found the taste of black coffee disgusting at first.",
                        "Context 2": "The smell coming from the garbage was absolutely disgusting.",
                        "Context 3": "She thought the movie was disgusting and left the theater."
                    }
                },
                {
                    "word": "Subscribe",
                    "definition": "To sign up to receive updates or content from a service or channel.",
                    "context": {
                        "Context 1": "I decided to subscribe to a channel that teaches English.",
                        "Context 2": "He subscribed to a magazine to get the latest news.",
                        "Context 3": "Many people subscribe to streaming services for entertainment."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Cappuccino",
                    "fact": "Did you know that the name 'cappuccino' comes from the Capuchin friars, whose brown robes resemble the drink's color?"
                },
                {
                    "word": "Addicted",
                    "fact": "There’s a phenomenon called 'coffee addiction,' where people can become so reliant on caffeine that they experience withdrawal symptoms!"
                },
                {
                    "word": "Granulated",
                    "fact": "Granulated sugar was once considered a luxury item and was often used as a form of currency!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the coffee file a police report?",
                    "answer": "It got mugged!"
                },
                {
                    "question": "What do you call sad coffee?",
                    "answer": "Depresso!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Realize",
                    "definition": "To become fully aware of something as a fact; to understand clearly.",
                    "context": {
                        "Context 1": "They just realized that they can study programming in English now.",
                        "Context 2": "I didn't realize how much I loved pizza until I tried a new restaurant.",
                        "Context 3": "She realized she left her keys at home when she reached the car."
                    }
                },
                {
                    "word": "Glitch",
                    "definition": "A sudden, usually temporary malfunction or irregularity in a system.",
                    "context": {
                        "Context 1": "Your video froze; it seems like there's a glitch in the connection.",
                        "Context 2": "The video game had a glitch that made the character fly through walls.",
                        "Context 3": "During the concert, there was a glitch in the sound system that interrupted the performance."
                    }
                },
                {
                    "word": "Idiomatic",
                    "definition": "Characteristic of a particular language; using expressions that are natural to native speakers.",
                    "context": {
                        "Context 1": "It's not idiomatic to say 'I agree with you very much' in English.",
                        "Context 2": "Learning idiomatic expressions can help you sound more fluent.",
                        "Context 3": "He used an idiomatic phrase that confused everyone at the meeting."
                    }
                },
                {
                    "word": "Input",
                    "definition": "To enter data or information into a system or process.",
                    "context": {
                        "Context 1": "You're inputting phrases that help you learn English.",
                        "Context 2": "The programmer needed to input the new code into the software.",
                        "Context 3": "She provided valuable input during the brainstorming session."
                    }
                },
                {
                    "word": "Progress",
                    "definition": "Forward or onward movement toward a destination or goal.",
                    "context": {
                        "Context 1": "You are making progress in your English skills.",
                        "Context 2": "The team made significant progress on the project this week.",
                        "Context 3": "He tracked his fitness progress by taking weekly measurements."
                    }
                },
                {
                    "word": "Relax",
                    "definition": "To make or become less tense or anxious.",
                    "context": {
                        "Context 1": "Remember to relax sometimes while studying English.",
                        "Context 2": "After a long day, I like to relax with a good book.",
                        "Context 3": "She took a deep breath to relax before her presentation."
                    }
                },
                {
                    "word": "Boost",
                    "definition": "To increase or improve something.",
                    "context": {
                        "Context 1": "Turning English into a means of relaxation will boost your progress.",
                        "Context 2": "The new marketing strategy helped boost sales significantly.",
                        "Context 3": "He took vitamins to boost his energy levels."
                    }
                },
                {
                    "word": "Incidentally",
                    "definition": "By the way; in an incidental manner.",
                    "context": {
                        "Context 1": "I will be happy to hear the rest of the story about incidentally turning on the faucet.",
                        "Context 2": "Incidentally, I found your lost book while cleaning.",
                        "Context 3": "She mentioned, incidentally, that she would be traveling next week."
                    }
                },
                {
                    "word": "Means",
                    "definition": "A method or way of doing something.",
                    "context": {
                        "Context 1": "If you can turn English into a means of relaxation, it will help you learn.",
                        "Context 2": "He used his savings as a means to start his own business.",
                        "Context 3": "The means of transportation in the city include buses and trains."
                    }
                },
                {
                    "word": "Situation",
                    "definition": "A set of circumstances in which one finds oneself.",
                    "context": {
                        "Context 1": "You can watch funny videos about crazy situations to relax.",
                        "Context 2": "The situation at work became tense after the new policy was introduced.",
                        "Context 3": "She found herself in a difficult situation when her car broke down."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Glitch",
                    "fact": "The term 'glitch' originally referred to a sudden surge of electricity, but now it’s often used for tech fails!"
                },
                {
                    "word": "Relax",
                    "fact": "Did you know that laughing can actually help you relax? It’s like a mini workout for your heart!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the computer go to therapy?",
                    "answer": "Because it had too many glitches in its system!"
                },
                {
                    "question": "Why did the student bring a ladder to class?",
                    "answer": "Because they wanted to go to high school!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going today?"
                },
                {
                    "Person 2": "Not too bad, just a little sleepy. I didn't get enough sleep last night."
                },
                {
                    "Person 1": "Oh no! How many hours did you get?"
                },
                {
                    "Person 2": "About six, I think. It's just not enough for me."
                },
                {
                    "Person 1": "Yeah, I hear you. I always feel like I need at least seven to function properly."
                },
                {
                    "Person 2": "Exactly! So, are you working from home today?"
                },
                {
                    "Person 1": "Yep, just the usual. But I might need to take a break soon."
                },
                {
                    "Person 2": "A break sounds good. What do you have planned?"
                },
                {
                    "Person 1": "I have to ask my boss for a couple of hours off. I need to go to a rehab session."
                },
                {
                    "Person 2": "Oh, I hope that goes well! But wait, if you're working remotely, how would your boss even know?"
                },
                {
                    "Person 1": "Good point! I mean, I could just say I'm working hard, right?"
                },
                {
                    "Person 2": "Haha, true! Just put a status up saying you're super busy."
                },
                {
                    "Person 1": "Exactly! I could even use a funny picture of a snail to show how hard I'm working."
                },
                {
                    "Person 2": "That would definitely get some laughs! Speaking of funny, did you hear about my friend's cat?"
                },
                {
                    "Person 1": "No, what happened?"
                },
                {
                    "Person 2": "So, her cat accidentally turned on the faucet and flooded her apartment!"
                },
                {
                    "Person 1": "Oh no! That's terrible! Was her place badly damaged?"
                },
                {
                    "Person 2": "Yeah, it was pretty bad. Water everywhere! Luckily, no one was hurt."
                },
                {
                    "Person 1": "That's a relief! But I can't believe a cat could cause that much trouble."
                },
                {
                    "Person 2": "Right? Cats can be so mischievous! I just hope her place gets fixed soon."
                },
                {
                    "Person 1": "Me too! So, are you still planning to take your dog for a walk later?"
                },
                {
                    "Person 2": "Definitely! Just not today since my friend can't go. But usually, we walk together."
                },
                {
                    "Person 1": "Sounds fun! I hope you get to go soon. Dogs need their exercise!"
                },
                {
                    "Person 2": "For sure! Alright, I better get back to work. Good luck with your boss!"
                },
                {
                    "Person 1": "Thanks! Catch you later!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you ever think about getting insurance for your apartment?"
                },
                {
                    "Person 2": "Actually, I was just looking into that! I was surprised to learn there’s insurance for floods."
                },
                {
                    "Person 1": "Flood insurance? That’s interesting. I guess it makes sense if you live in a flood-prone area."
                },
                {
                    "Person 2": "Yeah, and they even have coverage for things like fire or even drone attacks!"
                },
                {
                    "Person 1": "Drone attacks? Wow, that’s a new one! I didn’t know that was a thing."
                },
                {
                    "Person 2": "I know, right? My insurance agent mentioned it when I was discussing my current coverage."
                },
                {
                    "Person 1": "So, how much does that cost? Is it expensive?"
                },
                {
                    "Person 2": "Not really! I think it was around $200 a year for my apartment."
                },
                {
                    "Person 1": "That’s not bad at all! Does it cover everything, or is there a limit?"
                },
                {
                    "Person 2": "There’s a limit, but it’s pretty decent. I think it covers up to $100,000."
                },
                {
                    "Person 1": "That sounds reasonable. I’ve heard some companies don’t pay out when accidents happen."
                },
                {
                    "Person 2": "Exactly! That’s why I went with a company that has good reviews."
                },
                {
                    "Person 1": "Smart move! By the way, do you drink coffee? I could use a caffeine boost right now."
                },
                {
                    "Person 2": "I love coffee! I usually make it in this little pot, but it takes forever to boil."
                },
                {
                    "Person 1": "Oh, I know what you mean! I have a fancy coffee machine, but it takes up so much space."
                },
                {
                    "Person 2": "Yeah, I thought about getting one, but I don’t have room for it in my kitchen."
                },
                {
                    "Person 1": "Same here! I’d rather just stick to my little pot for now."
                },
                {
                    "Person 2": "Exactly! Plus, I feel like I spend too much time cleaning those machines."
                },
                {
                    "Person 1": "Right? I’d rather just enjoy my coffee without the hassle."
                },
                {
                    "Person 2": "For sure! And I prefer my coffee black, no sugar or anything."
                },
                {
                    "Person 1": "Same! I can’t stand sweet coffee. It just doesn’t taste right."
                },
                {
                    "Person 2": "Exactly! Just give me a strong cup of espresso, and I’m good to go."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever tried adding sugar to your coffee?"
                },
                {
                    "Person 2": "Oh, definitely! I think it makes it taste so much better. But sometimes I feel like I'm addicted to it."
                },
                {
                    "Person 1": "Right? I mean, I can't start my day without my cup of coffee. It's like a ritual."
                },
                {
                    "Person 2": "Same here! I usually go for a cappuccino when I treat myself. How about you?"
                },
                {
                    "Person 1": "I love cappuccinos too! But honestly, I just drink whatever coffee I can get my hands on in the morning."
                },
                {
                    "Person 2": "Haha, I get that! Sometimes I just grab a quick cup from the gas station on my way to work."
                },
                {
                    "Person 1": "Exactly! Those big coffee machines can be lifesavers. Do you prefer Americano or espresso?"
                },
                {
                    "Person 2": "I think I lean more towards Americano. It's just a bit milder, you know?"
                },
                {
                    "Person 1": "Yeah, I get that. Espresso can be a bit too strong for me sometimes."
                },
                {
                    "Person 2": "Totally! And I always end up adding sugar to it anyway. What’s your favorite way to drink coffee?"
                },
                {
                    "Person 1": "I like it strong, but with just a little bit of cream. Keeps it smooth."
                },
                {
                    "Person 2": "Nice! I usually go for a flavored coffee, like hazelnut or vanilla. It feels like a little treat."
                },
                {
                    "Person 1": "That sounds delicious! I should try that sometime. Do you ever make coffee at home?"
                },
                {
                    "Person 2": "Yeah, I do! I got a French press recently, and it makes such a difference."
                },
                {
                    "Person 1": "Oh, I love French press coffee! It has such a rich flavor."
                },
                {
                    "Person 2": "Exactly! It’s like a little coffee shop experience at home."
                },
                {
                    "Person 1": "For sure! We should have a coffee date sometime and try out new flavors."
                },
                {
                    "Person 2": "Absolutely! Let’s plan for it this weekend!"
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever thought about how learning English can change your life?"
                },
                {
                    "Person 2": "Totally! I mean, I used to struggle with programming because I didn't understand the instructions in English."
                },
                {
                    "Person 1": "Right? And then once you get the hang of it, everything just clicks!"
                },
                {
                    "Person 2": "Exactly! I remember when I finally understood a tutorial, and it felt like a light bulb went off."
                },
                {
                    "Person 1": "And it opens up so many opportunities, like meeting new people or even traveling."
                },
                {
                    "Person 2": "For sure! I have a friend who moved to Austria and found love there. It's like a fairy tale!"
                },
                {
                    "Person 1": "That's amazing! It really shows how learning a language can lead to unexpected adventures."
                },
                {
                    "Person 2": "Definitely! And I think the more you practice, the more natural it becomes."
                },
                {
                    "Person 1": "Yeah, like when you start using phrases correctly without even thinking about it."
                },
                {
                    "Person 2": "Exactly! I used to say things like 'I agree with you very much,' but now I just say 'I totally agree.'"
                },
                {
                    "Person 1": "And it sounds so much better! It’s all about those little improvements."
                },
                {
                    "Person 2": "For sure! Plus, if you can find ways to enjoy learning, it makes it so much easier."
                },
                {
                    "Person 1": "Right! Like watching funny videos in English instead of just scrolling through TikTok."
                },
                {
                    "Person 2": "Yes! It turns learning into something fun instead of a chore."
                },
                {
                    "Person 1": "Exactly! So, what are you planning to do next with your English?"
                },
                {
                    "Person 2": "I think I’ll start watching more YouTube channels in English. It’s relaxing and educational!"
                },
                {
                    "Person 1": "Great idea! Let’s catch up later and share what we’ve learned."
                },
                {
                    "Person 2": "Sounds good! Have a great day!"
                },
                {
                    "Person 1": "You too! Bye!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
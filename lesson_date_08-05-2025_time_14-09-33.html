<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 3,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "do you see me well to hear me well",
                    "corrected": "do you see me well and hear me well",
                    "explanation": "The conjunction 'and' is needed to connect the two clauses properly.",
                    "context": "Before we start the lesson, I want to make sure everything is working. Do you see me well and hear me well? It's important for our communication."
                },
                {
                    "original": "i think uh... English will be better",
                    "corrected": "I think English will be better.",
                    "explanation": "The pronoun 'I' should be capitalized, and the filler 'uh...' can be omitted for clarity.",
                    "context": "When deciding on the language for our conversation, I think English will be better. It will help us communicate more effectively."
                },
                {
                    "original": "it's a small town in russia is both local it was the reason the the the rest of the house stalinis",
                    "corrected": "It's a small town in Russia, and it was the reason for the rest of the house's Stalinist architecture.",
                    "explanation": "The sentence is fragmented and lacks proper punctuation; 'is both local' is unclear and should be rephrased.",
                    "context": "When asked about my hometown, I mentioned that it's a small town in Russia. It's known for its Stalinist architecture, which reflects its historical significance."
                },
                {
                    "original": "i don't you use english daily",
                    "corrected": "I don't use English daily.",
                    "explanation": "The word 'you' is unnecessary and makes the sentence grammatically incorrect.",
                    "context": "I studied English for a while, but I don't use English daily. I need to practice more to improve."
                },
                {
                    "original": "like your or can you about your listening comprehension",
                    "corrected": "Can you tell me about your listening comprehension?",
                    "explanation": "The phrase is jumbled and lacks clarity; it needs proper structure.",
                    "context": "I want to understand how well you comprehend spoken English. Can you tell me about your listening comprehension?"
                },
                {
                    "original": "it's in high university like uh... but it's in tashkent",
                    "corrected": "It's a high university in Tashkent.",
                    "explanation": "The phrase 'like uh...' is unnecessary and makes the sentence awkward; it should be more direct.",
                    "context": "When discussing my university plans, I mentioned that it's a high university in Tashkent. I'm excited about the opportunities it offers."
                },
                {
                    "original": "i think it's writing and reading maybes must be canceled",
                    "corrected": "I think writing and reading might be the hardest.",
                    "explanation": "'Maybes must be canceled' is unclear; 'might be' is a more appropriate phrase.",
                    "context": "When asked about the hardest sections, I think writing and reading might be the hardest for me. I find them challenging."
                },
                {
                    "original": "first of all we will write your general opinion you disagree you disagree",
                    "corrected": "First of all, we will write your general opinion. You disagree.",
                    "explanation": "The sentence lacks punctuation and clarity; it should be separated into two sentences.",
                    "context": "As we begin the writing exercise, I want to clarify that first of all, we will write your general opinion. You disagree with the idea of robots replacing humans."
                },
                {
                    "original": "because robots don't have feelings write it down here in the idea section",
                    "corrected": "Because robots don't have feelings, write it down here in the idea section.",
                    "explanation": "The sentence needs a comma before 'write' to separate the clauses correctly.",
                    "context": "When discussing the topic, I emphasized that because robots don't have feelings, it's important to write it down here in the idea section."
                },
                {
                    "original": "like uh... people person's mental help robots can't understand them",
                    "corrected": "Like people, mental health specialists help individuals; robots can't understand them.",
                    "explanation": "The phrase is awkwardly structured and needs clarity; 'mental health specialists' is a better term.",
                    "context": "In discussing the role of psychologists, I pointed out that like people, mental health specialists help individuals; robots can't understand them."
                },
                {
                    "original": "the ability to paraphrase is much more important and powerful than the ability to remember words",
                    "corrected": "The ability to paraphrase is much more important and powerful than simply remembering words.",
                    "explanation": "Adding 'simply' improves clarity and emphasizes the contrast.",
                    "context": "While discussing language skills, I noted that the ability to paraphrase is much more important and powerful than simply remembering words. It enhances communication."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "why mental health specialist needs emotion",
                    "corrected": "why mental health specialists need emotion",
                    "explanation": "The subject 'specialist' should be pluralized to 'specialists' to match the plural form of 'needs.'",
                    "context": "When discussing the importance of emotions in therapy, I mentioned why mental health specialists need emotion. It's crucial for them to connect with their clients."
                },
                {
                    "original": "like lost the member of his family",
                    "corrected": "like losing a member of his family",
                    "explanation": "The phrase 'lost the member' should be changed to 'losing a member' to maintain the correct verb form.",
                    "context": "I provided an example of a person who might need therapy, like losing a member of his family. This situation can be very emotional and requires understanding."
                },
                {
                    "original": "like not psychology not it's hard to talk about psychology",
                    "corrected": "like not psychology, it's hard to talk about psychology",
                    "explanation": "The phrase is confusing; it should be separated into two clauses for clarity.",
                    "context": "I suggested that if discussing psychology is uncomfortable, we might consider another topic. It's hard to talk about psychology sometimes."
                },
                {
                    "original": "like teachers what makes teachers special",
                    "corrected": "like teachers, what makes teachers special",
                    "explanation": "A comma is needed after 'teachers' to separate the clauses properly.",
                    "context": "I shifted the focus to teachers and what makes them special. Teachers have unique qualities that help them connect with students."
                },
                {
                    "original": "she can explain him in a different way",
                    "corrected": "she can explain it to him in a different way",
                    "explanation": "The pronoun 'it' is needed to clarify what is being explained, and 'to' is required for correct preposition use.",
                    "context": "I explained how a teacher can adapt their explanations. She can explain it to him in a different way that makes sense."
                },
                {
                    "original": "if child didn't understand",
                    "corrected": "if a child didn't understand",
                    "explanation": "The article 'a' is needed before 'child' for grammatical correctness.",
                    "context": "I mentioned that if a child didn't understand, the teacher could help. This emphasizes the importance of support in learning."
                },
                {
                    "original": "you can ask in if you don't understand something",
                    "corrected": "you can ask if you don't understand something",
                    "explanation": "The word 'in' is unnecessary and makes the sentence awkward.",
                    "context": "I highlighted the benefit of in-person teaching. You can ask if you don't understand something right away."
                },
                {
                    "original": "if I don't stand on one word",
                    "corrected": "if I don't understand one word",
                    "explanation": "The phrase 'don't stand on' is incorrect; 'understand' should be used instead.",
                    "context": "I was discussing how students might feel confused. If I don't understand one word, I can ask for clarification."
                },
                {
                    "original": "what kind of explanation maybe if I don't stand on one word",
                    "corrected": "what kind of explanation can I get if I don't understand one word",
                    "explanation": "The sentence structure is unclear; it should be rephrased for coherence.",
                    "context": "I was trying to clarify what kind of explanations are available. What kind of explanation can I get if I don't understand one word?"
                },
                {
                    "original": "teachers can I don't remember support otherwise",
                    "corrected": "teachers can support you in other ways",
                    "explanation": "The phrase is incomplete and confusing; it should be restructured for clarity.",
                    "context": "I was trying to articulate how teachers can help. Teachers can support you in other ways, not just academically."
                },
                {
                    "original": "they can cheer you up write it down please",
                    "corrected": "they can cheer you up; write it down, please.",
                    "explanation": "The sentence lacks proper punctuation and structure; it should be divided into two sentences.",
                    "context": "I emphasized the supportive role of teachers. They can cheer you up; write it down, please."
                },
                {
                    "original": "but why is it not the same body body body body body body body",
                    "corrected": "but why is it not the same?",
                    "explanation": "The repetition of 'body' is unnecessary and makes the sentence confusing.",
                    "context": "I was questioning the limitations of AI in emotional support. But why is it not the same?"
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "Because when a person feels upset and he needs a support, he needs someone maybe to hug him.",
                    "corrected": "Because when a person feels upset and needs support, they may need someone to hug them.",
                    "explanation": "The article 'a' is unnecessary before 'support,' and 'he' should be replaced with 'they' for gender neutrality.",
                    "context": "When someone is feeling down, it's important to provide emotional support. Because when a person feels upset and needs support, they may need someone to hug them. This highlights the importance of human connection."
                },
                {
                    "original": "If I can't understand something.",
                    "corrected": "If I can't understand anything.",
                    "explanation": "'Something' is vague; 'anything' is more appropriate in negative constructions.",
                    "context": "In discussions about comprehension, clarity is crucial. If I can't understand anything, I need to ask for help. This ensures I grasp the topic better."
                },
                {
                    "original": "What is it about understanding?",
                    "corrected": "What is understanding about?",
                    "explanation": "The original phrasing is awkward; the corrected version is more idiomatic.",
                    "context": "Understanding is a key part of learning. What is understanding about? It's about grasping concepts and ideas clearly."
                },
                {
                    "original": "But what it can do really?",
                    "corrected": "But what can it really do?",
                    "explanation": "The word order is incorrect; the auxiliary verb should precede the subject in questions.",
                    "context": "In discussing AI capabilities, clarity is essential. But what can it really do? This question drives the conversation forward."
                },
                {
                    "original": "I feel very dumb.",
                    "corrected": "I feel very stupid.",
                    "explanation": "'Dumb' can imply a lack of intelligence or the inability to speak; 'stupid' is more commonly used to express feeling inadequate.",
                    "context": "In moments of self-doubt, it's common to feel inadequate. I feel very stupid. This reflects my frustration with my progress."
                },
                {
                    "original": "I think it's just a lack of practice.",
                    "corrected": "I think it's just a matter of practice.",
                    "explanation": "'A lack of practice' is not incorrect, but 'a matter of practice' is more idiomatic in this context.",
                    "context": "When discussing challenges in learning, it's important to identify the cause. I think it's just a matter of practice. This suggests that improvement is possible."
                },
                {
                    "original": "You need to do it anyway.",
                    "corrected": "You need to do it regardless.",
                    "explanation": "'Anyway' is informal; 'regardless' is more formal and fits better in this context.",
                    "context": "In learning, commitment is crucial. You need to do it regardless. This emphasizes the importance of consistent effort."
                },
                {
                    "original": "It's something we do because we like it.",
                    "corrected": "It's something we do because we enjoy it.",
                    "explanation": "'Like' is informal; 'enjoy' conveys a deeper appreciation for the activity.",
                    "context": "Engaging with a language should be enjoyable. It's something we do because we enjoy it. This perspective can motivate learners."
                },
                {
                    "original": "You can do more.",
                    "corrected": "You can achieve more.",
                    "explanation": "'Do more' is vague; 'achieve more' is more specific and motivational.",
                    "context": "In learning, setting goals is important. You can achieve more. This encourages a growth mindset."
                },
                {
                    "original": "You will get used to it and... And such words will not be forgotten.",
                    "corrected": "You will get used to it, and those words won't be forgotten.",
                    "explanation": "The phrase 'such words' is awkward; 'those words' is clearer and more natural.",
                    "context": "Familiarity with a language leads to retention. You will get used to it, and those words won't be forgotten. This highlights the importance of exposure."
                },
                {
                    "original": "At home, it will be necessary to reveal it to the fullest.",
                    "corrected": "At home, it will be necessary to develop it fully.",
                    "explanation": "'Reveal it to the fullest' is awkward; 'develop it fully' is clearer and more precise.",
                    "context": "Preparation is key for success. At home, it will be necessary to develop it fully. This ensures readiness for the exam."
                },
                {
                    "original": "This must be done.",
                    "corrected": "This needs to be done.",
                    "explanation": "'Must' is strong; 'needs to' is more appropriate for suggesting necessity without being overly forceful.",
                    "context": "In learning, certain tasks are essential. This needs to be done. This emphasizes the importance of following through."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Gap Year",
                    "definition": "A year taken by a student as a break from formal education, often to travel or gain experience.",
                    "context": {
                        "Context 1": "I took a gap year after high school to travel and explore different cultures.",
                        "Context 2": "Many students choose to take a gap year to volunteer abroad before starting college.",
                        "Context 3": "During my gap year, I learned how to cook and even started a small catering business."
                    }
                },
                {
                    "word": "Unified State Exam",
                    "definition": "A standardized test in Russia that students must pass to graduate from high school and enter university.",
                    "context": {
                        "Context 1": "She studied hard for the Unified State Exam to ensure she could get into a good university.",
                        "Context 2": "The Unified State Exam results determine which universities students can apply to.",
                        "Context 3": "In the game, the character had to pass a series of tests, similar to the Unified State Exam, to unlock the next level."
                    }
                },
                {
                    "word": "Listening Comprehension",
                    "definition": "The ability to understand spoken language and interpret its meaning.",
                    "context": {
                        "Context 1": "Improving your listening comprehension can greatly enhance your overall language skills.",
                        "Context 2": "The teacher gave us a listening comprehension exercise to test our understanding of the audio.",
                        "Context 3": "In the movie, the main character struggled with listening comprehension, often misunderstanding what others said."
                    }
                },
                {
                    "word": "Paraphrase",
                    "definition": "To express the meaning of something written or spoken using different words.",
                    "context": {
                        "Context 1": "It's important to paraphrase information in your own words to avoid plagiarism.",
                        "Context 2": "The teacher asked us to paraphrase the poem to show our understanding of its themes.",
                        "Context 3": "He tried to paraphrase the instructions but ended up confusing everyone even more."
                    }
                },
                {
                    "word": "Specialist",
                    "definition": "A person who is highly skilled or knowledgeable in a particular area or field.",
                    "context": {
                        "Context 1": "The psychologist is a specialist in child development and offers valuable insights.",
                        "Context 2": "To fix the computer, I had to call a specialist who knew how to handle the issue.",
                        "Context 3": "The chef was a specialist in Italian cuisine, known for his delicious pasta dishes."
                    }
                },
                {
                    "word": "Emotional",
                    "definition": "Relating to feelings or emotions; capable of expressing strong feelings.",
                    "context": {
                        "Context 1": "The movie was so emotional that it made everyone in the theater cry.",
                        "Context 2": "She gave an emotional speech that touched the hearts of everyone present.",
                        "Context 3": "The robot's emotional response was programmed to mimic human feelings, but it wasn't genuine."
                    }
                },
                {
                    "word": "Comprehension",
                    "definition": "The ability to understand something; the process of grasping the meaning of information.",
                    "context": {
                        "Context 1": "Reading comprehension is essential for academic success.",
                        "Context 2": "He struggled with comprehension during the lecture and had to ask for clarification.",
                        "Context 3": "The comprehension of the ancient text required years of study and expertise."
                    }
                },
                {
                    "word": "Experience",
                    "definition": "Practical contact with and observation of facts or events; knowledge gained through involvement.",
                    "context": {
                        "Context 1": "I gained valuable experience during my internship at the hospital.",
                        "Context 2": "Her experience in teaching helped her connect with the students better.",
                        "Context 3": "The roller coaster ride was an unforgettable experience that I will cherish forever."
                    }
                },
                {
                    "word": "Opinion",
                    "definition": "A personal view, attitude, or appraisal about a particular topic.",
                    "context": {
                        "Context 1": "Everyone is entitled to their own opinion, even if they disagree with others.",
                        "Context 2": "The article presented various opinions on climate change and its impact.",
                        "Context 3": "His opinion on pineapple on pizza sparked a heated debate among friends."
                    }
                },
                {
                    "word": "Understand",
                    "definition": "To grasp the meaning, significance, or nature of something.",
                    "context": {
                        "Context 1": "I finally understand the concept after the teacher explained it several times.",
                        "Context 2": "Do you understand the instructions for the game, or should I explain them again?",
                        "Context 3": "She couldn't understand why her cat preferred to sit in the box rather than on the couch."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Psychologist",
                    "fact": "Did you know that psychologists often use humor as a therapeutic tool? Laughter can be a great way to relieve stress!"
                },
                {
                    "word": "Robot",
                    "fact": "In Japan, there are robots designed to help elderly people, but they sometimes get confused and ask for help themselves!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the robot go on a diet?",
                    "answer": "Because it had too many bytes!"
                },
                {
                    "question": "Why did the student bring a ladder to school?",
                    "answer": "Because they wanted to go to high school!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Specify",
                    "definition": "To state something in a clear and detailed manner.",
                    "context": {
                        "Context 1": "Please specify why you think robots can't understand emotions.",
                        "Context 2": "The teacher asked us to specify our favorite books for the reading list.",
                        "Context 3": "During the meeting, she needed to specify the deadlines for each project."
                    }
                },
                {
                    "word": "Emotion",
                    "definition": "A natural instinctive state of mind deriving from one's circumstances, mood, or relationships with others.",
                    "context": {
                        "Context 1": "Therapists help clients understand their emotions better.",
                        "Context 2": "The movie was so touching that it evoked strong emotions in the audience.",
                        "Context 3": "Cats can show emotion through their purring and body language."
                    }
                },
                {
                    "word": "Tragedy",
                    "definition": "An event causing great suffering, destruction, and distress.",
                    "context": {
                        "Context 1": "The therapist helped the person cope with the tragedy of losing a family member.",
                        "Context 2": "The play was a tragedy that left the audience in tears.",
                        "Context 3": "The tragedy of the lost city became a popular topic in history classes."
                    }
                },
                {
                    "word": "Comfortable",
                    "definition": "Providing physical ease and relaxation; free from stress or worry.",
                    "context": {
                        "Context 1": "It's important to feel comfortable when discussing your feelings with a therapist.",
                        "Context 2": "She wore her comfortable shoes for the long walk.",
                        "Context 3": "The couch was so comfortable that he fell asleep while watching TV."
                    }
                },
                {
                    "word": "Support",
                    "definition": "To bear all or part of the weight of; to help or assist.",
                    "context": {
                        "Context 1": "Teachers can provide emotional support to students who are struggling.",
                        "Context 2": "The community came together to support the local animal shelter.",
                        "Context 3": "He needed support from his friends during tough times."
                    }
                },
                {
                    "word": "Explain",
                    "definition": "To make something clear or easy to understand by describing or giving information about it.",
                    "context": {
                        "Context 1": "The teacher can explain complex topics in simple terms.",
                        "Context 2": "Can you explain how to bake a cake step by step?",
                        "Context 3": "He tried to explain the rules of the game to the new players."
                    }
                },
                {
                    "word": "Perspective",
                    "definition": "A particular attitude toward or way of regarding something; a point of view.",
                    "context": {
                        "Context 1": "Having a different perspective can help in understanding others' feelings.",
                        "Context 2": "From her perspective, the project was a success despite the challenges.",
                        "Context 3": "Traveling can provide a new perspective on life and culture."
                    }
                },
                {
                    "word": "Convince",
                    "definition": "To cause someone to believe firmly in the truth of something.",
                    "context": {
                        "Context 1": "You need to convince your audience why robots can't teach effectively.",
                        "Context 2": "She tried to convince her parents to let her go to the concert.",
                        "Context 3": "The salesman worked hard to convince customers to buy the new product."
                    }
                },
                {
                    "word": "Understand",
                    "definition": "To grasp the idea, significance, or meaning of something.",
                    "context": {
                        "Context 1": "It's essential for therapists to understand their clients' emotions.",
                        "Context 2": "I don't understand why the sky is blue.",
                        "Context 3": "He struggled to understand the math problem until the teacher explained it."
                    }
                },
                {
                    "word": "Cheer up",
                    "definition": "To make someone feel happier.",
                    "context": {
                        "Context 1": "Teachers can cheer up students who are feeling down.",
                        "Context 2": "She brought cookies to cheer up her friend after a bad day.",
                        "Context 3": "A funny movie can cheer up anyone feeling sad."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Emotion",
                    "fact": "Did you know that cows have best friends and can become stressed when separated from them?"
                },
                {
                    "word": "Tragedy",
                    "fact": "The word 'tragedy' comes from ancient Greek theater, where it meant 'goat song' because goats were often sacrificed during performances!"
                },
                {
                    "word": "Cheer up",
                    "fact": "The phrase 'cheer up' was first used in the 19th century, and it was originally meant to encourage someone to be more lively and spirited!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the robot go on a diet?",
                    "answer": "Because it had too many bytes!"
                },
                {
                    "question": "What do you call a sad robot?",
                    "answer": "A 'we-robot'!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Support",
                    "definition": "To give assistance or help to someone.",
                    "context": {
                        "Context 1": "When someone is feeling down, they often need emotional support from friends or family.",
                        "Context 2": "The new software was designed to support multiple languages.",
                        "Context 3": "He decided to support his local community by volunteering at the shelter."
                    }
                },
                {
                    "word": "Sophisticated",
                    "definition": "Having a lot of knowledge or experience; complex or intricate.",
                    "context": {
                        "Context 1": "The discussion about AI was very sophisticated, touching on many advanced concepts.",
                        "Context 2": "Her sophisticated taste in art impressed everyone at the gallery.",
                        "Context 3": "The sophisticated machinery in the factory allows for high efficiency."
                    }
                },
                {
                    "word": "Emotion",
                    "definition": "A strong feeling such as joy, anger, or sadness.",
                    "context": {
                        "Context 1": "Understanding emotion is crucial in building strong relationships.",
                        "Context 2": "The movie was so emotional that it made everyone cry.",
                        "Context 3": "He expressed his emotion through his artwork."
                    }
                },
                {
                    "word": "Imagination",
                    "definition": "The ability to form new ideas or images not present to the senses.",
                    "context": {
                        "Context 1": "She felt her imagination was lacking when trying to come up with creative solutions.",
                        "Context 2": "Children often have vivid imagination, creating entire worlds in their play.",
                        "Context 3": "His imagination took him on adventures across the universe."
                    }
                },
                {
                    "word": "Interact",
                    "definition": "To communicate or work together with someone.",
                    "context": {
                        "Context 1": "It's important to interact with the language regularly to improve fluency.",
                        "Context 2": "The children were excited to interact with the animals at the zoo.",
                        "Context 3": "He prefers to interact with people in person rather than online."
                    }
                },
                {
                    "word": "Consistent",
                    "definition": "Acting or done in the same way over time, especially to be fair or accurate.",
                    "context": {
                        "Context 1": "To see improvement, you need to be consistent in your practice.",
                        "Context 2": "The athlete's consistent performance earned her a spot on the national team.",
                        "Context 3": "He maintained a consistent schedule to balance work and study."
                    }
                },
                {
                    "word": "Develop",
                    "definition": "To grow or cause to grow and become more mature, advanced, or elaborate.",
                    "context": {
                        "Context 1": "They need to develop their ideas further to make the project successful.",
                        "Context 2": "The city plans to develop a new park for the community.",
                        "Context 3": "She hopes to develop her skills in painting over the summer."
                    }
                },
                {
                    "word": "Core",
                    "definition": "The central or most important part of something.",
                    "context": {
                        "Context 1": "The core idea of the lesson was about human connection.",
                        "Context 2": "The core of the apple is often discarded when eating.",
                        "Context 3": "Understanding the core values of a company is essential for employees."
                    }
                },
                {
                    "word": "Reflect",
                    "definition": "To think deeply or carefully about something.",
                    "context": {
                        "Context 1": "Students should reflect on their learning to understand their progress.",
                        "Context 2": "The calm lake reflected the beautiful sunset.",
                        "Context 3": "He took a moment to reflect on his life choices."
                    }
                },
                {
                    "word": "Energy-consuming",
                    "definition": "Requiring a lot of energy or effort to complete.",
                    "context": {
                        "Context 1": "Preparing for the exam can be an energy-consuming task.",
                        "Context 2": "Running a marathon is an energy-consuming activity.",
                        "Context 3": "The energy-consuming process of making chocolate involves many steps."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Imagination",
                    "fact": "Did you know that Albert Einstein once said, 'Imagination is more important than knowledge?'"
                },
                {
                    "word": "Support",
                    "fact": "In the animal kingdom, elephants are known to support each other emotionally, often mourning their dead!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the computer go to therapy?",
                    "answer": "Because it had too many bytes of emotional baggage!"
                },
                {
                    "question": "What do you call a bear with no teeth?",
                    "answer": "A gummy bear!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not much, just enjoying my day off. How about you?"
                },
                {
                    "Person 1": "Same here! I finally have some free time to relax. Any plans for the weekend?"
                },
                {
                    "Person 2": "I was thinking about going hiking if the weather holds up. What about you?"
                },
                {
                    "Person 1": "That sounds fun! I might just catch up on some shows and maybe bake something."
                },
                {
                    "Person 2": "Oh nice! What are you planning to bake?"
                },
                {
                    "Person 1": "I’m thinking cookies. Can’t go wrong with cookies, right?"
                },
                {
                    "Person 2": "Absolutely! What kind are you making?"
                },
                {
                    "Person 1": "Probably chocolate chip. Classic choice!"
                },
                {
                    "Person 2": "You can never go wrong with chocolate chip! Do you have a secret ingredient?"
                },
                {
                    "Person 1": "I add a bit of sea salt on top before baking. It really enhances the flavor!"
                },
                {
                    "Person 2": "That sounds amazing! I might have to try that next time."
                },
                {
                    "Person 1": "You definitely should! So, do you have any favorite hiking spots?"
                },
                {
                    "Person 2": "Yeah, there's a great trail about an hour away. It has some stunning views."
                },
                {
                    "Person 1": "That sounds perfect! I love a good view after a hike."
                },
                {
                    "Person 2": "For sure! It makes all the effort worth it. Want to join me next time?"
                },
                {
                    "Person 1": "I’d love to! Just let me know when you go."
                },
                {
                    "Person 2": "Will do! And I’ll bring some cookies for the hike."
                },
                {
                    "Person 1": "Deal! Can’t wait!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Have you ever thought about how hard it is to talk about feelings sometimes?"
                },
                {
                    "Person 2": "Oh, totally! I mean, I can never find the right words. It’s like my brain just freezes."
                },
                {
                    "Person 1": "Right? And then you try to explain something serious, and it just comes out all jumbled."
                },
                {
                    "Person 2": "Exactly! Like, if someone asks how I feel about something, I just end up saying 'I don’t know.'"
                },
                {
                    "Person 1": "Same here! I think it’s easier to talk about other stuff, like hobbies or movies."
                },
                {
                    "Person 2": "For sure! But when it comes to emotions, it’s like, where do I even start?"
                },
                {
                    "Person 1": "Maybe we should practice? Like, pick a topic and just go for it."
                },
                {
                    "Person 2": "That could work! How about we start with something simple, like our favorite memories?"
                },
                {
                    "Person 1": "Great idea! I remember this one summer when we went to the beach. It was so much fun!"
                },
                {
                    "Person 2": "Oh, I loved that trip! We built that giant sandcastle and then got ice cream afterward."
                },
                {
                    "Person 1": "Exactly! And we laughed so much when the waves knocked it down."
                },
                {
                    "Person 2": "That was the best! See, talking about happy memories is way easier."
                },
                {
                    "Person 1": "Yeah! Maybe we can build up to the tougher stuff, like talking about stress or anxiety."
                },
                {
                    "Person 2": "Definitely! It’s all about taking baby steps, right?"
                },
                {
                    "Person 1": "For sure! Let’s keep practicing. We’ll get better at it together."
                },
                {
                    "Person 2": "Absolutely! And who knows, maybe we’ll even help each other feel more comfortable."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just trying to figure out what to watch on Netflix. You?"
                },
                {
                    "Person 1": "Same here! I feel like I've seen everything already. Any recommendations?"
                },
                {
                    "Person 2": "Actually, I just finished this awesome series about a detective. It was really gripping!"
                },
                {
                    "Person 1": "Oh nice! I love a good mystery. What’s it called?"
                },
                {
                    "Person 2": "It's called 'The Night Agent.' You should definitely check it out!"
                },
                {
                    "Person 1": "Sounds good! I’ll add it to my list. I’ve been trying to watch more shows in English to improve my skills."
                },
                {
                    "Person 2": "That’s a great idea! I find that watching shows really helps with understanding the language."
                },
                {
                    "Person 1": "Yeah, I agree. Sometimes I catch myself picking up phrases I didn’t know before."
                },
                {
                    "Person 2": "Exactly! Plus, it’s way more fun than just studying from a textbook."
                },
                {
                    "Person 1": "For sure! Do you have any other tips for learning while watching?"
                },
                {
                    "Person 2": "I usually turn on subtitles. It helps me connect the spoken words with how they’re written."
                },
                {
                    "Person 1": "Great tip! I’ll try that. What do you think about watching videos on YouTube?"
                },
                {
                    "Person 2": "YouTube is awesome! There are tons of channels that teach English in a fun way."
                },
                {
                    "Person 1": "Nice! I’ll look into that too. I want to make the most of my free time."
                },
                {
                    "Person 2": "Definitely! Just remember to enjoy it. Learning should be fun!"
                },
                {
                    "Person 1": "Absolutely! Thanks for the chat. I feel more motivated now."
                },
                {
                    "Person 2": "Anytime! Let’s catch up later and see how our shows are going."
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
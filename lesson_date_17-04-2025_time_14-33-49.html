<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 3,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "I have, I has, oh, I have it very.",
                    "corrected": "I have it very rarely.",
                    "explanation": "The verb 'has' is incorrect here; 'have' should be used with 'I'.",
                    "context": "I don't usually remember my dreams. I have it very rarely. It's quite uncommon for me."
                },
                {
                    "original": "I'm agree.",
                    "corrected": "I agree.",
                    "explanation": "'I'm agree' is incorrect; the correct form is simply 'I agree'.",
                    "context": "Some people believe dreams can predict the future. I agree with this idea. It makes sense to me."
                },
                {
                    "original": "I think I over well every day.",
                    "corrected": "I think I am overwhelmed every day.",
                    "explanation": "'Over well' is not a correct phrase; 'am overwhelmed' should be used to express the state.",
                    "context": "I feel a lot of pressure lately. I think I am overwhelmed every day. It's been tough to manage."
                },
                {
                    "original": "I had very, uh, bright full days.",
                    "corrected": "I had very busy days.",
                    "explanation": "'Bright full days' is not idiomatic; 'busy days' is a more natural expression.",
                    "context": "Last weekend was quite eventful for me. I had very busy days. There was so much going on."
                },
                {
                    "original": "I didn't have any allergy before this moment moment.",
                    "corrected": "I didn't have any allergies before this moment.",
                    "explanation": "The phrase 'before this moment moment' is redundant; 'before this moment' is sufficient.",
                    "context": "I've never experienced allergies before. I didn't have any allergies before this moment. It's surprising to me."
                },
                {
                    "original": "I felt myself bad.",
                    "corrected": "I felt bad.",
                    "explanation": "'Felt myself bad' is incorrect; simply saying 'I felt bad' is the correct form.",
                    "context": "After a rough night, I was not in a good state. I felt bad. It affected my mood."
                },
                {
                    "original": "I can't recover my, uh, my mood, my state, physical, like state.",
                    "corrected": "I can't recover my physical state.",
                    "explanation": "The phrase is overly complicated; 'my physical state' is clearer and more concise.",
                    "context": "I've been feeling off lately. I can't recover my physical state. It's hard to get back to normal."
                },
                {
                    "original": "This day was rich on events.",
                    "corrected": "This day was full of events.",
                    "explanation": "'Rich on events' is not idiomatic; 'full of events' is the correct expression.",
                    "context": "Yesterday was quite exciting. This day was full of events. I had a lot to do."
                },
                {
                    "original": "I'm not feel myself overwhelmed.",
                    "corrected": "I don't feel overwhelmed.",
                    "explanation": "'I'm not feel' is incorrect; the correct form is 'I don't feel'.",
                    "context": "Today is a bit different. I don't feel overwhelmed. I'm taking it easy."
                },
                {
                    "original": "Does working out help, uh, you relax because for me, it's, it's, so it was always a very stressful thing.",
                    "corrected": "Does working out help you relax? For me, it has always been a very stressful thing.",
                    "explanation": "The sentence structure is awkward; it should be split for clarity.",
                    "context": "I often wonder about exercise. Does working out help you relax? For me, it has always been a very stressful thing."
                },
                {
                    "original": "I can catch, uh, stay, stay, stay for, I don't remember.",
                    "corrected": "I can achieve a state of calm.",
                    "explanation": "'Catch, stay, stay, stay' is unclear; 'achieve a state of calm' is more precise.",
                    "context": "When I go to the gym, I aim for a mental break. I can achieve a state of calm. It helps me a lot."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "I don't have any worst part because I go to the gym to spend my time and I... I enjoy. Enjoy.",
                    "corrected": "I don't have any worst part because I go to the gym to spend my time, and I enjoy it.",
                    "explanation": "The sentence is incomplete; 'I enjoy' needs an object to be grammatically correct.",
                    "context": "I really love going to the gym. I don't have any worst part because I go to the gym to spend my time, and I enjoy it. It's a great way to relax."
                },
                {
                    "original": "But now I have a gym 10 minutes by bus.",
                    "corrected": "But now I have a gym that is 10 minutes away by bus.",
                    "explanation": "The phrase '10 minutes by bus' is awkward; it should specify the distance more clearly.",
                    "context": "I used to have a gym very close to my home. But now I have a gym that is 10 minutes away by bus. It's a bit more inconvenient for me."
                },
                {
                    "original": "Today I want to go by foot.",
                    "corrected": "Today I want to go on foot.",
                    "explanation": "'By foot' is incorrect; the correct phrase is 'on foot.'",
                    "context": "I usually take the bus to the gym. Today I want to go on foot. The weather is really nice for a walk."
                },
                {
                    "original": "I think I will go every day.",
                    "corrected": "I think I will go every day.",
                    "explanation": "No mistake; this sentence is correct.",
                    "context": "I have a busy schedule ahead. I think I will go every day. It helps me stay fit."
                },
                {
                    "original": "But today there wouldn't... Today it won't?",
                    "corrected": "But today there won't be?",
                    "explanation": "The phrase 'there wouldn't' is incorrect in this context; it should be 'there won't be.'",
                    "context": "I was discussing my drama class schedule. But today there won't be? I thought we had class."
                },
                {
                    "original": "I understand that any normal job, any normal director don't understand me.",
                    "corrected": "I understand that any normal job, any normal director wouldn't understand me.",
                    "explanation": "The verb 'don't' should be 'wouldn't' to match the conditional context.",
                    "context": "I'm worried about my summer plans. I understand that any normal job, any normal director wouldn't understand me. They might not allow me to take time off."
                },
                {
                    "original": "Work... Is wait.",
                    "corrected": "Work is not a wolf.",
                    "explanation": "The phrase is a literal translation of a Russian saying; it should be stated correctly in English.",
                    "context": "My father has a saying about work. Work is not a wolf; it won't run away. He believes I should take my time to relax."
                },
                {
                    "original": "Turkey is very boring.",
                    "corrected": "Turkey is quite boring.",
                    "explanation": "Using 'very' is too strong; 'quite' is more appropriate for expressing a mild opinion.",
                    "context": "I have mixed feelings about my trips. Turkey is quite boring. I prefer more exciting destinations."
                },
                {
                    "original": "Good... Warm... Warm and clean... Sea.",
                    "corrected": "Good, warm, and clean sea.",
                    "explanation": "The list lacks proper conjunctions and punctuation; it should be structured as a complete thought.",
                    "context": "When asked about my ideal vacation, I think of a good, warm, and clean sea. That’s what I really want."
                },
                {
                    "original": "Normal hotels, they adapt cuisine to Russians people.",
                    "corrected": "Normal hotels adapt their cuisine to Russian people.",
                    "explanation": "The phrase 'they adapt cuisine to Russians people' is incorrect; it should be 'adapt their cuisine to Russian people.'",
                    "context": "I have preferences when traveling. Normal hotels adapt their cuisine to Russian people. It makes dining more enjoyable."
                },
                {
                    "original": "I always... Inter... Inter... In... Take part.",
                    "corrected": "I always take part in.",
                    "explanation": "The speaker hesitates and stumbles over the phrase; it should be stated clearly.",
                    "context": "I enjoy being active during my vacations. I always take part in all the entertainment activities. It's fun!"
                },
                {
                    "original": "We always... Have... Had... We always had... Excursions.",
                    "corrected": "We always have excursions.",
                    "explanation": "The speaker confuses verb tenses; it should be in the present tense.",
                    "context": "Despite visiting Turkey many times, we still enjoy it. We always have excursions to interesting places."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "I didn't go to room before...",
                    "corrected": "I didn't go to my room before...",
                    "explanation": "The possessive pronoun 'my' is needed to indicate ownership of the room.",
                    "context": "I was thinking about my past experiences. I didn't go to my room before I realized something important. It's like a joke."
                },
                {
                    "original": "I think this summer we will have two numbers, two rooms.",
                    "corrected": "I think this summer we will have two rooms.",
                    "explanation": "'Numbers' is incorrect; 'rooms' is the proper term for living spaces.",
                    "context": "I was discussing my living arrangements for the summer. I think this summer we will have two rooms. Last year, we had one big room."
                },
                {
                    "original": "But last year we have one big room with several rooms.",
                    "corrected": "But last year we had one big room with several beds.",
                    "explanation": "The verb 'have' should be in the past tense 'had' to match the context.",
                    "context": "I was comparing my current living situation to the previous year. But last year we had one big room with several beds."
                },
                {
                    "original": "I always travel not only with my family, we go to big company with our friends.",
                    "corrected": "I always travel not only with my family; we go with a big group of friends.",
                    "explanation": "The phrase 'big company' is awkward; 'big group' is more idiomatic.",
                    "context": "I was explaining my travel habits. I always travel not only with my family; we go with a big group of friends."
                },
                {
                    "original": "Because, like, traveling is very stressful.",
                    "corrected": "Because traveling is very stressful.",
                    "explanation": "The filler 'like' is unnecessary and makes the sentence less formal.",
                    "context": "I was expressing my feelings about travel. Because traveling is very stressful, I often feel overwhelmed."
                },
                {
                    "original": "I can only be jealous of their enthusiasm.",
                    "corrected": "I can only envy their enthusiasm.",
                    "explanation": "'Be jealous of' is less idiomatic; 'envy' is a more concise verb.",
                    "context": "I was reflecting on my parents' travel habits. I can only envy their enthusiasm for long trips."
                },
                {
                    "original": "Do you remember the name of the kingdom where they traveled?",
                    "corrected": "Do you remember the name of the kingdom they traveled to?",
                    "explanation": "The preposition 'to' is needed to indicate direction or destination.",
                    "context": "I was asking about a movie reference. Do you remember the name of the kingdom they traveled to?"
                },
                {
                    "original": "I don't have something where I can read it.",
                    "corrected": "I don't have anything that I can read.",
                    "explanation": "'Something' is too vague; 'anything' is more appropriate in negative sentences.",
                    "context": "I was discussing my reading habits. I don't have anything that I can read right now."
                },
                {
                    "original": "It's not a study book.",
                    "corrected": "It's not a textbook.",
                    "explanation": "'Study book' is not a common term; 'textbook' is the standard term for educational materials.",
                    "context": "I was clarifying the nature of the material. It's not a textbook; it's meant for enjoyment."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Overwhelmed",
                    "definition": "To be affected very strongly by something, often to the point of being unable to cope.",
                    "context": {
                        "Context 1": "I felt overwhelmed with emotions after watching the sad movie.",
                        "Context 2": "The teacher was overwhelmed with the number of assignments to grade.",
                        "Context 3": "She felt overwhelmed by the amount of food at the buffet."
                    }
                },
                {
                    "word": "Insomnia",
                    "definition": "A condition where a person has difficulty falling asleep or staying asleep.",
                    "context": {
                        "Context 1": "After a stressful week, I suffered from insomnia and couldn't sleep at all.",
                        "Context 2": "The cat seemed to have insomnia, staying awake all night and chasing shadows.",
                        "Context 3": "He joked that his insomnia was due to his favorite TV show ending."
                    }
                },
                {
                    "word": "Chill",
                    "definition": "To relax or calm down.",
                    "context": {
                        "Context 1": "I just want to chill at home this weekend and watch movies.",
                        "Context 2": "The ice cream was so cold that it made me chill to the bone.",
                        "Context 3": "He decided to chill by the pool after a long week of work."
                    }
                },
                {
                    "word": "Allergy",
                    "definition": "A condition in which the immune system reacts abnormally to a substance.",
                    "context": {
                        "Context 1": "I have an allergy to pollen, which makes springtime difficult for me.",
                        "Context 2": "His allergy to cats meant he couldn't visit his friend's house.",
                        "Context 3": "She discovered her allergy to chocolate after eating too much on her birthday."
                    }
                },
                {
                    "word": "Extravagant",
                    "definition": "Lacking restraint in spending money or using resources.",
                    "context": {
                        "Context 1": "Her extravagant lifestyle included designer clothes and luxury vacations.",
                        "Context 2": "The extravagant cake at the wedding was the highlight of the reception.",
                        "Context 3": "He planned an extravagant party for his dog's birthday."
                    }
                },
                {
                    "word": "Normalizing",
                    "definition": "To make something normal or acceptable.",
                    "context": {
                        "Context 1": "The therapist focused on normalizing her feelings of anxiety.",
                        "Context 2": "The campaign aimed at normalizing the use of public transportation.",
                        "Context 3": "He tried normalizing his unusual hobbies by sharing them with friends."
                    }
                },
                {
                    "word": "Recover",
                    "definition": "To return to a normal state of health, mind, or strength.",
                    "context": {
                        "Context 1": "It took me a week to recover from the flu.",
                        "Context 2": "The athlete worked hard to recover from his injury.",
                        "Context 3": "She needed time to recover after the intense workout."
                    }
                },
                {
                    "word": "Bright",
                    "definition": "Full of light; shining.",
                    "context": {
                        "Context 1": "The bright colors of the painting caught everyone's attention.",
                        "Context 2": "He wore bright yellow socks that made him stand out.",
                        "Context 3": "The bright sun made it a perfect day for a picnic."
                    }
                },
                {
                    "word": "State",
                    "definition": "A particular condition or situation.",
                    "context": {
                        "Context 1": "She was in a state of shock after hearing the news.",
                        "Context 2": "The state of the economy is a major concern for many people.",
                        "Context 3": "He was in a state of bliss while on vacation."
                    }
                },
                {
                    "word": "Emotion",
                    "definition": "A natural instinctive state of mind deriving from one's circumstances, mood, or relationships.",
                    "context": {
                        "Context 1": "She expressed her emotions through art.",
                        "Context 2": "The movie evoked strong emotions in the audience.",
                        "Context 3": "He tried to hide his emotions during the sad scene."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Allergy",
                    "fact": "Did you know that some people are allergic to water? It's a rare condition called aquagenic urticaria!"
                },
                {
                    "word": "Chill",
                    "fact": "The term 'chill' originally referred to a cold sensation, but now it’s all about relaxing!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the computer go to sleep?",
                    "answer": "Because it had too many tabs open and needed to chill!"
                },
                {
                    "question": "Why don’t scientists trust atoms?",
                    "answer": "Because they make up everything!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Chill",
                    "definition": "To relax or take it easy.",
                    "context": {
                        "Context 1": "After a long week, I just want to chill at home and watch movies.",
                        "Context 2": "He decided to chill at the beach instead of going to the party.",
                        "Context 3": "During winter, I chill by the fireplace with a good book."
                    }
                },
                {
                    "word": "Drama class",
                    "definition": "A course focused on acting, performance, and theatrical skills.",
                    "context": {
                        "Context 1": "She signed up for a drama class to improve her acting skills.",
                        "Context 2": "The drama class put on a fantastic play that impressed everyone.",
                        "Context 3": "He often daydreams about being in a drama class instead of studying."
                    }
                },
                {
                    "word": "Sore",
                    "definition": "Feeling pain or discomfort in a part of the body.",
                    "context": {
                        "Context 1": "After working out, my muscles were sore for days.",
                        "Context 2": "She felt sore after sitting in the same position for too long.",
                        "Context 3": "The cat looked sore after jumping off the high shelf."
                    }
                },
                {
                    "word": "Excursion",
                    "definition": "A short journey or trip, especially for pleasure.",
                    "context": {
                        "Context 1": "The school organized an excursion to the museum.",
                        "Context 2": "We went on an excursion to the mountains last weekend.",
                        "Context 3": "He planned an excursion to the grocery store for snacks."
                    }
                },
                {
                    "word": "Ideal",
                    "definition": "Perfectly suitable; the best possible.",
                    "context": {
                        "Context 1": "Her ideal vacation involves sun, sand, and relaxation.",
                        "Context 2": "He found the ideal spot for his new restaurant.",
                        "Context 3": "The ideal pet for her would be a quiet cat."
                    }
                },
                {
                    "word": "Cuisine",
                    "definition": "A style or method of cooking, especially as characteristic of a particular country or region.",
                    "context": {
                        "Context 1": "I love exploring different types of cuisine when I travel.",
                        "Context 2": "Italian cuisine is known for its pasta and pizza.",
                        "Context 3": "He tried to cook French cuisine but ended up burning everything."
                    }
                },
                {
                    "word": "Comfortable",
                    "definition": "Providing physical ease and relaxation.",
                    "context": {
                        "Context 1": "This chair is so comfortable that I could sit here all day.",
                        "Context 2": "She wore comfortable shoes for the long walk.",
                        "Context 3": "The couch was comfortable enough for a quick nap."
                    }
                },
                {
                    "word": "Adaptive",
                    "definition": "Able to adjust to new conditions or environments.",
                    "context": {
                        "Context 1": "The adaptive technology helps people with disabilities.",
                        "Context 2": "Some animals are highly adaptive to their surroundings.",
                        "Context 3": "He is adaptive when it comes to changing plans at the last minute."
                    }
                },
                {
                    "word": "Postpone",
                    "definition": "To delay or put off to a later time.",
                    "context": {
                        "Context 1": "We had to postpone the meeting due to scheduling conflicts.",
                        "Context 2": "She decided to postpone her vacation until next year.",
                        "Context 3": "He postponed his lunch to finish his work."
                    }
                },
                {
                    "word": "Nightmare",
                    "definition": "A frightening or unpleasant dream; a situation that is very unpleasant.",
                    "context": {
                        "Context 1": "She woke up from a nightmare and couldn't go back to sleep.",
                        "Context 2": "The traffic jam turned out to be a nightmare for the commuters.",
                        "Context 3": "His cooking disaster felt like a nightmare to him."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Chill",
                    "fact": "Did you know that 'chill' was originally used to describe a cold sensation? Now it’s all about relaxation!"
                },
                {
                    "word": "Excursion",
                    "fact": "The word 'excursion' comes from the Latin 'excursio', meaning 'a running out.' So, technically, every trip is a 'running out' adventure!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the scarecrow win an award?",
                    "answer": "Because he was outstanding in his field!"
                },
                {
                    "question": "Why did the student eat his homework?",
                    "answer": "Because the teacher said it was a piece of cake!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Vitamin D",
                    "definition": "A fat-soluble vitamin that is essential for maintaining healthy bones and immune function, often obtained from sunlight.",
                    "context": {
                        "Context 1": "Getting enough vitamin D is important for your overall health, especially during the winter months.",
                        "Context 2": "He took a vitamin D supplement because he wasn't getting enough sunlight.",
                        "Context 3": "Many foods are fortified with vitamin D to help people meet their nutritional needs."
                    }
                },
                {
                    "word": "Sunbathe",
                    "definition": "To sit or lie in the sun to absorb sunlight, typically to achieve a tan.",
                    "context": {
                        "Context 1": "I like to sunbathe at the beach during summer vacations.",
                        "Context 2": "She decided to sunbathe in her backyard instead of going to the crowded pool.",
                        "Context 3": "They sunbathe on the roof of their apartment building to enjoy the view."
                    }
                },
                {
                    "word": "Comfort zone",
                    "definition": "A psychological state in which a person feels familiar, safe, and at ease.",
                    "context": {
                        "Context 1": "Traveling can push you out of your comfort zone, but it often leads to personal growth.",
                        "Context 2": "He prefers to stay in his comfort zone and avoid new experiences.",
                        "Context 3": "Trying new foods can be a fun way to step outside your comfort zone."
                    }
                },
                {
                    "word": "Enthusiasm",
                    "definition": "Intense and eager enjoyment, interest, or approval.",
                    "context": {
                        "Context 1": "Her enthusiasm for learning new languages is contagious.",
                        "Context 2": "The team's enthusiasm was evident during the championship game.",
                        "Context 3": "He approached the project with enthusiasm, eager to make it a success."
                    }
                },
                {
                    "word": "Impressions",
                    "definition": "An effect, feeling, or image retained as a consequence of experience.",
                    "context": {
                        "Context 1": "Traveling gives me new impressions that inspire my creativity.",
                        "Context 2": "His first impressions of the city were overwhelmingly positive.",
                        "Context 3": "She made a lasting impression on everyone at the party."
                    }
                },
                {
                    "word": "Motivation",
                    "definition": "The reason or reasons one has for acting or behaving in a particular way.",
                    "context": {
                        "Context 1": "Finding new motivation can help you achieve your goals.",
                        "Context 2": "He lacked motivation to finish the project on time.",
                        "Context 3": "Her motivation to volunteer comes from a desire to help others."
                    }
                },
                {
                    "word": "Willingness",
                    "definition": "The quality of being prepared to do something; readiness.",
                    "context": {
                        "Context 1": "Her willingness to help others makes her a great friend.",
                        "Context 2": "The team's willingness to adapt to changes was crucial for their success.",
                        "Context 3": "His willingness to try new things impressed everyone at the event."
                    }
                },
                {
                    "word": "Challenges",
                    "definition": "Difficult tasks or situations that require effort and determination to overcome.",
                    "context": {
                        "Context 1": "Facing challenges can lead to personal growth and development.",
                        "Context 2": "The challenges of climbing a mountain are worth the breathtaking views.",
                        "Context 3": "She enjoys taking on new challenges at work to improve her skills."
                    }
                },
                {
                    "word": "Communicate",
                    "definition": "To share or exchange information, news, or ideas.",
                    "context": {
                        "Context 1": "It's important to communicate effectively in any relationship.",
                        "Context 2": "They use video calls to communicate with family living abroad.",
                        "Context 3": "He found it hard to communicate his feelings to his friends."
                    }
                },
                {
                    "word": "Travel",
                    "definition": "To make a journey, typically of some length or abroad.",
                    "context": {
                        "Context 1": "I love to travel and explore new cultures around the world.",
                        "Context 2": "Traveling by train can be a scenic and relaxing experience.",
                        "Context 3": "She dreams of traveling to every continent before she turns 30."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Vitamin D",
                    "fact": "Did you know that mushrooms can produce vitamin D when exposed to sunlight, just like humans?"
                },
                {
                    "word": "Sunbathe",
                    "fact": "In some cultures, sunbathing is considered an art form, with people spending hours perfecting their tan!"
                },
                {
                    "word": "Comfort zone",
                    "fact": "The term 'comfort zone' was first used in psychology in the 1960s, but we all know it’s really just a cozy couch!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the sun go to school?",
                    "answer": "To get a little brighter!"
                },
                {
                    "question": "What do you call a bear that loves to sunbathe?",
                    "answer": "A teddy bear!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going today?"
                },
                {
                    "Person 2": "Not too bad! Just enjoying a lazy afternoon. How about you?"
                },
                {
                    "Person 1": "Same here! I was just thinking about how I can never remember my dreams."
                },
                {
                    "Person 2": "Really? I usually forget mine too, but sometimes I wake up with a weird feeling from a dream."
                },
                {
                    "Person 1": "Yeah, I read somewhere that everyone dreams, but some people just forget them right away."
                },
                {
                    "Person 2": "That makes sense! I wonder what my dreams are about when I forget them."
                },
                {
                    "Person 1": "Probably something silly! Speaking of silly, what's the weather like where you are?"
                },
                {
                    "Person 2": "It's a bit cloudy today, but yesterday was super nice. Perfect for a walk."
                },
                {
                    "Person 1": "Nice! I love those sunny days. Are you doing anything fun this weekend?"
                },
                {
                    "Person 2": "Not much planned. Just trying to relax and maybe catch up on some shows. How about you?"
                },
                {
                    "Person 1": "I might hit the gym. I need to work off all the snacks I’ve been eating lately!"
                },
                {
                    "Person 2": "Haha, I feel you! I always say I’ll go to the gym, but then I end up on the couch."
                },
                {
                    "Person 1": "Right? It’s so easy to just chill instead of working out."
                },
                {
                    "Person 2": "Exactly! But I do feel better after I go. It helps clear my mind."
                },
                {
                    "Person 1": "True! Maybe I should just get up and go right now instead of talking about it."
                },
                {
                    "Person 2": "You should! I might join you in spirit from my couch."
                },
                {
                    "Person 1": "Deal! Let’s motivate each other to get moving!"
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just trying to figure out my summer plans. How about you?"
                },
                {
                    "Person 1": "Same here! I can't believe summer is almost here. Any big trips planned?"
                },
                {
                    "Person 2": "Yeah, I'm heading to Turkey with my family. We go every summer!"
                },
                {
                    "Person 1": "Turkey sounds awesome! What do you like most about it?"
                },
                {
                    "Person 2": "Honestly, the warm weather and the beach. It's super relaxing."
                },
                {
                    "Person 1": "That sounds perfect! Do you do anything besides lounging on the beach?"
                },
                {
                    "Person 2": "Oh, definitely! We usually go on excursions and try out local food."
                },
                {
                    "Person 1": "Nice! Do you like Turkish food?"
                },
                {
                    "Person 2": "It's okay, but the hotels usually adapt the food for tourists. So it's not super authentic."
                },
                {
                    "Person 1": "Got it. So, what's your ideal vacation then?"
                },
                {
                    "Person 2": "I just want a warm, clean beach and good food. That’s all I need!"
                },
                {
                    "Person 1": "Sounds like a dream! I might just stay local this summer, maybe hit some parks."
                },
                {
                    "Person 2": "That can be fun too! Just chilling outside is a great way to spend the summer."
                },
                {
                    "Person 1": "For sure! Plus, it’s free! You can't beat that."
                },
                {
                    "Person 2": "Exactly! Let’s plan a picnic or something."
                },
                {
                    "Person 1": "Yes! I’m in. Just let me know when!"
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Are you excited for summer? I can't wait to hit the beach!"
                },
                {
                    "Person 2": "Absolutely! I love soaking up the sun. Do you like getting a tan?"
                },
                {
                    "Person 1": "Yeah, but I always end up with those weird tan lines from my swimsuit. It drives me crazy!"
                },
                {
                    "Person 2": "Right? It’s like you have to choose between looking good or being comfortable."
                },
                {
                    "Person 1": "Exactly! So, do you have any trips planned for this summer?"
                },
                {
                    "Person 2": "Yeah, my family and I are going to Florida for a week. What about you?"
                },
                {
                    "Person 1": "Nice! I'm going to visit some friends in California. We’re planning to go to a few music festivals."
                },
                {
                    "Person 2": "That sounds awesome! I love music festivals. They’re so much fun!"
                },
                {
                    "Person 1": "Totally! But traveling can be so stressful sometimes, right?"
                },
                {
                    "Person 2": "For sure! I hate packing and dealing with airports. It’s such a hassle."
                },
                {
                    "Person 1": "Yeah, I always overpack and then regret it when I have to carry my suitcase around."
                },
                {
                    "Person 2": "Same here! But once I’m at my destination, it’s all worth it."
                },
                {
                    "Person 1": "Definitely! I love exploring new places and trying new foods."
                },
                {
                    "Person 2": "Me too! Speaking of food, have you tried that new taco place downtown?"
                },
                {
                    "Person 1": "Not yet, but I’ve heard great things about it! We should go together sometime."
                },
                {
                    "Person 2": "Absolutely! Let’s plan for next week. I’m in!"
                },
                {
                    "Person 1": "Perfect! I’ll text you to set it up. Can’t wait!"
                },
                {
                    "Person 2": "Me neither! Enjoy your day!"
                },
                {
                    "Person 1": "You too! See you later!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Parts</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h2 {
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            color: #444;
            background: linear-gradient(145deg, #eaeaea, #ffffff);
            padding: 12px 20px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.8),
                inset 2px 2px 4px rgba(0, 0, 0, 0.05),
                inset -2px -2px 4px rgba(255, 255, 255, 0.4);
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }

        h3 {
            font-size: 50px;
            font-weight: bold;
        }



        #left {
            width: 100%;
            padding: 20px;
            border-right: 2px solid #ccc;
        }

        #right {
            display: none background-color: #f4f4f4;
        }

        .part-buttons,
        .content-buttons {
            margin-bottom: 10px;
        }

        .part-buttons button,
        .content-buttons button {
            margin-right: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .part-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        .content-buttons button.loading {
            animation: flash 0.5s infinite alternate;
        }

        .content-buttons button.active {
            background-color: #007bff;
            color: white;
        }

        @keyframes flash {
            0% {
                background-color: #ffd700;
            }

            100% {
                background-color: #ffa500;
            }
        }

        .hidden {
            display: none;
        }

        .section-content {
            margin-top: 1px;
            padding: 30px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        /* Vocabulary Entry */
        .entry-box {
            font-weight: bold;
            font-size: 1.4em;
            display: inline-block;
            border-bottom: 2px solid #2980b9;
            padding-bottom: 2px;
            margin-top: 25px;
            margin-bottom: 5px;
        }

        /* Definition Box */
        .definition-box {
            background-color: #f4f4f4;
            padding: 8px 12px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 5px 0;
            max-width: 400px;
            text-align: left;
        }

        /* Word Styling */
        .word {
            font-weight: bold;
            color: #000000;
            font-size: 1.2em;
        }

        .example {
            margin-left: 20px;
            font-style: italic;
        }

        /* Fact Box */
        .fact-box {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(142, 68, 173, 0.15);
            max-width: 500px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: bold;
            padding: 8px 12px;
            display: inline-block;
            border-left: 6px solid rgba(0, 0, 0, 0.2);
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            margin-bottom: 10px;
            color: white;
        }

        /* Section Colors */
        .purple-section {
            background-color: #8e44ad;
            border-left-color: #6a1b9a;
            box-shadow: 3px 3px 8px rgba(142, 68, 173, 0.3);
        }

        .joke-box {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 2px 2px 5px rgba(52, 152, 219, 0.15);
            max-width: 500px;
        }


        /* Text Formatting */
        .fact {
            color: black;
        }

        /* Joke Text */
        .joke {
            color: #6d1b9a;
            /* Deeper purple for better readability */
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Joke Question Styling */
        .joke-question {
            font-weight: bold;
            font-size: 1.2em;
            font-style: italic;
            color: #2c3e50;
            /* Dark gray-blue for a classy contrast */
            margin-bottom: 5px;
        }

        /* Enhanced Typography */
        .bold {
            font-weight: 600;
            color: #000000;
            /* Darker shade for better contrast */
        }

        .italic {
            font-style: italic;
            color: #000000;
            /* Slightly darker gray for better readability */
        }

        .bold-italic {
            font-weight: 600;
            font-style: italic;
            color: #222;
            /* More emphasis on bold-italic text */
        }

        /* Joke Box - Adds a soft neumorphic effect */
        .joke-box {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1),
                -5px -5px 10px rgba(255, 255, 255, 0.5);
            max-width: 550px;
            transition: all 0.3s ease-in-out;
        }

        /* Joke Box Hover Effect */
        .joke-box:hover {
            transform: translateY(-3px);
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.6);
        }

        /* Dialogue Container - Left Centered */
        /* Dialogue Container - Auto Width Based on Content */
        .dialogue-container {
            display: inline-block;
            /* Shrinks width to fit content */
            max-width: 800px;
            /* Prevents it from becoming too wide */
            margin: 20px 0;
            /* Aligns it to the left with some spacing */
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }



        /* Individual Dialogue Lines */
        .line {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Styling for Different Speakers */
        .person-1 {
            background: linear-gradient(145deg, #dde5ed, #c9d6e2);
            text-align: left;
            color: #2c3e50;
        }

        .person-2 {
            background: linear-gradient(145deg, #d1e8ff, #b9dfff);
            text-align: left;
            color: #1d3557;
        }

        /* Speaker Name Styling */
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;

            font-size: 1.1em;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="left">
        <h2>Lesson Parts</h2>
        <div id="partsSection" class="part-buttons"></div>
        <div id="contentSection" class="content-buttons hidden"></div>
        <div id="displaySection"></div>
    </div>

    <div id="right">
        <!-- Reserved for later use -->
    </div>

    <script>
        // Declare json_content but do not fill it
        let json_content = {
    "parts_number": 4,
    "mistakes": {
        "mistakes_1": {
            "mistakes_list": [
                {
                    "original": "He slept two days and he returned really fastly because he returned by Latvian border with Russia.",
                    "corrected": "He slept for two days and he returned really fast because he returned by the Latvian border with Russia.",
                    "explanation": "The phrase 'fastly' is incorrect; 'fast' is the appropriate adverb here. Additionally, 'for' is needed to indicate the duration of sleeping.",
                    "context": "My husband returned from Russia after a long trip. He slept for two days and he returned really fast because he returned by the Latvian border with Russia."
                },
                {
                    "original": "Latvian custom agree to... Let... Like... Allows? Allows... Give access?",
                    "corrected": "Latvian customs agree to... Let... Like... Allows? It allows... to give access.",
                    "explanation": "The term 'custom' should be pluralized to 'customs' when referring to the customs authority. The structure of the sentence also needs to be clarified.",
                    "context": "I was discussing the regulations at the border. Latvian customs agree to... Let... Like... Allows? It allows... to give access only for Latvian citizens."
                },
                {
                    "original": "It's very surprise for them.",
                    "corrected": "It's a big surprise for them.",
                    "explanation": "The article 'a' is needed before 'big surprise' to make the sentence grammatically correct.",
                    "context": "We were talking about the reactions of people at the border. It's a big surprise for them when they realize the restrictions."
                },
                {
                    "original": "They want to forbid everything which can remember them about Russia, about Soviet Union.",
                    "corrected": "They want to forbid everything that can remind them of Russia and the Soviet Union.",
                    "explanation": "'Remember' should be replaced with 'remind' to indicate causing someone to think of something. The phrase should also be streamlined.",
                    "context": "I was explaining the attitude of the Baltic countries towards Russia. They want to forbid everything that can remind them of Russia and the Soviet Union."
                },
                {
                    "original": "She have only one trauma.",
                    "corrected": "She has only one trauma.",
                    "explanation": "'Have' should be changed to 'has' to agree with the singular subject 'she.'",
                    "context": "We were discussing the cat's condition after an accident. She has only one trauma, which is a minor issue."
                },
                {
                    "original": "No, she have only peeled nails, clothes.",
                    "corrected": "No, she has only peeled nails and fur.",
                    "explanation": "'Have' should be changed to 'has' for subject-verb agreement, and 'clothes' is not appropriate in this context.",
                    "context": "I was clarifying the cat's injuries. No, she has only peeled nails and fur."
                },
                {
                    "original": "If he will go to the pick-up point, it will be a really big surprise for me if he will go to take something which looks not like his toys for his computer or his smart home.",
                    "corrected": "If he goes to the pick-up point, it would be a really big surprise for me if he goes to take something that doesn't look like his toys for his computer or his smart home.",
                    "explanation": "The conditional 'will' should be replaced with 'goes' for the present tense, and 'which looks not like' should be rephrased to 'that doesn't look like.'",
                    "context": "We were joking about my husband's shopping habits. If he goes to the pick-up point, it would be a really big surprise for me if he goes to take something that doesn't look like his toys."
                },
                {
                    "original": "How could he... He can call him and courier can come to our house and stay my order near our door because my husband is...",
                    "corrected": "How could he... He can call him and the courier can come to our house and leave my order near our door because my husband is...",
                    "explanation": "The article 'the' is needed before 'courier,' and 'stay' should be replaced with 'leave' for clarity.",
                    "context": "We were discussing how deliveries work. How could he... He can call him and the courier can come to our house and leave my order near our door because my husband is..."
                },
                {
                    "original": "Because sometimes they speak in a horrible accent.",
                    "corrected": "Because sometimes they speak with a horrible accent.",
                    "explanation": "The preposition 'in' should be replaced with 'with' when referring to speaking with an accent.",
                    "context": "We were talking about language proficiency. Because sometimes they speak with a horrible accent."
                }
            ]
        },
        "mistakes_2": {
            "mistakes_list": [
                {
                    "original": "I spend my time like anti-stress spinner.",
                    "corrected": "I spend my time with an anti-stress spinner.",
                    "explanation": "The phrase 'like anti-stress spinner' is incorrect; 'with' should be used to indicate the tool being used.",
                    "context": "I have a lot of things to unpack. I spend my time with an anti-stress spinner. It helps me relax while I organize everything."
                },
                {
                    "original": "It's better for my health than lighter.",
                    "corrected": "It's better for my health than a lighter.",
                    "explanation": "'Than lighter' is incorrect; 'a lighter' is needed to specify the object being compared.",
                    "context": "I find it quite useful. It's better for my health than a lighter. I prefer using it instead of traditional stress relief methods."
                },
                {
                    "original": "I make breakfast for him.",
                    "corrected": "I made breakfast for him.",
                    "explanation": "The present tense 'make' is incorrect here; the past tense 'made' should be used to refer to a completed action.",
                    "context": "I haven't talked to my husband today. I made breakfast for him. Now I need to cook something for lunch."
                },
                {
                    "original": "But he looked at me and talking, maybe we will go to the Lido.",
                    "corrected": "But he looked at me and talked; maybe we will go to the Lido.",
                    "explanation": "The verb 'talking' is incorrect; 'talked' should be used to maintain past tense consistency.",
                    "context": "I need to prepare lunch. But he looked at me and talked; maybe we will go to the Lido later."
                },
                {
                    "original": "I spent a lot of time for preparing.",
                    "corrected": "I spent a lot of time preparing.",
                    "explanation": "'For preparing' is incorrect; 'preparing' should be used without 'for' to indicate the purpose.",
                    "context": "I had a job interview coming up. I spent a lot of time preparing. I wanted to make sure I was ready."
                },
                {
                    "original": "I can be good in some areas, but I'm... Same areas?",
                    "corrected": "I can be good in some areas, but I'm not a good team lead.",
                    "explanation": "The phrase 'Same areas?' is unclear and disrupts the flow; it should be omitted for clarity.",
                    "context": "I discussed my skills during the interview. I can be good in some areas, but I'm not a good team lead. I prefer focusing on my strengths."
                },
                {
                    "original": "I will forget everything, which I...",
                    "corrected": "I will forget everything that I...",
                    "explanation": "'Which' is incorrect here; 'that' should be used to introduce a defining clause.",
                    "context": "I worry about my memory. I will forget everything that I learned if I don't practice regularly."
                },
                {
                    "original": "They published a vacancy of a senior developer.",
                    "corrected": "They published a vacancy for a senior developer.",
                    "explanation": "'Of' is incorrect; 'for' should be used to indicate the purpose of the vacancy.",
                    "context": "I applied for a position. They published a vacancy for a senior developer. I thought it was a good fit for me."
                },
                {
                    "original": "I can't spend Thursday to recovering.",
                    "corrected": "I can't spend Thursday recovering.",
                    "explanation": "'To recovering' is incorrect; 'recovering' should be used without 'to' to indicate the activity.",
                    "context": "I had a busy week. I can't spend Thursday recovering. I need to focus on my job interview preparations."
                },
                {
                    "original": "It's my favorite way, it's my favorite field.",
                    "corrected": "It's my favorite field.",
                    "explanation": "The phrase 'it's my favorite way' is redundant; only one clear statement is needed.",
                    "context": "I'm passionate about my work. It's my favorite field. I believe education can really make a difference."
                },
                {
                    "original": "Which one wants to control their babies?",
                    "corrected": "Which ones want to control their babies?",
                    "explanation": "'Which one' is incorrect; 'which ones' should be used to refer to multiple parents.",
                    "context": "I learned about their services. Which ones want to control their babies? They cater to parents looking for guidance."
                },
                {
                    "original": "Excuse me, I'm a little bit stupid today.",
                    "corrected": "Excuse me, I'm feeling a little bit off today.",
                    "explanation": "'Stupid' is too harsh and self-deprecating; 'off' is a more appropriate expression for feeling unwell.",
                    "context": "I'm feeling overwhelmed. Excuse me, I'm feeling a little bit off today. I think it's because of all the packing I did."
                }
            ]
        },
        "mistakes_3": {
            "mistakes_list": [
                {
                    "original": "Because they thought that when she woke up, she will be aggressive again.",
                    "corrected": "Because they thought that when she woke up, she would be aggressive again.",
                    "explanation": "The verb 'will' should be replaced with 'would' to maintain the correct conditional structure.",
                    "context": "The veterinarians took her to the clinic and put her nails. They thought that when she woke up, she would be aggressive again. This was a concern for everyone involved."
                },
                {
                    "original": "When some infection starts to grow, it means to get contaminated.",
                    "corrected": "When some infection starts to grow, it means it gets contaminated.",
                    "explanation": "The phrase 'it means to get contaminated' is awkward; 'it means it gets contaminated' is clearer.",
                    "context": "Infections can be serious. When some infection starts to grow, it means it gets contaminated. This can lead to more severe health issues."
                },
                {
                    "original": "It's easier than cut them by... Scissors?",
                    "corrected": "It's easier than cutting them with scissors.",
                    "explanation": "The phrase 'cut them by' is incorrect; 'cutting them with' is the proper form.",
                    "context": "I found a new tool for trimming nails. It's easier than cutting them with scissors. This makes the process safer and less stressful."
                },
                {
                    "original": "It's a really interesting thing for lazy people who don't like to cut their nails.",
                    "corrected": "It's a really interesting tool for lazy people who don't like to cut their nails.",
                    "explanation": "The word 'thing' is too vague; 'tool' provides clarity.",
                    "context": "I discovered a new gadget for nail care. It's a really interesting tool for lazy people who don't like to cut their nails. It simplifies the task significantly."
                },
                {
                    "original": "Like there is no real... Like with your project, for example, you had to learn a lot.",
                    "corrected": "It seems there is no real challenge... Like with your project, for example, you had to learn a lot.",
                    "explanation": "The phrase 'there is no real' needs a subject to clarify the statement.",
                    "context": "When discussing projects, I often notice differences in complexity. It seems there is no real challenge with this new app. Like with your project, for example, you had to learn a lot."
                },
                {
                    "original": "Not like gambling or banking or they can... For society.",
                    "corrected": "Not like gambling or banking; they should be useful for society.",
                    "explanation": "The sentence structure is unclear; a semicolon clarifies the connection between ideas.",
                    "context": "I prefer projects that have a positive impact. Not like gambling or banking; they should be useful for society. This is what motivates me."
                },
                {
                    "original": "And like the idea, the thing that got me interested is that all European languages, all countries around, almost all countries around English, they all have a more complex grammar system.",
                    "corrected": "The idea that got me interested is that almost all European languages surrounding English have a more complex grammar system.",
                    "explanation": "The original sentence is overly wordy; simplifying it improves clarity.",
                    "context": "I was reflecting on language structures. The idea that got me interested is that almost all European languages surrounding English have a more complex grammar system. This makes English unique."
                },
                {
                    "original": "But the more I actually thought about that, it turned out that... No.",
                    "corrected": "But the more I thought about it, it turned out that... No.",
                    "explanation": "The word 'actually' is unnecessary and makes the sentence awkward.",
                    "context": "As I pondered the complexities of language, I realized something. But the more I thought about it, it turned out that... No. English has its own challenges."
                },
                {
                    "original": "Because when you speak Russian, yes, you need to learn cases, but once you learn them, it actually makes everything much clearer, what you are saying.",
                    "corrected": "Because when you speak Russian, yes, you need to learn cases, but once you learn them, it makes everything much clearer.",
                    "explanation": "The phrase 'it actually makes' is awkward; 'it makes' is more straightforward.",
                    "context": "Learning a language can be challenging. Because when you speak Russian, yes, you need to learn cases, but once you learn them, it makes everything much clearer. This clarity is beneficial."
                },
                {
                    "original": "So again, the word peel, again, depending on the spelling even of this word, it can mean so many different things.",
                    "corrected": "So again, the word 'peel' can mean so many different things, depending on the spelling.",
                    "explanation": "The original sentence structure is convoluted; reordering improves clarity.",
                    "context": "Language nuances are fascinating. So again, the word 'peel' can mean so many different things, depending on the spelling. This complexity adds to the richness of English."
                }
            ]
        },
        "mistakes_4": {
            "mistakes_list": [
                {
                    "original": "I think that today I'm a little bit stupid.",
                    "corrected": "I think that today I'm feeling a little bit stupid.",
                    "explanation": "The phrase 'I'm a little bit stupid' is awkward; 'I'm feeling a little bit stupid' is more idiomatic for expressing a temporary state.",
                    "context": "Today has been challenging for me. I think that today I'm feeling a little bit stupid. It's just one of those days."
                },
                {
                    "original": "I was training for five, eight years ago.",
                    "corrected": "I trained for five or eight years.",
                    "explanation": "The phrase 'was training for five, eight years ago' is incorrect; it should be 'trained for five or eight years' to indicate duration.",
                    "context": "I practiced martial arts for a long time. I trained for five or eight years. It was a significant part of my life."
                },
                {
                    "original": "You're doing that perfectly.",
                    "corrected": "You do that perfectly.",
                    "explanation": "The present continuous 'You're doing' is not appropriate here; 'You do' is better for stating a general ability.",
                    "context": "In martial arts, reflexes are crucial. You do that perfectly when you react instinctively. It's all about practice."
                },
                {
                    "original": "How I can do that?",
                    "corrected": "How can I do that?",
                    "explanation": "The word order is incorrect; it should be 'How can I do that?' to form a proper question.",
                    "context": "When learning new techniques, I often ask myself questions. How can I do that? It helps me understand better."
                },
                {
                    "original": "You're just trying to not get the kick.",
                    "corrected": "You're just trying not to get kicked.",
                    "explanation": "The phrase 'to not get the kick' is awkward; 'not to get kicked' is the correct form.",
                    "context": "In martial arts, the focus is on reflexes. You're just trying not to get kicked. It's all about quick reactions."
                },
                {
                    "original": "How to destroy your knees?",
                    "corrected": "How to protect your knees?",
                    "explanation": "The phrase 'destroy your knees' is incorrect in this context; it should be 'protect your knees' to convey the right idea.",
                    "context": "In martial arts, safety is essential. You need to know how to protect your knees. It's crucial for long-term practice."
                },
                {
                    "original": "It's also movement of different parts of your body.",
                    "corrected": "It's also the movement of different parts of your body.",
                    "explanation": "The article 'the' is missing; it should be 'the movement' to specify what is being referred to.",
                    "context": "Martial arts and language learning share similarities. It's also the movement of different parts of your body. Both require coordination."
                },
                {
                    "original": "You don't have to be smart to master that.",
                    "corrected": "You don't have to be smart to master it.",
                    "explanation": "The phrase 'master that' is vague; 'master it' is clearer and more direct.",
                    "context": "Learning a skill can be accessible. You don't have to be smart to master it. Anyone can improve with practice."
                },
                {
                    "original": "In kapaera you can cut someone and you'll still be a good boy.",
                    "corrected": "In capoeira, you can strike someone and still be a good person.",
                    "explanation": "The term 'kapaera' is misspelled; it should be 'capoeira.' Additionally, 'cut' is not appropriate; 'strike' is better.",
                    "context": "Capoeira is a unique martial art. In capoeira, you can strike someone and still be a good person. It emphasizes respect."
                }
            ]
        }
    },
    "vocabulary": {
        "vocabulary_1": {
            "vocabulary_list": [
                {
                    "word": "Customs",
                    "definition": "The official department that administers and collects duties on imports and exports.",
                    "context": {
                        "Context 1": "Latvian customs allows access only for Latvian citizens.",
                        "Context 2": "The customs officer checked my luggage for prohibited items.",
                        "Context 3": "In many countries, customs can take a long time at the airport."
                    }
                },
                {
                    "word": "Fragile",
                    "definition": "Easily broken or damaged; delicate.",
                    "context": {
                        "Context 1": "He thought the earrings looked too fragile to take to Latvia.",
                        "Context 2": "The fragile vase shattered when it fell off the shelf.",
                        "Context 3": "Handle the fragile documents with care to avoid tearing them."
                    }
                },
                {
                    "word": "Jewellery",
                    "definition": "Personal ornaments, such as necklaces, rings, or bracelets, made from precious metals and stones.",
                    "context": {
                        "Context 1": "She has a lot of jewellery that she bought online.",
                        "Context 2": "The museum displayed ancient jewellery from different cultures.",
                        "Context 3": "He gave her a beautiful piece of jewellery for their anniversary."
                    }
                },
                {
                    "word": "Proficient",
                    "definition": "Competent or skilled in doing or using something.",
                    "context": {
                        "Context 1": "Swedish clients are proficient in English.",
                        "Context 2": "She is proficient in three languages: English, Spanish, and French.",
                        "Context 3": "To be proficient in math, you need to practice regularly."
                    }
                },
                {
                    "word": "Access",
                    "definition": "The means or opportunity to approach or enter a place.",
                    "context": {
                        "Context 1": "The customs gives access only for Latvian citizenships.",
                        "Context 2": "He was denied access to the private event because he didn't have an invitation.",
                        "Context 3": "The library offers free access to its online resources."
                    }
                },
                {
                    "word": "Surprise",
                    "definition": "An unexpected event or fact.",
                    "context": {
                        "Context 1": "It was a surprise for them that EU citizens faced restrictions.",
                        "Context 2": "The surprise party was a huge success and everyone had a great time.",
                        "Context 3": "Finding a $20 bill in my pocket was a pleasant surprise."
                    }
                },
                {
                    "word": "Border",
                    "definition": "A line separating two political or geographical areas.",
                    "context": {
                        "Context 1": "He returned by the Latvian border with Russia.",
                        "Context 2": "The border between the two countries is heavily guarded.",
                        "Context 3": "They crossed the border into Canada without any issues."
                    }
                },
                {
                    "word": "Return",
                    "definition": "To go back to a place or person.",
                    "context": {
                        "Context 1": "He returned home after crossing the border.",
                        "Context 2": "She decided to return the dress because it didn't fit.",
                        "Context 3": "After a long trip, they were excited to return to their hometown."
                    }
                },
                {
                    "word": "Cosmetics",
                    "definition": "Products applied to the body, especially the face, to enhance appearance.",
                    "context": {
                        "Context 1": "She bought a lot of cosmetics for herself.",
                        "Context 2": "The cosmetics industry is worth billions of dollars worldwide.",
                        "Context 3": "He used cosmetics to create a special effect for the theater performance."
                    }
                },
                {
                    "word": "Clipped",
                    "definition": "To cut something short or to remove a part of it.",
                    "context": {
                        "Context 1": "She mentioned that her cat had clipped nails.",
                        "Context 2": "He clipped the coupon before going to the store.",
                        "Context 3": "The gardener clipped the hedges to keep them neat."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Customs",
                    "fact": "In some countries, customs officers have been known to dress up as pirates for special events!"
                },
                {
                    "word": "Fragile",
                    "fact": "The word 'fragile' comes from the Latin word 'fragilis,' which means 'easily broken.'"
                },
                {
                    "word": "Jewellery",
                    "fact": "The largest diamond ever found was over 3,100 carats and is known as the Cullinan Diamond!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the jewellery store get robbed?",
                    "answer": "Because they couldn't find a good security 'ring'!"
                },
                {
                    "question": "Why did the customs officer bring a ladder?",
                    "answer": "Because they heard the job had its ups and downs!"
                }
            ]
        },
        "vocabulary_2": {
            "vocabulary_list": [
                {
                    "word": "Unpack",
                    "definition": "To remove items from a container or package.",
                    "context": {
                        "Context 1": "I spent the afternoon unpacking all the boxes from our move.",
                        "Context 2": "After the long trip, I was too tired to unpack my suitcase.",
                        "Context 3": "The chef had to unpack the ingredients before starting to cook."
                    }
                },
                {
                    "word": "Cosmetics",
                    "definition": "Products applied to the body, especially the face, to enhance appearance.",
                    "context": {
                        "Context 1": "She bought new cosmetics to prepare for the party.",
                        "Context 2": "The cosmetics industry is worth billions of dollars worldwide.",
                        "Context 3": "He used cosmetics to paint a mural on the wall."
                    }
                },
                {
                    "word": "Anti-stress",
                    "definition": "Referring to something that helps reduce stress.",
                    "context": {
                        "Context 1": "She finds knitting to be an effective anti-stress activity.",
                        "Context 2": "The anti-stress workshop taught techniques like meditation.",
                        "Context 3": "He bought an anti-stress ball to squeeze during meetings."
                    }
                },
                {
                    "word": "Suitcase",
                    "definition": "A large case used for carrying clothes and personal belongings while traveling.",
                    "context": {
                        "Context 1": "He packed his suitcase the night before his flight.",
                        "Context 2": "The suitcase was too heavy for her to lift.",
                        "Context 3": "She used a suitcase as a makeshift table for her art supplies."
                    }
                },
                {
                    "word": "Recover",
                    "definition": "To return to a normal state after a period of difficulty or illness.",
                    "context": {
                        "Context 1": "It took her a week to recover from the flu.",
                        "Context 2": "He needed to recover his lost files from the computer.",
                        "Context 3": "The athlete worked hard to recover from his injury."
                    }
                },
                {
                    "word": "Interview",
                    "definition": "A formal meeting in which one person asks questions to another for a specific purpose.",
                    "context": {
                        "Context 1": "I have a job interview scheduled for next week.",
                        "Context 2": "The journalist conducted an interview with the famous actor.",
                        "Context 3": "They held an interview to discuss the new project."
                    }
                },
                {
                    "word": "Team lead",
                    "definition": "A person who leads a team, often responsible for guiding and managing team members.",
                    "context": {
                        "Context 1": "She was promoted to team lead after her successful project.",
                        "Context 2": "The team lead organized a meeting to discuss the project timeline.",
                        "Context 3": "He wanted to be a team lead but preferred working independently."
                    }
                },
                {
                    "word": "Theoretical",
                    "definition": "Based on theory rather than practical application.",
                    "context": {
                        "Context 1": "The course was mostly theoretical, with little hands-on experience.",
                        "Context 2": "His theoretical knowledge of physics was impressive.",
                        "Context 3": "She wrote a theoretical paper on the future of technology."
                    }
                },
                {
                    "word": "Vacancy",
                    "definition": "An unoccupied position or job.",
                    "context": {
                        "Context 1": "There is a vacancy for a software developer at the company.",
                        "Context 2": "They advertised a vacancy for a new apartment in the city.",
                        "Context 3": "The hotel had a vacancy for the weekend."
                    }
                },
                {
                    "word": "Mindset",
                    "definition": "The established set of attitudes held by someone.",
                    "context": {
                        "Context 1": "A positive mindset can lead to better outcomes.",
                        "Context 2": "Her fixed mindset made it difficult for her to accept feedback.",
                        "Context 3": "The coach emphasized the importance of a winning mindset."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Cosmetics",
                    "fact": "In ancient Egypt, both men and women wore cosmetics, often using kohl to line their eyes!"
                },
                {
                    "word": "Suitcase",
                    "fact": "The world's largest suitcase was created in 2015 and measures over 3 meters tall!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the cat sit on the computer?",
                    "answer": "Because it wanted to keep an eye on the mouse!"
                },
                {
                    "question": "What did one job interviewer say to the other?",
                    "answer": "I think we should hire the candidate who can juggle; they seem to handle pressure well!"
                }
            ]
        },
        "vocabulary_3": {
            "vocabulary_list": [
                {
                    "word": "Contaminated",
                    "definition": "Made impure by exposure to or addition of a harmful substance.",
                    "context": {
                        "Context 1": "The food was contaminated with bacteria, making it unsafe to eat.",
                        "Context 2": "The river became contaminated after the factory dumped waste into it.",
                        "Context 3": "She was worried that her garden soil was contaminated with pesticides."
                    }
                },
                {
                    "word": "Aggressive",
                    "definition": "Ready or likely to attack or confront; characterized by or resulting from aggression.",
                    "context": {
                        "Context 1": "The dog became aggressive when it felt threatened.",
                        "Context 2": "His aggressive driving style often led to accidents.",
                        "Context 3": "The aggressive marketing campaign helped boost sales significantly."
                    }
                },
                {
                    "word": "Fear",
                    "definition": "An unpleasant emotion caused by the belief that someone or something is dangerous.",
                    "context": {
                        "Context 1": "She felt a fear of heights when standing on the edge of the balcony.",
                        "Context 2": "His fear of public speaking made him avoid presentations.",
                        "Context 3": "The fear of missing out often drives people to attend events."
                    }
                },
                {
                    "word": "Clipping",
                    "definition": "The act of cutting something, especially hair or nails, to make it shorter.",
                    "context": {
                        "Context 1": "Clipping her dog's nails is important for its health.",
                        "Context 2": "He enjoys clipping coupons to save money on groceries.",
                        "Context 3": "The gardener was clipping the hedges to maintain their shape."
                    }
                },
                {
                    "word": "Simplified",
                    "definition": "Made simpler or easier to understand.",
                    "context": {
                        "Context 1": "The instructions were simplified for better comprehension.",
                        "Context 2": "He simplified his schedule to reduce stress.",
                        "Context 3": "The artist's style was simplified to focus on bold colors."
                    }
                },
                {
                    "word": "Pronunciation",
                    "definition": "The way in which a word is pronounced.",
                    "context": {
                        "Context 1": "Her pronunciation of the word was clear and accurate.",
                        "Context 2": "He struggled with the pronunciation of foreign names.",
                        "Context 3": "The teacher emphasized the importance of proper pronunciation in language learning."
                    }
                },
                {
                    "word": "Context",
                    "definition": "The circumstances or setting surrounding an event or situation.",
                    "context": {
                        "Context 1": "Understanding the context of the conversation is crucial for effective communication.",
                        "Context 2": "The historical context of the painting adds depth to its meaning.",
                        "Context 3": "In a scientific experiment, context can influence the results."
                    }
                },
                {
                    "word": "Socialization",
                    "definition": "The process of interacting with others and learning the norms of a society.",
                    "context": {
                        "Context 1": "Socialization is important for children's development.",
                        "Context 2": "He believes that socialization can occur through various activities, like sports.",
                        "Context 3": "The new app aims to enhance socialization among users."
                    }
                },
                {
                    "word": "Infection",
                    "definition": "The invasion and multiplication of microorganisms in body tissues, causing illness.",
                    "context": {
                        "Context 1": "The doctor prescribed antibiotics to treat the infection.",
                        "Context 2": "She was worried about getting an infection after the surgery.",
                        "Context 3": "Infections can spread rapidly in crowded places."
                    }
                },
                {
                    "word": "Project",
                    "definition": "A planned undertaking, typically involving research or development.",
                    "context": {
                        "Context 1": "The project aims to improve community health services.",
                        "Context 2": "He was excited to present his project on renewable energy.",
                        "Context 3": "The school launched a project to promote environmental awareness."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Aggressive",
                    "fact": "Did you know that some cats can be more aggressive than dogs? They can be territorial and protective of their space!"
                },
                {
                    "word": "Simplified",
                    "fact": "The word 'simplified' is often used in tech. In fact, the first computer was so complicated that it took a team of experts just to turn it on!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the cat sit on the computer?",
                    "answer": "Because it wanted to keep an eye on the mouse!"
                },
                {
                    "question": "What do you call a dog that can do magic?",
                    "answer": "A labracadabrador!"
                }
            ]
        },
        "vocabulary_4": {
            "vocabulary_list": [
                {
                    "word": "Appeal",
                    "definition": "The quality of being attractive or interesting.",
                    "context": {
                        "Context 1": "The appeal of the new movie drew large crowds to the theater.",
                        "Context 2": "The appeal of the dessert was enhanced by its colorful presentation.",
                        "Context 3": "She felt a strong appeal to travel after seeing beautiful photos of exotic places."
                    }
                },
                {
                    "word": "Peal",
                    "definition": "A loud sound, especially of laughter or thunder.",
                    "context": {
                        "Context 1": "The peal of laughter from the children filled the park.",
                        "Context 2": "A sudden peal of thunder interrupted the quiet evening.",
                        "Context 3": "The peal of bells signaled the start of the ceremony."
                    }
                },
                {
                    "word": "Sloppy",
                    "definition": "Careless or done in a hasty manner.",
                    "context": {
                        "Context 1": "His sloppy handwriting made it difficult to read the notes.",
                        "Context 2": "The chef was criticized for the sloppy presentation of the dish.",
                        "Context 3": "She wore a sloppy outfit to the party, which surprised her friends."
                    }
                },
                {
                    "word": "Reflex",
                    "definition": "An automatic response to a stimulus.",
                    "context": {
                        "Context 1": "His reflex to dodge the ball was quick and instinctive.",
                        "Context 2": "The doctor tested her reflexes by tapping her knee with a hammer.",
                        "Context 3": "In martial arts, developing a good reflex can be crucial for success."
                    }
                },
                {
                    "word": "Dodge",
                    "definition": "To avoid something by a sudden quick movement.",
                    "context": {
                        "Context 1": "He had to dodge the incoming ball during the game.",
                        "Context 2": "The cat managed to dodge the dog chasing it.",
                        "Context 3": "She tried to dodge the question about her plans for the weekend."
                    }
                },
                {
                    "word": "Indicator",
                    "definition": "A sign that shows the state or level of something.",
                    "context": {
                        "Context 1": "The rising temperatures are an indicator of climate change.",
                        "Context 2": "His smile was a clear indicator that he was happy.",
                        "Context 3": "The traffic light is an important indicator for drivers."
                    }
                },
                {
                    "word": "Complex",
                    "definition": "Consisting of many different and connected parts.",
                    "context": {
                        "Context 1": "The complex structure of the building amazed the architects.",
                        "Context 2": "Understanding complex ideas requires careful thought.",
                        "Context 3": "The plot of the movie was too complex for young children to follow."
                    }
                },
                {
                    "word": "Martial Arts",
                    "definition": "Various sports or skills that originated as forms of self-defense or combat.",
                    "context": {
                        "Context 1": "He has been practicing martial arts for over ten years.",
                        "Context 2": "Martial arts can improve discipline and focus.",
                        "Context 3": "Many people enjoy watching martial arts movies for their action sequences."
                    }
                },
                {
                    "word": "Practice",
                    "definition": "The repeated exercise of an activity or skill to acquire or maintain proficiency.",
                    "context": {
                        "Context 1": "Regular practice is essential for mastering a musical instrument.",
                        "Context 2": "She decided to practice her speech before the big presentation.",
                        "Context 3": "The team needs to practice more if they want to win the championship."
                    }
                },
                {
                    "word": "Consume",
                    "definition": "To use up a resource or to eat or drink something.",
                    "context": {
                        "Context 1": "It's important to consume enough water during hot weather.",
                        "Context 2": "Many people consume large amounts of sugar without realizing it.",
                        "Context 3": "The company aims to consume less energy in its production process."
                    }
                }
            ],
            "funny_facts": [
                {
                    "word": "Dodge",
                    "fact": "Did you know that the term 'dodgeball' comes from the idea of dodging balls thrown at you? It's a fun way to practice your reflexes!"
                },
                {
                    "word": "Sloppy",
                    "fact": "In the world of fashion, 'sloppy chic' is a style where being messy is actually considered trendy!"
                }
            ],
            "jokes": [
                {
                    "question": "Why did the martial artist bring a ladder to class?",
                    "answer": "Because they wanted to reach new heights!"
                },
                {
                    "question": "Why did the student bring a pencil to bed?",
                    "answer": "Because they wanted to draw the curtains!"
                }
            ]
        }
    },
    "dialogue": {
        "dialogue_1": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going? Did you hear about Mark's trip?"
                },
                {
                    "Person 2": "Hey! Yeah, I heard he brought back a ton of stuff! Six hats? That's wild!"
                },
                {
                    "Person 1": "I know, right? And he got a projector too! Whats he planning to do with all that?"
                },
                {
                    "Person 2": "Probably set up a movie night. But I cant believe he crossed the border so fast!"
                },
                {
                    "Person 1": "Yeah, he made it back in just a few hours. I guess the customs were pretty lenient."
                },
                {
                    "Person 2": "I heard theyre strict about who can cross. Its surprising for EU citizens."
                },
                {
                    "Person 1": "Totally! Youd think theyd have a smoother process. Its like theyre treating it like a whole different country."
                },
                {
                    "Person 2": "Exactly! And the way they handle language in schools is a bit extreme too."
                },
                {
                    "Person 1": "Right? Trying to ban Russian in schools? Thats a big deal."
                },
                {
                    "Person 2": "Yeah, its like they want to erase any connection to the past. But its complicated."
                },
                {
                    "Person 1": "For sure. Speaking of complicated, hows that cat of yours doing?"
                },
                {
                    "Person 2": "Oh, shes back to her old self! Just a few scars, nothing major."
                },
                {
                    "Person 1": "Glad to hear it! I was worried she might have some lasting issues."
                },
                {
                    "Person 2": "Nah, shes tough! Just a little drama queen sometimes."
                },
                {
                    "Person 1": "Sounds like my dog! Always acting like shes been through a war."
                },
                {
                    "Person 2": "Haha! Dogs and their antics. So, did your husband bring you anything nice?"
                },
                {
                    "Person 1": "He got me some cosmetics! I went a little overboard with the orders, though."
                },
                {
                    "Person 2": "Nice! Did he manage to bring everything back?"
                },
                {
                    "Person 1": "Not quite. He left some jewelry behind because he thought it looked too fragile."
                },
                {
                    "Person 2": "Oh no! Thats a bummer. I guess he was just being cautious."
                },
                {
                    "Person 1": "Yeah, but I think he just didnt want to deal with it. Hes not the best at shopping."
                },
                {
                    "Person 2": "Haha! Sounds like hes more into tech than accessories."
                },
                {
                    "Person 1": "Definitely! But hey, at least he made it back without any issues."
                },
                {
                    "Person 2": "True! Thats what matters. Lets hope his next trip goes just as smoothly."
                }
            ]
        },
        "dialogue_2": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going? I heard you were unpacking a ton of stuff."
                },
                {
                    "Person 2": "Oh, you have no idea! My husband brought back a big suitcase full of my clothes and cosmetics."
                },
                {
                    "Person 1": "Nice! Did you get any new makeup?"
                },
                {
                    "Person 2": "Yeah, I bought some lipstick. It's funny though, I can find American brands in Russia, but not here in Latvia."
                },
                {
                    "Person 1": "That's strange! So, how's the cat handling all the chaos?"
                },
                {
                    "Person 2": "Well, she was actually a bit of a troublemaker. She peed on the suitcase while I was unpacking!"
                },
                {
                    "Person 1": "Oh no! That's the worst! Did you manage to wash everything?"
                },
                {
                    "Person 2": "Yep, Im washing all my clothes now. It's a mess, but what can you do?"
                },
                {
                    "Person 1": "Cats can be such little jerks sometimes. How's the baby doing with all this?"
                },
                {
                    "Person 2": "Surprisingly, the cat is more of a handful than the baby right now! I think Ive got the hang of the baby stuff."
                },
                {
                    "Person 1": "That's good to hear! So, have you talked to your husband today?"
                },
                {
                    "Person 2": "Not yet, I was busy making breakfast. He mentioned we might go to Lido for lunch."
                },
                {
                    "Person 1": "Lido? That place is great! But isnt it a bit pricey?"
                },
                {
                    "Person 2": "Yeah, it is! But sometimes you just need a break from cooking."
                },
                {
                    "Person 1": "Totally! By the way, how did your job interview go?"
                },
                {
                    "Person 2": "It was a bit of a letdown. They wanted a team lead, not a senior developer like I applied for."
                },
                {
                    "Person 1": "Oh man, thats frustrating! Did you feel prepared?"
                },
                {
                    "Person 2": "I spent two days preparing, but it was all for nothing since they wanted something different."
                },
                {
                    "Person 1": "Thats rough. What kind of tech stack were they using?"
                },
                {
                    "Person 2": "They work with FastAPI, Python, and AWS. I know most of it, but AWS is less common in Russia."
                },
                {
                    "Person 1": "Gotcha. So, whats next for you?"
                },
                {
                    "Person 2": "I might get a call from their CTO for a project in AI later on. It sounds interesting!"
                },
                {
                    "Person 1": "That would be awesome! AI is such a hot field right now."
                },
                {
                    "Person 2": "Exactly! I really believe in the power of education and technology."
                },
                {
                    "Person 1": "For sure! Well, good luck with everything. Let me know how it goes!"
                },
                {
                    "Person 2": "Thanks! I will! Now, I better get back to washing these clothes before the cat strikes again."
                }
            ]
        },
        "dialogue_3": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! Did you catch that game last night?"
                },
                {
                    "Person 2": "Yeah, I did! What a finish, right? I thought they were done for!"
                },
                {
                    "Person 1": "I know! I was on the edge of my seat. That last-minute goal was insane!"
                },
                {
                    "Person 2": "Totally! I couldn't believe it. I was jumping around my living room."
                },
                {
                    "Person 1": "Same here! I even spilled my popcorn everywhere. Worth it, though!"
                },
                {
                    "Person 2": "Haha, classic! I had my friends over, and we all lost it when they scored."
                },
                {
                    "Person 1": "Sounds like a blast! I should have joined you guys."
                },
                {
                    "Person 2": "Definitely! Next time, youre in. We need to make it a tradition."
                },
                {
                    "Person 1": "For sure! Whats the plan for the next game?"
                },
                {
                    "Person 2": "How about we do a barbecue? Get some burgers and drinks?"
                },
                {
                    "Person 1": "That sounds perfect! I can bring the drinks."
                },
                {
                    "Person 2": "Awesome! Ill handle the food. Its going to be epic!"
                },
                {
                    "Person 1": "Cant wait! Lets hope for another thrilling game."
                },
                {
                    "Person 2": "Absolutely! Heres to more last-minute goals!"
                }
            ]
        },
        "dialogue_4": {
            "dialogue_list": [
                {
                    "Person 1": "Hey! How's it going?"
                },
                {
                    "Person 2": "Not too bad! Just trying to get through the week. How about you?"
                },
                {
                    "Person 1": "Same here! Work has been a bit crazy. I feel like Im juggling a million things."
                },
                {
                    "Person 2": "I totally get that. I had a deadline yesterday, and I was up late trying to finish everything."
                },
                {
                    "Person 1": "Oh man, that sounds rough. Did you manage to get it done?"
                },
                {
                    "Person 2": "Yeah, just barely! I was running on coffee and sheer willpower."
                },
                {
                    "Person 1": "Classic! I think coffee is basically a food group at this point."
                },
                {
                    "Person 2": "Right? I cant imagine getting through the day without it. What about you? Are you a coffee drinker?"
                },
                {
                    "Person 1": "Definitely! I usually have a cup first thing in the morning. Its like my little ritual."
                },
                {
                    "Person 2": "Same here! Its the best way to start the day. Do you ever try different flavors?"
                },
                {
                    "Person 1": "I do! I love trying seasonal blends. Pumpkin spice in the fall is a must!"
                },
                {
                    "Person 2": "Oh, for sure! Im all about that pumpkin spice life. Have you tried the peppermint mocha for winter?"
                },
                {
                    "Person 1": "Yes! Its like a warm hug in a cup. I cant get enough of it."
                },
                {
                    "Person 2": "Exactly! So, any plans for the weekend?"
                },
                {
                    "Person 1": "I might go hiking if the weather's nice. How about you?"
                },
                {
                    "Person 2": "Im thinking of catching up on some shows and maybe trying a new recipe."
                },
                {
                    "Person 1": "That sounds fun! What recipe are you thinking about?"
                },
                {
                    "Person 2": "I found a cool recipe for homemade pasta. Ive always wanted to try making it from scratch."
                },
                {
                    "Person 1": "Wow, that sounds ambitious! Id love to hear how it goes."
                },
                {
                    "Person 2": "For sure! Ill let you know if it turns out edible."
                },
                {
                    "Person 1": "Im sure it will! Lets catch up later this week."
                },
                {
                    "Person 2": "Definitely! Talk to you soon!"
                }
            ]
        }
    }
}


            // Set parts_number from json_content
            let parts_number = json_content.parts_number || 0;

        // References to sections
        const partsSection = document.getElementById('partsSection');
        const contentSection = document.getElementById('contentSection');
        const displaySection = document.getElementById('displaySection');

        let activePart = null; // Track the active part

        // Function to create Part buttons
        function createPartButtons() {
            for (let i = 1; i <= parts_number; i++) {
                let button = document.createElement("button");
                button.textContent = "Part " + i;
                button.onclick = () => showContentButtons(i, button);
                partsSection.appendChild(button);
            }
        }

        // Function to show Mistakes, Vocabulary, and Dialogue buttons
        function showContentButtons(part, button) {
            // Reset previous part selection
            document.querySelectorAll(".part-buttons button").forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Clear previous content buttons and displayed content
            contentSection.innerHTML = "";
            contentSection.classList.remove("hidden");
            displaySection.innerHTML = "";

            activePart = part; // Update active part

            let sections = ["Mistakes", "Vocabulary", "Dialogue"];
            sections.forEach(section => {
                let secButton = document.createElement("button");
                secButton.textContent = section;
                secButton.onclick = () => {
                    secButton.classList.add("loading"); // Add flashing effect
                    displayContent(section, part, secButton);
                };
                contentSection.appendChild(secButton);
            });
        }

        // Function to display selected content
        function displayContent(type, part, button) {
            let dataKey = type.toLowerCase(); // "mistakes", "vocabulary", "dialogue"
            let partKey = dataKey + "_" + part; // e.g., "mistakes_1"

            if (json_content[dataKey] && json_content[dataKey][partKey]) {
                let contentData = json_content[dataKey][partKey];

                if (dataKey === "mistakes") {
                    appendContent(displayMistakes(contentData), part, type, button);
                } else if (dataKey === "vocabulary") {
                    appendContent(displayVocabulary(contentData), part, type, button);
                } else if (dataKey === "dialogue") {
                    appendContent(displayDialogue(contentData), part, type, button);
                }
            }
        }

        // Append content while keeping existing sections
        function appendContent(html, part, type, button) {
            let sectionID = `part${part}-${type}`;
            let existingSection = document.getElementById(sectionID);

            if (!existingSection) {
                let newSection = document.createElement("div");
                newSection.id = sectionID;
                newSection.classList.add("section-content");
                newSection.innerHTML = html;
                displaySection.appendChild(newSection);

                // Remove animation, keep the button highlighted
                button.classList.remove("loading");
                button.classList.add("active");
            }
        }

        // Function to display Mistakes content
        function displayMistakes(data) {
            let html = "<h3>Mistakes</h3>";
            data.mistakes_list.forEach(mistake => {
                html += `<p><b>Original:</b> ${mistake.original}</p>`;
                html += `<p><b>Corrected:</b> <b> ${mistake.corrected}</b></p>`;
                html += `<p><b>Explanation:</b> ${mistake.explanation}</p>`;
                html += `<p><b>Context:</b> <i> ${mistake.context}</i></p>`;
                html += `<hr><br>`; /* Adds an extra blank line */
            });
            return html;
        }





        // Function to display Vocabulary content
        function displayVocabulary(data) {
            let html = "<h3>Vocabulary</h3>";

            // Helper function: Preserve case in context replacement
            function formatContextSentence(sentence, word) {
                const regex = new RegExp(`\\b${word}\\b`, "gi"); // Case-insensitive exact word match
                return sentence.replace(regex, (match) => {
                    return `<span class="bold-italic">${match}</span>`; // Keeps match's case
                });
            }

            // Vocabulary Section
            data.vocabulary_list.forEach((entry, index) => {
                // Word Entry
                html += `<p class="entry-box"> <span class="word">${index + 1}. ${entry.word}</span></p>`;

                // Definition Box
                html += `<div class="definition-box"><span class="bold">Definition:</span> ${entry.definition}</div>`;

                // Context Sentences
                html += "<p>";
                Object.values(entry.context).forEach((sentence, i) => {
                    const formattedSentence = formatContextSentence(sentence, entry.word);
                    html += `<br><span class="bold">Context ${i + 1}:</span> <span class="italic">${formattedSentence}</span>`;
                });
                html += "</p>";
            });

            // Funny Facts Section
            if (data.funny_facts.length > 0) {
                html += `<div class="section-title purple-section">Funny Facts</div>`;
                data.funny_facts.forEach((fact, index) => {
                    html += `<div class="fact-box">
                <p class="fact"><span class="bold">${index + 1}. ${fact.word}:</span> ${fact.fact}</p>
             </div>`;
                });
            }

            // Jokes Section
            if (data.jokes.length > 0) {
                html += `<div class="section-title purple-section">Jokes</div>`;
                data.jokes.forEach((joke, index) => {
                    html += `<div class="joke-box">
                <p class="joke-question">${index + 1}. ${joke.question}</p>
                <p class="italic joke">${joke.answer}</p>
             </div>`;
                });
            }

            return html; // Returning the generated HTML instead of inserting it directly
        }

        function displayDialogue(data) {
            let html = `<div class="dialogue-container">`;
            html += "<h3>Dialogue</h3>";

            data.dialogue_list.forEach(entry => {
                const speaker = Object.keys(entry)[0];
                const line = entry[speaker];

                html += `<div class="line ${speaker === "Person 1" ? 'person-1' : 'person-2'}">
                    <span class="speaker">${speaker}:</span> ${line}
                 </div>`;
            });

            html += `</div>`;
            return html;
        }





        // Initialize part buttons
        createPartButtons();
    </script>

</body>

</html>